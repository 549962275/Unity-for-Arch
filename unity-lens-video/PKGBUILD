# Maintainer: Xiao-Long Chen <chenxiaolong@cxl.epac.to>

pkgname=unity-lens-video
pkgver=0.3.4
pkgrel=101
pkgdesc="Unity Video lens"
arch=('any')
url="https://launchpad.net/unity-lens-videos"
license=('GPL')
depends=('python2')
groups=('unity')
source=("https://launchpad.net/unity-lens-videos/trunk/${pkgver}/+download/${pkgname}-${pkgver}.tar.gz"
        "https://launchpad.net/unity-lens-videos/remote-videos-scope/remote-videos-${pkgver}/+download/unity-scope-video-remote-${pkgver}.tar.gz")
sha512sums=('53e92105202f6d24b743c36410a448ee3633a7892dda113d515dd1ff7db26f64bec3ae9987e13c35cc3eff8a07e3135d22ba5dfb970c7d10074bc85baf2a343f'
            '0be84b5b5118e91be6907c164bf3f2a3f8ceda7fbcdfc251c5f0e6d06f0df82e2d43239b978a582a10a84382a724e83890a6df572245fa4ba5655b55d846913c')

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"

  python2 setup.py install --root="${pkgdir}/" --optimize=1

  # Python 2 fix
  sed -i 's|\(#!.*bin.*python$\)|\12|g' "${pkgdir}/usr/lib/unity-lens-video/unity-lens-video"

  cd "${srcdir}/unity-scope-video-remote-${pkgver}"

  python2 setup.py install --root="${pkgdir}/" --optimize=1

  # Python 2 fix
  sed -i 's|\(#!.*bin.*python$\)|\12|g' "${pkgdir}/usr/lib/unity-scope-video-remote/unity-scope-video-remote"
}

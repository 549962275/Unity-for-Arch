# Maintainer: Xiao-Long Chen <chenxiaolong@cxl.epac.to>

pkgname=python-oauthlib
_ubuntu_rel=0ubuntu1
pkgver=0.3.7
pkgrel=100.${_ubuntu_rel}
pkgdesc="A Python implementation of the OAuth request-signing logic"
arch=('any')
url="http://pypi.python.org/pypi/oauthlib"
license=('BSD')
groups=('unity')
depends=('python' 'python-crypto')
makedepends=('python-distribute' 'python-nose')
options=(!emptydirs)
source=("http://pypi.python.org/packages/source/o/oauthlib/oauthlib-${pkgver}.tar.gz"
        "https://launchpad.net/ubuntu/+archive/primary/+files/python-oauthlib_${pkgver}-${_ubuntu_rel}.debian.tar.gz")
sha512sums=('a912646d5e7bdad89945e85776b50b79179c0b1e7f86a26066a2e3575d9d50fd6f74b70f711d0d4e2ac75a1b88fcb8046cf7503bfc2fc153bfcbdc5492977131'
            '23770bb270ec7a1e59f422eebb4b20690b411d53184ee22890211e66f224e9153b615c025342f14d3a698d871d06232470465f1d080f4a39be293dd67d650b4f')

build() {
  cd "${srcdir}/oauthlib-${pkgver}"

  # Apply Ubuntu's patches
  for i in $(grep -v '#' "${srcdir}/debian/patches/series"); do
    patch -Np1 -i "${srcdir}/debian/patches/${i}"
  done
}

package() {
  cd "${srcdir}/oauthlib-${pkgver}"
  python setup.py install --root="${pkgdir}/" --optimize=1
}

# vim:set ts=2 sw=2 et:

From 399a3bd80e05c3677b12044a7aa54a0dd4dc2025 Mon Sep 17 00:00:00 2001
From: Xiao-Long Chen <chenxiaolong@cxl.epac.to>
Date: Sun, 8 Jun 2014 21:26:23 -0400
Subject: [PATCH] Rename to upower-compat

---
 Makefile.am                                        |   2 +-
 configure.ac                                       |   8 +-
 doc/Makefile.am                                    |  32 +-
 doc/dbus/Makefile.am                               |  12 +-
 .../org.freedesktop.UPower-compat.Device.ref.xml   | 498 ++++++++++++++
 ....freedesktop.UPower-compat.KbdBacklight.ref.xml |  68 ++
 doc/dbus/org.freedesktop.UPower-compat.QoS.ref.xml | 211 ++++++
 doc/dbus/org.freedesktop.UPower-compat.ref.xml     | 252 +++++++
 doc/dbus/org.freedesktop.UPower.Device.ref.xml     | 498 --------------
 .../org.freedesktop.UPower.KbdBacklight.ref.xml    |  68 --
 doc/dbus/org.freedesktop.UPower.QoS.ref.xml        | 211 ------
 doc/dbus/org.freedesktop.UPower.ref.xml            | 252 -------
 doc/man/Makefile.am                                |  12 +-
 doc/man/UPower-compat.xml                          |  62 ++
 doc/man/UPower.xml                                 |  62 --
 doc/man/upower-compat.xml                          | 103 +++
 doc/man/upower.xml                                 | 103 ---
 doc/man/upowerd-compat.xml                         |  84 +++
 doc/man/upowerd.xml                                |  84 ---
 doc/upower-docs.xml                                |   6 +-
 etc/Makefile.am                                    |   2 +-
 etc/UPower-compat.conf                             |  60 ++
 etc/UPower.conf                                    |  60 --
 libupower-glib/Makefile.am                         |  36 +-
 libupower-glib/up-client.c                         |  12 +-
 libupower-glib/up-device.c                         |   8 +-
 libupower-glib/up-wakeups.c                        |  12 +-
 po/POTFILES.in                                     |   4 +-
 policy/Makefile.am                                 |  12 +-
 policy/org.freedesktop.upower.policy.in            |  41 --
 policy/org.freedesktop.upower.qos.policy.in        |  59 --
 policy/org.freedesktop.upower_compat.policy.in     |  41 ++
 policy/org.freedesktop.upower_compat.qos.policy.in |  59 ++
 rules/95-upower-battery-recall-dell.rules          |  61 --
 rules/95-upower-battery-recall-fujitsu.rules       |  31 -
 rules/95-upower-battery-recall-gateway.rules       |  28 -
 rules/95-upower-battery-recall-ibm.rules           |  38 --
 rules/95-upower-battery-recall-lenovo.rules        |  24 -
 rules/95-upower-battery-recall-toshiba.rules       |  36 -
 rules/95-upower-compat-battery-recall-dell.rules   |  61 ++
 .../95-upower-compat-battery-recall-fujitsu.rules  |  31 +
 .../95-upower-compat-battery-recall-gateway.rules  |  28 +
 rules/95-upower-compat-battery-recall-ibm.rules    |  38 ++
 rules/95-upower-compat-battery-recall-lenovo.rules |  24 +
 .../95-upower-compat-battery-recall-toshiba.rules  |  36 +
 rules/95-upower-compat-csr.rules                   |  29 +
 rules/95-upower-compat-hid.rules                   | 108 +++
 rules/95-upower-compat-wup.rules                   |   5 +
 rules/95-upower-csr.rules                          |  29 -
 rules/95-upower-hid.rules                          | 108 ---
 rules/95-upower-wup.rules                          |   5 -
 rules/Makefile.am                                  |  18 +-
 src/Makefile.am                                    |  70 +-
 src/linux/integration-test                         |  16 +-
 src/linux/up-backend.c                             |   2 +-
 src/notify-upower.sh                               |   6 +-
 src/org.freedesktop.UPower.Device.xml              | 728 ---------------------
 src/org.freedesktop.UPower.KbdBacklight.xml        | 101 ---
 src/org.freedesktop.UPower.QoS.xml                 | 331 ----------
 src/org.freedesktop.UPower.Wakeups.xml             | 131 ----
 src/org.freedesktop.UPower.conf.in                 |  40 --
 src/org.freedesktop.UPower.service.in              |   6 -
 src/org.freedesktop.UPower.xml                     | 395 -----------
 src/org.freedesktop.UPowerCompat.Device.xml        | 728 +++++++++++++++++++++
 src/org.freedesktop.UPowerCompat.KbdBacklight.xml  | 101 +++
 src/org.freedesktop.UPowerCompat.QoS.xml           | 331 ++++++++++
 src/org.freedesktop.UPowerCompat.Wakeups.xml       | 131 ++++
 src/org.freedesktop.UPowerCompat.conf.in           |  40 ++
 src/org.freedesktop.UPowerCompat.service.in        |   6 +
 src/org.freedesktop.UPowerCompat.xml               | 395 +++++++++++
 src/up-config.c                                    |   2 +-
 src/up-daemon.c                                    |  14 +-
 src/up-device.c                                    |   2 +-
 src/up-kbd-backlight.c                             |   2 +-
 src/up-main.c                                      |   2 +-
 src/up-qos.c                                       |   8 +-
 src/up-self-test.c                                 |   6 +-
 src/up-wakeups.c                                   |   2 +-
 src/upower-compat.service.in                       |  15 +
 src/upower.service.in                              |  15 -
 tools/Makefile.am                                  |  14 +-
 upower-glib-compat.pc.in                           |  13 +
 upower-glib.pc.in                                  |  13 -
 83 files changed, 3719 insertions(+), 3719 deletions(-)
 create mode 100644 doc/dbus/org.freedesktop.UPower-compat.Device.ref.xml
 create mode 100644 doc/dbus/org.freedesktop.UPower-compat.KbdBacklight.ref.xml
 create mode 100644 doc/dbus/org.freedesktop.UPower-compat.QoS.ref.xml
 create mode 100644 doc/dbus/org.freedesktop.UPower-compat.ref.xml
 delete mode 100644 doc/dbus/org.freedesktop.UPower.Device.ref.xml
 delete mode 100644 doc/dbus/org.freedesktop.UPower.KbdBacklight.ref.xml
 delete mode 100644 doc/dbus/org.freedesktop.UPower.QoS.ref.xml
 delete mode 100644 doc/dbus/org.freedesktop.UPower.ref.xml
 create mode 100644 doc/man/UPower-compat.xml
 delete mode 100644 doc/man/UPower.xml
 create mode 100644 doc/man/upower-compat.xml
 delete mode 100644 doc/man/upower.xml
 create mode 100644 doc/man/upowerd-compat.xml
 delete mode 100644 doc/man/upowerd.xml
 create mode 100644 etc/UPower-compat.conf
 delete mode 100644 etc/UPower.conf
 delete mode 100644 policy/org.freedesktop.upower.policy.in
 delete mode 100644 policy/org.freedesktop.upower.qos.policy.in
 create mode 100644 policy/org.freedesktop.upower_compat.policy.in
 create mode 100644 policy/org.freedesktop.upower_compat.qos.policy.in
 delete mode 100644 rules/95-upower-battery-recall-dell.rules
 delete mode 100644 rules/95-upower-battery-recall-fujitsu.rules
 delete mode 100644 rules/95-upower-battery-recall-gateway.rules
 delete mode 100644 rules/95-upower-battery-recall-ibm.rules
 delete mode 100644 rules/95-upower-battery-recall-lenovo.rules
 delete mode 100644 rules/95-upower-battery-recall-toshiba.rules
 create mode 100644 rules/95-upower-compat-battery-recall-dell.rules
 create mode 100644 rules/95-upower-compat-battery-recall-fujitsu.rules
 create mode 100644 rules/95-upower-compat-battery-recall-gateway.rules
 create mode 100644 rules/95-upower-compat-battery-recall-ibm.rules
 create mode 100644 rules/95-upower-compat-battery-recall-lenovo.rules
 create mode 100644 rules/95-upower-compat-battery-recall-toshiba.rules
 create mode 100644 rules/95-upower-compat-csr.rules
 create mode 100644 rules/95-upower-compat-hid.rules
 create mode 100644 rules/95-upower-compat-wup.rules
 delete mode 100644 rules/95-upower-csr.rules
 delete mode 100644 rules/95-upower-hid.rules
 delete mode 100644 rules/95-upower-wup.rules
 delete mode 100644 src/org.freedesktop.UPower.Device.xml
 delete mode 100644 src/org.freedesktop.UPower.KbdBacklight.xml
 delete mode 100644 src/org.freedesktop.UPower.QoS.xml
 delete mode 100644 src/org.freedesktop.UPower.Wakeups.xml
 delete mode 100644 src/org.freedesktop.UPower.conf.in
 delete mode 100644 src/org.freedesktop.UPower.service.in
 delete mode 100644 src/org.freedesktop.UPower.xml
 create mode 100644 src/org.freedesktop.UPowerCompat.Device.xml
 create mode 100644 src/org.freedesktop.UPowerCompat.KbdBacklight.xml
 create mode 100644 src/org.freedesktop.UPowerCompat.QoS.xml
 create mode 100644 src/org.freedesktop.UPowerCompat.Wakeups.xml
 create mode 100644 src/org.freedesktop.UPowerCompat.conf.in
 create mode 100644 src/org.freedesktop.UPowerCompat.service.in
 create mode 100644 src/org.freedesktop.UPowerCompat.xml
 create mode 100644 src/upower-compat.service.in
 delete mode 100644 src/upower.service.in
 create mode 100644 upower-glib-compat.pc.in
 delete mode 100644 upower-glib.pc.in

diff --git a/Makefile.am b/Makefile.am
index a741e68..76ef76d 100644
--- a/Makefile.am
+++ b/Makefile.am
@@ -49,7 +49,7 @@ snapshot:
 	$(MAKE) dist distdir=$(PACKAGE)-$(VERSION)-`date +"%Y%m%d"`
 
 pkgconfigdir = $(libdir)/pkgconfig
-pkgconfig_DATA = upower-glib.pc
+pkgconfig_DATA = upower-glib-compat.pc
 
 # xsltproc barfs on 'make distcheck'; disable for now
 DISTCHECK_CONFIGURE_FLAGS=--disable-man-pages --enable-gtk-doc \
diff --git a/configure.ac b/configure.ac
index 4bff4bb..8649627 100644
--- a/configure.ac
+++ b/configure.ac
@@ -7,10 +7,10 @@ m4_define([up_version],
           [up_major_version.up_minor_version.up_micro_version])
 
 AC_PREREQ(2.63)
-AC_INIT([upower],
+AC_INIT([upower-compat],
         [up_version],
         [https://bugs.freedesktop.org/enter_bug.cgi?product=upower],
-        [upower],
+        [upower-compat],
         [http://upower.freedesktop.org/])
 
 AC_CONFIG_HEADERS([config.h])
@@ -94,7 +94,7 @@ AC_ARG_WITH([historydir],
 if test "$with_historydir" != "no" -a "$with_historydir" != "" ; then
 	historydir=$withval
 else
-	historydir=${localstatedir}/lib/upower
+	historydir=${localstatedir}/lib/upower-compat
 fi
 AC_SUBST(historydir)
 
@@ -238,7 +238,7 @@ AC_DEFINE([GETTEXT_PACKAGE],[PACKAGE_TARNAME],[Define to the gettext package nam
 
 AC_CONFIG_FILES([
 Makefile
-upower-glib.pc
+upower-glib-compat.pc
 etc/Makefile
 src/Makefile
 src/dummy/Makefile
diff --git a/doc/Makefile.am b/doc/Makefile.am
index 8f01af5..632c19a 100644
--- a/doc/Makefile.am
+++ b/doc/Makefile.am
@@ -6,7 +6,7 @@ NULL =
 AUTOMAKE_OPTIONS = 1.7
 
 # The name of the module.
-DOC_MODULE=UPower
+DOC_MODULE=UPower-compat
 
 # The top-level SGML file.
 DOC_MAIN_SGML_FILE=upower-docs.xml
@@ -38,7 +38,7 @@ AM_CPPFLAGS = \
 	$(NULL)
 
 UPOWER_GLIB_LIBS =						\
-	$(top_builddir)/libupower-glib/libupower-glib.la	\
+	$(top_builddir)/libupower-glib/libupower-glib-compat.la	\
 	$(NULL)
 
 GTKDOC_LIBS = 			\
@@ -55,13 +55,13 @@ MKTMPL_OPTIONS=
 # Non-autogenerated SGML files to be included in $(DOC_MAIN_SGML_FILE)
 content_files =  			    				\
 	version.xml			    				\
-	man/upower.xml		    					\
-	man/upowerd.xml		    					\
-	man/UPower.xml		    					\
-	dbus/org.freedesktop.UPower.ref.xml				\
-	dbus/org.freedesktop.UPower.Device.ref.xml			\
-	dbus/org.freedesktop.UPower.QoS.ref.xml				\
-	dbus/org.freedesktop.UPower.KbdBacklight.ref.xml		\
+	man/upower-compat.xml	    					\
+	man/upowerd-compat.xml	   					\
+	man/UPower-compat.xml	    					\
+	dbus/org.freedesktop.UPowerCompat.ref.xml			\
+	dbus/org.freedesktop.UPowerCompat.Device.ref.xml		\
+	dbus/org.freedesktop.UPowerCompat.QoS.ref.xml			\
+	dbus/org.freedesktop.UPowerCompat.KbdBacklight.ref.xml		\
 	$(NULL)
 
 # Images to copy into HTML directory
@@ -78,13 +78,13 @@ MAINTAINERCLEANFILES =		\
 	UPower-*.txt
 
 DISTCLEANFILES =					\
-	org.freedesktop.UPower.Device.ref.xml		\
-	org.freedesktop.UPower.KbdBacklight.ref.xml	\
-	org.freedesktop.UPower.QoS.ref.xml		\
-	org.freedesktop.UPower.ref.xml			\
-	upowerd.xml					\
-	upower.xml					\
-	UPower.xml
+	org.freedesktop.UPowerCompat.Device.ref.xml		\
+	org.freedesktop.UPowerCompat.KbdBacklight.ref.xml	\
+	org.freedesktop.UPowerCompat.QoS.ref.xml		\
+	org.freedesktop.UPowerCompat.ref.xml			\
+	upowerd-compat.xml					\
+	upower-compat.xml					\
+	UPower-compat.xml
 
 if ENABLE_GTK_DOC
 include $(top_srcdir)/gtk-doc.make
diff --git a/doc/dbus/Makefile.am b/doc/dbus/Makefile.am
index 2061cb9..2a8933d 100644
--- a/doc/dbus/Makefile.am
+++ b/doc/dbus/Makefile.am
@@ -1,23 +1,23 @@
 
-all : org.freedesktop.UPower.ref.xml org.freedesktop.UPower.Device.ref.xml org.freedesktop.UPower.QoS.ref.xml org.freedesktop.UPower.KbdBacklight.ref.xml org.freedesktop.UPower.Wakeups.ref.xml
+all : org.freedesktop.UPowerCompat.ref.xml org.freedesktop.UPowerCompat.Device.ref.xml org.freedesktop.UPowerCompat.QoS.ref.xml org.freedesktop.UPowerCompat.KbdBacklight.ref.xml org.freedesktop.UPowerCompat.Wakeups.ref.xml
 
-org.freedesktop.UPower.ref.xml : $(top_srcdir)/src/org.freedesktop.UPower.xml $(top_srcdir)/doc/dbus/spec-to-docbook.xsl
+org.freedesktop.UPowerCompat.ref.xml : $(top_srcdir)/src/org.freedesktop.UPowerCompat.xml $(top_srcdir)/doc/dbus/spec-to-docbook.xsl
 	echo "<?xml version=\"1.0\"?>""<!DOCTYPE refentry PUBLIC \"-//OASIS//DTD DocBook XML V4.1.2//EN\" \"http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd\">" > $@
 	$(XSLTPROC) $(top_srcdir)/doc/dbus/spec-to-docbook.xsl $< | tail -n +2 >> $@
 
-org.freedesktop.UPower.Device.ref.xml : $(top_srcdir)/src/org.freedesktop.UPower.Device.xml $(top_srcdir)/doc/dbus/spec-to-docbook.xsl
+org.freedesktop.UPowerCompat.Device.ref.xml : $(top_srcdir)/src/org.freedesktop.UPowerCompat.Device.xml $(top_srcdir)/doc/dbus/spec-to-docbook.xsl
 	echo "<?xml version=\"1.0\"?>""<!DOCTYPE refentry PUBLIC \"-//OASIS//DTD DocBook XML V4.1.2//EN\" \"http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd\">" > $@
 	$(XSLTPROC) $(top_srcdir)/doc/dbus/spec-to-docbook.xsl $< | tail -n +2 >> $@
 
-org.freedesktop.UPower.QoS.ref.xml : $(top_srcdir)/src/org.freedesktop.UPower.QoS.xml $(top_srcdir)/doc/dbus/spec-to-docbook.xsl
+org.freedesktop.UPowerCompat.QoS.ref.xml : $(top_srcdir)/src/org.freedesktop.UPowerCompat.QoS.xml $(top_srcdir)/doc/dbus/spec-to-docbook.xsl
 	echo "<?xml version=\"1.0\"?>""<!DOCTYPE refentry PUBLIC \"-//OASIS//DTD DocBook XML V4.1.2//EN\" \"http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd\">" > $@
 	$(XSLTPROC) $(top_srcdir)/doc/dbus/spec-to-docbook.xsl $< | tail -n +2 >> $@
 
-org.freedesktop.UPower.KbdBacklight.ref.xml : $(top_srcdir)/src/org.freedesktop.UPower.KbdBacklight.xml $(top_srcdir)/doc/dbus/spec-to-docbook.xsl
+org.freedesktop.UPowerCompat.KbdBacklight.ref.xml : $(top_srcdir)/src/org.freedesktop.UPowerCompat.KbdBacklight.xml $(top_srcdir)/doc/dbus/spec-to-docbook.xsl
 	echo "<?xml version=\"1.0\"?>""<!DOCTYPE refentry PUBLIC \"-//OASIS//DTD DocBook XML V4.1.2//EN\" \"http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd\">" > $@
 	$(XSLTPROC) $(top_srcdir)/doc/dbus/spec-to-docbook.xsl $< | tail -n +2 >> $@
 
-org.freedesktop.UPower.Wakeups.ref.xml : $(top_srcdir)/src/org.freedesktop.UPower.Wakeups.xml $(top_srcdir)/doc/dbus/spec-to-docbook.xsl
+org.freedesktop.UPowerCompat.Wakeups.ref.xml : $(top_srcdir)/src/org.freedesktop.UPowerCompat.Wakeups.xml $(top_srcdir)/doc/dbus/spec-to-docbook.xsl
 	echo "<?xml version=\"1.0\"?>""<!DOCTYPE refentry PUBLIC \"-//OASIS//DTD DocBook XML V4.1.2//EN\" \"http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd\">" > $@
 	$(XSLTPROC) $(top_srcdir)/doc/dbus/spec-to-docbook.xsl $< | tail -n +2 >> $@
 
diff --git a/doc/dbus/org.freedesktop.UPower-compat.Device.ref.xml b/doc/dbus/org.freedesktop.UPower-compat.Device.ref.xml
new file mode 100644
index 0000000..9d76315
--- /dev/null
+++ b/doc/dbus/org.freedesktop.UPower-compat.Device.ref.xml
@@ -0,0 +1,498 @@
+<?xml version="1.0"?><!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN" "http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd">
+<refentry id="Device">
+  <refmeta>
+    <refentrytitle role="top_of_page">org.freedesktop.UPower.Device</refentrytitle>
+  </refmeta>
+  <refnamediv>
+    <refname>org.freedesktop.UPower.Device</refname>
+    <refpurpose>Device interface</refpurpose>
+  </refnamediv>
+  <refsynopsisdiv role="synopsis">
+    <title role="synopsis.title">Methods</title>
+    <synopsis><link linkend="Device.Refresh">Refresh</link>()
+<link linkend="Device.GetHistory">GetHistory</link>(in's'type,
+in'u'timespan,
+in'u'resolution,
+out'a(udu)'data)
+<link linkend="Device.GetStatistics">GetStatistics</link>(in's'type,
+out'a(dd)'data)
+</synopsis>
+  </refsynopsisdiv>
+  <refsect1 role="signal_proto">
+    <title role="signal_proto.title">Signals</title>
+    <synopsis><link linkend="Device::Changed">Changed</link>()
+</synopsis>
+  </refsect1>
+  <refsect1 role="impl_interfaces">
+    <title role="impl_interfaces.title">Implemented Interfaces</title>
+    <para>
+    Objects implementing org.freedesktop.UPower.Device also implements
+    org.freedesktop.DBus.Introspectable,
+    org.freedesktop.DBus.Properties
+    </para>
+  </refsect1>
+  <refsect1 role="properties">
+    <title role="properties.title">Properties</title>
+    <synopsis><link linkend="Device:NativePath">'NativePath'</link>read's'
+<link linkend="Device:Vendor">'Vendor'</link>read's'
+<link linkend="Device:Model">'Model'</link>read's'
+<link linkend="Device:Serial">'Serial'</link>read's'
+<link linkend="Device:UpdateTime">'UpdateTime'</link>read't'
+<link linkend="Device:Type">'Type'</link>read'u'
+<link linkend="Device:PowerSupply">'PowerSupply'</link>read'b'
+<link linkend="Device:HasHistory">'HasHistory'</link>read'b'
+<link linkend="Device:HasStatistics">'HasStatistics'</link>read'b'
+<link linkend="Device:Online">'Online'</link>read'b'
+<link linkend="Device:Energy">'Energy'</link>read'd'
+<link linkend="Device:EnergyEmpty">'EnergyEmpty'</link>read'd'
+<link linkend="Device:EnergyFull">'EnergyFull'</link>read'd'
+<link linkend="Device:EnergyFullDesign">'EnergyFullDesign'</link>read'd'
+<link linkend="Device:EnergyRate">'EnergyRate'</link>read'd'
+<link linkend="Device:Voltage">'Voltage'</link>read'd'
+<link linkend="Device:Luminosity">'Luminosity'</link>read'd'
+<link linkend="Device:TimeToEmpty">'TimeToEmpty'</link>read'x'
+<link linkend="Device:TimeToFull">'TimeToFull'</link>read'x'
+<link linkend="Device:Percentage">'Percentage'</link>read'd'
+<link linkend="Device:Temperature">'Temperature'</link>read'd'
+<link linkend="Device:IsPresent">'IsPresent'</link>read'b'
+<link linkend="Device:State">'State'</link>read'u'
+<link linkend="Device:IsRechargeable">'IsRechargeable'</link>read'b'
+<link linkend="Device:Capacity">'Capacity'</link>read'd'
+<link linkend="Device:Technology">'Technology'</link>read'u'
+<link linkend="Device:RecallNotice">'RecallNotice'</link>read'b'
+<link linkend="Device:RecallVendor">'RecallVendor'</link>read's'
+<link linkend="Device:RecallUrl">'RecallUrl'</link>read's'
+</synopsis>
+  </refsect1>
+  <refsect1 role="desc">
+    <title role="desc.title">Description</title>
+    <para>
+      
+        <para>
+          Objects implementing this interface are usually discovered through
+          the <literal>org.freedesktop.UPower</literal> interface on
+          the <literal>/org/freedesktop/UPower</literal> object on
+          the D-Bus system bus service with the well-known
+          name <literal>org.freedesktop.UPower</literal> using
+          the
+          <link linkend="Power.EnumerateDevices"><function>EnumerateDevices</function></link>
+          method.
+        </para>
+        <para>
+          <informalexample>
+            <programlisting>
+$ dbus-send --print-reply \
+            --system \
+            --dest=org.freedesktop.UPower \
+            /org/freedesktop/UPower/devices/battery_BAT0 \
+            org.freedesktop.DBus.Properties.GetAll \
+            string:org.freedesktop.UPower.Device
+
+method return sender=:1.386 -&gt; dest=:1.477 reply_serial=2
+   array [
+      dict entry(
+         string "native-path"
+         variant             string "/sys/devices/LNXSYSTM:00/device:00/PNP0A08:00/device:01/PNP0C09:00/PNP0C0A:00/power_supply/BAT0"
+      )
+      dict entry(
+         string "vendor"
+         variant             string "SONY"
+      )
+      dict entry(
+         string "model"
+         variant             string "42T4568"
+      )
+      dict entry(
+         string "serial"
+         variant             string "4179"
+      )
+      dict entry(
+         string "update-time"
+         variant             uint64 1226417875
+      )
+      dict entry(
+         string "type"
+         variant             uint 2
+      )
+      dict entry(
+         string "power-supply"
+         variant             boolean true
+      )
+      dict entry(
+         string "has-history"
+         variant             boolean true
+      )
+      dict entry(
+         string "has-statistics"
+         variant             boolean true
+      )
+      dict entry(
+         string "online"
+         variant             boolean false
+      )
+      dict entry(
+         string "energy"
+         variant             double 72.85
+      )
+      dict entry(
+         string "energy-empty"
+         variant             double 0
+      )
+      dict entry(
+         string "energy-full"
+         variant             double 74.55
+      )
+      dict entry(
+         string "energy-full-design"
+         variant             double 74.88
+      )
+      dict entry(
+         string "energy-rate"
+         variant             double 0
+      )
+      dict entry(
+         string "voltage"
+         variant             double 16.415
+      )
+      dict entry(
+         string "time-to-empty"
+         variant             int64 0
+      )
+      dict entry(
+         string "time-to-full"
+         variant             int64 0
+      )
+      dict entry(
+         string "percentage"
+         variant             double 97.7197
+      )
+      dict entry(
+         string "is-present"
+         variant             boolean true
+      )
+      dict entry(
+         string "state"
+         variant             uint 3
+      )
+      dict entry(
+         string "is-rechargeable"
+         variant             boolean true
+      )
+      dict entry(
+         string "capacity"
+         variant             double 100
+      )
+      dict entry(
+         string "technology"
+         variant             uint 1
+      )
+   ]
+            </programlisting>
+          </informalexample>
+        </para>
+        <para>
+          Unless otherwise noted, an empty string or the value 0 in a
+          property on this interface means not set.
+        </para>
+      
+    </para>
+  </refsect1>
+  <refsect1 role="details"><title role="details.title">Details</title><refsect2><title><anchor role="function" id="Device.Refresh"/>Refresh ()</title><indexterm><primary>Refresh</primary><secondary>Device</secondary></indexterm><programlisting>Refresh ()</programlisting></refsect2>
+          <para>
+            Refreshes the data collected from the power source.
+          </para>
+        <variablelist role="params"/><refsect3><title>Errors</title><variablelist role="errors"><varlistentry><term><parameter>org.freedesktop.UPower.Device.GeneralError</parameter>:</term><listitem><simpara>if an error occured while refreshing</simpara></listitem></varlistentry></variablelist></refsect3><refsect3><title>Permissions</title><para role="permission">Callers need the org.freedesktop.upower.refresh-power-source authorization</para></refsect3><refsect2><title><anchor role="function" id="Device.GetHistory"/>GetHistory ()</title><indexterm><primary>GetHistory</primary><secondary>Device</secondary></indexterm><programlisting>GetHistory (in's'type,
+in'u'timespan,
+in'u'resolution,
+out'a(udu)'data)</programlisting></refsect2>
+          <para>
+            Gets history for the power device that is persistent across reboots.
+          </para>
+        <variablelist role="params"><varlistentry><term><parameter>type</parameter>:</term><listitem><simpara>The type of history.
+        Valid types are <literal>rate</literal> or <literal>charge</literal>.</simpara></listitem></varlistentry><varlistentry><term><parameter>timespan</parameter>:</term><listitem><simpara>The amount of data to return in seconds, or 0 for all.</simpara></listitem></varlistentry><varlistentry><term><parameter>resolution</parameter>:</term><listitem><simpara>
+            The approximate number of points to return.
+            A higher resolution is more accurate, at the expense of plotting speed.
+          </simpara></listitem></varlistentry><varlistentry><term><parameter>data</parameter>:</term><listitem><simpara>
+            The history data for the power device, if the device supports history.
+            Data is ordered from the earliest in time, to the newest data point.
+            Each element contains the following members:
+            <para><itemizedlist><listitem><emphasis role="bold">time: </emphasis>
+                  The time value in seconds from the <literal>gettimeofday()</literal> method.
+                </listitem><listitem><emphasis role="bold">value: </emphasis>
+                  The data value, for instance the rate in W or the charge in %.
+                </listitem><listitem><emphasis role="bold">state: </emphasis>
+                  The state of the device, for instance <literal>charging</literal> or
+                  <literal>discharging</literal>.
+                </listitem></itemizedlist></para>
+        </simpara></listitem></varlistentry></variablelist><refsect2><title><anchor role="function" id="Device.GetStatistics"/>GetStatistics ()</title><indexterm><primary>GetStatistics</primary><secondary>Device</secondary></indexterm><programlisting>GetStatistics (in's'type,
+out'a(dd)'data)</programlisting></refsect2>
+          <para>
+            Gets statistics for the power device that may be interesting
+            to show on a graph in the session.
+          </para>
+        <variablelist role="params"><varlistentry><term><parameter>type</parameter>:</term><listitem><simpara>The mode for the statistics.
+        Valid types are <literal>charging</literal> or <literal>discharging</literal>.</simpara></listitem></varlistentry><varlistentry><term><parameter>data</parameter>:</term><listitem><simpara>
+            The statistics data for the power device.
+            Each element contains the following members:
+            <para><itemizedlist><listitem><emphasis role="bold">value: </emphasis>
+                  The value of the percentage point, usually in seconds
+                </listitem><listitem><emphasis role="bold">accuracy: </emphasis>
+                  The accuracy of the prediction in percent.
+                </listitem></itemizedlist></para>
+        </simpara></listitem></varlistentry></variablelist></refsect1>
+  <refsect1 role="signals"><title role="signals.title">Signal Details</title><refsect2><title><anchor role="function" id="Device::Changed"/>The Changed signal</title><indexterm><primary>Changed</primary><secondary>Device</secondary></indexterm><programlisting>Changed ()</programlisting></refsect2>
+          <para>
+            Some value on the power source changed.
+          </para>
+        <variablelist role="params"/></refsect1>
+  <refsect1 role="property_details"><title role="property_details.title">Property Details</title><refsect2><title><anchor role="function" id="Device:NativePath"/>The "NativePath" property</title><indexterm><primary>NativePath</primary><secondary>Device</secondary></indexterm><programlisting>'NativePath'read's'
+</programlisting></refsect2>
+          <para>
+            OS specific native path of the power source. On Linux this
+            is the sysfs path, for
+            example <literal>/sys/devices/LNXSYSTM:00/device:00/PNP0C0A:00/power_supply/BAT0</literal>. Is
+            blank if the device is being driven by a user space
+            driver.
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:Vendor"/>The "Vendor" property</title><indexterm><primary>Vendor</primary><secondary>Device</secondary></indexterm><programlisting>'Vendor'read's'
+</programlisting></refsect2>
+          <para>
+            Name of the vendor of the battery.
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:Model"/>The "Model" property</title><indexterm><primary>Model</primary><secondary>Device</secondary></indexterm><programlisting>'Model'read's'
+</programlisting></refsect2>
+          <para>
+            Name of the model of this battery.
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:Serial"/>The "Serial" property</title><indexterm><primary>Serial</primary><secondary>Device</secondary></indexterm><programlisting>'Serial'read's'
+</programlisting></refsect2>
+          <para>
+            Unique serial number of the battery.
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:UpdateTime"/>The "UpdateTime" property</title><indexterm><primary>UpdateTime</primary><secondary>Device</secondary></indexterm><programlisting>'UpdateTime'read't'
+</programlisting></refsect2>
+          <para>
+            The point in time (seconds since the Epoch Jan 1, 1970
+            0:00 UTC) that data was read from the power source.
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:Type"/>The "Type" property</title><indexterm><primary>Type</primary><secondary>Device</secondary></indexterm><programlisting>'Type'read'u'
+</programlisting></refsect2>
+          <para>
+            Type of power source.
+          </para>
+          <para><itemizedlist><listitem><emphasis role="bold">0: </emphasis>Unknown</listitem><listitem><emphasis role="bold">1: </emphasis>Line Power</listitem><listitem><emphasis role="bold">2: </emphasis>Battery</listitem><listitem><emphasis role="bold">3: </emphasis>Ups</listitem><listitem><emphasis role="bold">4: </emphasis>Monitor</listitem><listitem><emphasis role="bold">5: </emphasis>Mouse</listitem><listitem><emphasis role="bold">6: </emphasis>Keyboard</listitem><listitem><emphasis role="bold">7: </emphasis>Pda</listitem><listitem><emphasis role="bold">8: </emphasis>Phone</listitem></itemizedlist></para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:PowerSupply"/>The "PowerSupply" property</title><indexterm><primary>PowerSupply</primary><secondary>Device</secondary></indexterm><programlisting>'PowerSupply'read'b'
+</programlisting></refsect2>
+          <para>
+            If the power device is used to supply the system.
+            This would be set TRUE for laptop batteries and UPS devices,
+            but set FALSE for wireless mice or PDAs.
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:HasHistory"/>The "HasHistory" property</title><indexterm><primary>HasHistory</primary><secondary>Device</secondary></indexterm><programlisting>'HasHistory'read'b'
+</programlisting></refsect2>
+          <para>
+            If the power device has history.
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:HasStatistics"/>The "HasStatistics" property</title><indexterm><primary>HasStatistics</primary><secondary>Device</secondary></indexterm><programlisting>'HasStatistics'read'b'
+</programlisting></refsect2>
+          <para>
+            If the power device has statistics.
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:Online"/>The "Online" property</title><indexterm><primary>Online</primary><secondary>Device</secondary></indexterm><programlisting>'Online'read'b'
+</programlisting></refsect2>
+          <para>
+            Whether power is currently being provided through line power.
+            This property is only valid if the property
+            <link linkend="Source:Type"><literal>type</literal></link>
+            has the value "line-power".
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:Energy"/>The "Energy" property</title><indexterm><primary>Energy</primary><secondary>Device</secondary></indexterm><programlisting>'Energy'read'd'
+</programlisting></refsect2>
+          <para>
+            Amount of energy (measured in Wh) currently available in
+            the power source.
+          </para><para>
+            This property is only valid if the property
+            <link linkend="Source:Type"><literal>type</literal></link>
+            has the value "battery".
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:EnergyEmpty"/>The "EnergyEmpty" property</title><indexterm><primary>EnergyEmpty</primary><secondary>Device</secondary></indexterm><programlisting>'EnergyEmpty'read'd'
+</programlisting></refsect2>
+          <para>
+            Amount of energy (measured in Wh) in the power source when
+            it's considered to be empty.
+          </para><para>
+            This property is only valid if the property
+            <link linkend="Source:Type"><literal>type</literal></link>
+            has the value "battery".
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:EnergyFull"/>The "EnergyFull" property</title><indexterm><primary>EnergyFull</primary><secondary>Device</secondary></indexterm><programlisting>'EnergyFull'read'd'
+</programlisting></refsect2>
+          <para>
+            Amount of energy (measured in Wh) in the power source when
+            it's considered full.
+          </para><para>
+            This property is only valid if the property
+            <link linkend="Source:Type"><literal>type</literal></link>
+            has the value "battery".
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:EnergyFullDesign"/>The "EnergyFullDesign" property</title><indexterm><primary>EnergyFullDesign</primary><secondary>Device</secondary></indexterm><programlisting>'EnergyFullDesign'read'd'
+</programlisting></refsect2>
+          <para>
+            Amount of energy (measured in Wh) the power source is
+            designed to hold when it's considered full.
+          </para><para>
+            This property is only valid if the property
+            <link linkend="Source:Type"><literal>type</literal></link>
+            has the value "battery".
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:EnergyRate"/>The "EnergyRate" property</title><indexterm><primary>EnergyRate</primary><secondary>Device</secondary></indexterm><programlisting>'EnergyRate'read'd'
+</programlisting></refsect2>
+          <para>
+            Amount of energy being drained from the source, measured
+            in W. If positive, the source is being discharged, if
+            negative it's being charged.
+          </para><para>
+            This property is only valid if the property
+            <link linkend="Source:Type"><literal>type</literal></link>
+            has the value "battery".
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:Voltage"/>The "Voltage" property</title><indexterm><primary>Voltage</primary><secondary>Device</secondary></indexterm><programlisting>'Voltage'read'd'
+</programlisting></refsect2>
+          <para>
+            Voltage in the Cell or being recorded by the meter.
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:Luminosity"/>The "Luminosity" property</title><indexterm><primary>Luminosity</primary><secondary>Device</secondary></indexterm><programlisting>'Luminosity'read'd'
+</programlisting></refsect2>
+          <para>
+            Luminosity being recorded by the meter.
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:TimeToEmpty"/>The "TimeToEmpty" property</title><indexterm><primary>TimeToEmpty</primary><secondary>Device</secondary></indexterm><programlisting>'TimeToEmpty'read'x'
+</programlisting></refsect2>
+          <para>
+            Number of seconds until the power source is considered empty.
+            Is set to 0 if unknown.
+          </para><para>
+            This property is only valid if the property
+            <link linkend="Source:Type"><literal>type</literal></link>
+            has the value "battery".
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:TimeToFull"/>The "TimeToFull" property</title><indexterm><primary>TimeToFull</primary><secondary>Device</secondary></indexterm><programlisting>'TimeToFull'read'x'
+</programlisting></refsect2>
+          <para>
+            Number of seconds until the power source is considered full.
+            Is set to 0 if unknown.
+          </para><para>
+            This property is only valid if the property
+            <link linkend="Source:Type"><literal>type</literal></link>
+            has the value "battery".
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:Percentage"/>The "Percentage" property</title><indexterm><primary>Percentage</primary><secondary>Device</secondary></indexterm><programlisting>'Percentage'read'd'
+</programlisting></refsect2>
+          <para>
+            The amount of energy left in the power source expressed as
+            a percentage between 0 and 100. Typically this is the same as
+            (<link linkend="Source:Energy"><literal>energy</literal></link> -
+            <link linkend="Source:EnergyEmpty"><literal>energy-empty</literal></link>) /
+            (<link linkend="Source:EnergyFull"><literal>energy-full</literal></link> -
+            <link linkend="Source:EnergyEmpty"><literal>energy-empty</literal></link>).
+            However, some primitive power sources are capable of only
+            reporting percentages and in this case the energy-*
+            properties will be unset while this property is set.
+          </para><para>
+            This property is only valid if the property
+            <link linkend="Source:Type"><literal>type</literal></link>
+            has the value "battery".
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:Temperature"/>The "Temperature" property</title><indexterm><primary>Temperature</primary><secondary>Device</secondary></indexterm><programlisting>'Temperature'read'd'
+</programlisting></refsect2>
+          <para>
+            The temperature of the device in degrees Celsius. This property is
+            only valid if the property
+            <link linkend="Source:Type"><literal>type</literal></link>
+            has the value "battery".
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:IsPresent"/>The "IsPresent" property</title><indexterm><primary>IsPresent</primary><secondary>Device</secondary></indexterm><programlisting>'IsPresent'read'b'
+</programlisting></refsect2>
+          <para>
+            If the power source is present in the bay.
+            This field is required as some batteries are hot-removable, for example
+            expensive UPS and most laptop batteries.
+          </para><para>
+            This property is only valid if the property
+            <link linkend="Source:Type"><literal>type</literal></link>
+            has the value "battery".
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:State"/>The "State" property</title><indexterm><primary>State</primary><secondary>Device</secondary></indexterm><programlisting>'State'read'u'
+</programlisting></refsect2>
+          <para>
+            The battery power state.
+          </para>
+          <para><itemizedlist><listitem><emphasis role="bold">0: </emphasis>Unknown</listitem><listitem><emphasis role="bold">1: </emphasis>Charging</listitem><listitem><emphasis role="bold">2: </emphasis>Discharging</listitem><listitem><emphasis role="bold">3: </emphasis>Empty</listitem><listitem><emphasis role="bold">4: </emphasis>Fully charged</listitem><listitem><emphasis role="bold">5: </emphasis>Pending charge</listitem><listitem><emphasis role="bold">6: </emphasis>Pending discharge</listitem></itemizedlist></para>
+          <para>
+            This property is only valid if the property
+            <link linkend="Source:Type"><literal>type</literal></link>
+            has the value "battery".
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:IsRechargeable"/>The "IsRechargeable" property</title><indexterm><primary>IsRechargeable</primary><secondary>Device</secondary></indexterm><programlisting>'IsRechargeable'read'b'
+</programlisting></refsect2>
+          <para>
+            If the power source is rechargeable.
+          </para><para>
+            This property is only valid if the property
+            <link linkend="Source:Type"><literal>type</literal></link>
+            has the value "battery".
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:Capacity"/>The "Capacity" property</title><indexterm><primary>Capacity</primary><secondary>Device</secondary></indexterm><programlisting>'Capacity'read'd'
+</programlisting></refsect2>
+          <para>
+            The capacity of the power source expressed as a percentage between 0 and 100.
+            The capacity of the battery will reduce with age.
+            A capacity value less than 75% is usually a sign that you should renew your battery.
+            Typically this value is the same as
+            (<link linkend="Source:FullDesign"><literal>full-design</literal></link> /
+            <link linkend="Source:Full"><literal>full</literal></link>) * 100.
+            However, some primitive power sources are not capable reporting capacity
+            and in this case the capacity property will be unset.
+          </para><para>
+            This property is only valid if the property
+            <link linkend="Source:Type"><literal>type</literal></link>
+            has the value "battery".
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:Technology"/>The "Technology" property</title><indexterm><primary>Technology</primary><secondary>Device</secondary></indexterm><programlisting>'Technology'read'u'
+</programlisting></refsect2>
+          <para>
+            Technology used in the battery:
+          </para>
+          <para><itemizedlist><listitem><emphasis role="bold">0: </emphasis>Unknown</listitem><listitem><emphasis role="bold">1: </emphasis>Lithium ion</listitem><listitem><emphasis role="bold">2: </emphasis>Lithium polymer</listitem><listitem><emphasis role="bold">3: </emphasis>Lithium iron phosphate</listitem><listitem><emphasis role="bold">4: </emphasis>Lead acid</listitem><listitem><emphasis role="bold">5: </emphasis>Nickel cadmium</listitem><listitem><emphasis role="bold">6: </emphasis>Nickel metal hydride</listitem></itemizedlist></para>
+          <para>
+            This property is only valid if the property
+            <link linkend="Source:Type"><literal>type</literal></link>
+            has the value "battery".
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:RecallNotice"/>The "RecallNotice" property</title><indexterm><primary>RecallNotice</primary><secondary>Device</secondary></indexterm><programlisting>'RecallNotice'read'b'
+</programlisting></refsect2>
+          <para>
+            If the device may have been recalled by the vendor due to a suspected
+            fault.
+            This key does not imply the device is faulty, only that it approximatly
+            matches the description from the vendor of units that were recalled.
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:RecallVendor"/>The "RecallVendor" property</title><indexterm><primary>RecallVendor</primary><secondary>Device</secondary></indexterm><programlisting>'RecallVendor'read's'
+</programlisting></refsect2>
+          <para>
+            The vendor that is handling the hardware recall.
+          </para>
+          <para>
+            This property is only valid if the property recall-notice is true.
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:RecallUrl"/>The "RecallUrl" property</title><indexterm><primary>RecallUrl</primary><secondary>Device</secondary></indexterm><programlisting>'RecallUrl'read's'
+</programlisting></refsect2>
+          <para>
+            The URL to visit about the hardware recall.
+          </para>
+          <para>
+            This property is only valid if the property recall-notice is true.
+          </para>
+        <variablelist role="params"/></refsect1>
+</refentry>
diff --git a/doc/dbus/org.freedesktop.UPower-compat.KbdBacklight.ref.xml b/doc/dbus/org.freedesktop.UPower-compat.KbdBacklight.ref.xml
new file mode 100644
index 0000000..80637f9
--- /dev/null
+++ b/doc/dbus/org.freedesktop.UPower-compat.KbdBacklight.ref.xml
@@ -0,0 +1,68 @@
+<?xml version="1.0"?><!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN" "http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd">
+<refentry id="KbdBacklight">
+  <refmeta>
+    <refentrytitle role="top_of_page">org.freedesktop.UPower.KbdBacklight</refentrytitle>
+  </refmeta>
+  <refnamediv>
+    <refname>org.freedesktop.UPower.KbdBacklight</refname>
+    <refpurpose>KbdBacklight interface</refpurpose>
+  </refnamediv>
+  <refsynopsisdiv role="synopsis">
+    <title role="synopsis.title">Methods</title>
+    <synopsis><link linkend="KbdBacklight.GetMaxBrightness">GetMaxBrightness</link>(out'i'value)
+<link linkend="KbdBacklight.GetBrightness">GetBrightness</link>(out'i'value)
+<link linkend="KbdBacklight.SetBrightness">SetBrightness</link>(in'i'value)
+</synopsis>
+  </refsynopsisdiv>
+  <refsect1 role="signal_proto">
+    <title role="signal_proto.title">Signals</title>
+    <synopsis><link linkend="KbdBacklight::BrightnessChanged">BrightnessChanged</link>('i'value)
+</synopsis>
+  </refsect1>
+  <refsect1 role="impl_interfaces">
+    <title role="impl_interfaces.title">Implemented Interfaces</title>
+    <para>
+    Objects implementing org.freedesktop.UPower.KbdBacklight also implements
+    org.freedesktop.DBus.Introspectable,
+    org.freedesktop.DBus.Properties
+    </para>
+  </refsect1>
+  <refsect1 role="desc">
+    <title role="desc.title">Description</title>
+    <para>
+      
+        <para>
+          org.freedesktop.UPower.KbdBacklight is a DBus interface implemented
+          by UPower.
+	  It allows the keyboard backlight (if present) to be controlled.
+        </para>
+      
+    </para>
+  </refsect1>
+  <refsect1 role="details"><title role="details.title">Details</title><refsect2><title><anchor role="function" id="KbdBacklight.GetMaxBrightness"/>GetMaxBrightness ()</title><indexterm><primary>GetMaxBrightness</primary><secondary>KbdBacklight</secondary></indexterm><programlisting>GetMaxBrightness (out'i'value)</programlisting></refsect2>
+          <para>
+            Get the maximum brightness level for the keyboard backlight.
+          </para>
+        <variablelist role="params"><varlistentry><term><parameter>value</parameter>:</term><listitem><simpara>
+            The maximum value of the keyboard backlight brightness.
+          </simpara></listitem></varlistentry></variablelist><refsect3><title>Errors</title><variablelist role="errors"><varlistentry><term><parameter>org.freedesktop.UPower.GeneralError</parameter>:</term><listitem><simpara>if an error occured while getting the maximum brightness</simpara></listitem></varlistentry></variablelist></refsect3><refsect2><title><anchor role="function" id="KbdBacklight.GetBrightness"/>GetBrightness ()</title><indexterm><primary>GetBrightness</primary><secondary>KbdBacklight</secondary></indexterm><programlisting>GetBrightness (out'i'value)</programlisting></refsect2>
+          <para>
+            Get the brightness level of the keyboard backlight.
+          </para>
+        <variablelist role="params"><varlistentry><term><parameter>value</parameter>:</term><listitem><simpara>
+            The current value of the keyboard backlight brightness.
+          </simpara></listitem></varlistentry></variablelist><refsect3><title>Errors</title><variablelist role="errors"><varlistentry><term><parameter>org.freedesktop.UPower.GeneralError</parameter>:</term><listitem><simpara>if an error occured while getting the brightness</simpara></listitem></varlistentry></variablelist></refsect3><refsect2><title><anchor role="function" id="KbdBacklight.SetBrightness"/>SetBrightness ()</title><indexterm><primary>SetBrightness</primary><secondary>KbdBacklight</secondary></indexterm><programlisting>SetBrightness (in'i'value)</programlisting></refsect2>
+          <para>
+            Set the brightness level of the keyboard backlight.
+          </para>
+        <variablelist role="params"><varlistentry><term><parameter>value</parameter>:</term><listitem><simpara>
+            The value to set the KbdBacklight brightness.
+          </simpara></listitem></varlistentry></variablelist><refsect3><title>Errors</title><variablelist role="errors"><varlistentry><term><parameter>org.freedesktop.UPower.GeneralError</parameter>:</term><listitem><simpara>if an error occured while setting the brightness</simpara></listitem></varlistentry></variablelist></refsect3></refsect1>
+  <refsect1 role="signals"><title role="signals.title">Signal Details</title><refsect2><title><anchor role="function" id="KbdBacklight::BrightnessChanged"/>The BrightnessChanged signal</title><indexterm><primary>BrightnessChanged</primary><secondary>KbdBacklight</secondary></indexterm><programlisting>BrightnessChanged ('i'value)</programlisting></refsect2>
+          <para>
+	    The keyboard backlight brightness level has changed.
+          </para>
+        <variablelist role="params"><varlistentry><term><parameter>value</parameter>:</term><listitem><simpara>
+            The new brightness value of the keyboard backlight.
+          </simpara></listitem></varlistentry></variablelist></refsect1>
+</refentry>
diff --git a/doc/dbus/org.freedesktop.UPower-compat.QoS.ref.xml b/doc/dbus/org.freedesktop.UPower-compat.QoS.ref.xml
new file mode 100644
index 0000000..93908ab
--- /dev/null
+++ b/doc/dbus/org.freedesktop.UPower-compat.QoS.ref.xml
@@ -0,0 +1,211 @@
+<?xml version="1.0"?><!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN" "http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd">
+<refentry id="QoS">
+  <refmeta>
+    <refentrytitle role="top_of_page">org.freedesktop.UPower.QoS</refentrytitle>
+  </refmeta>
+  <refnamediv>
+    <refname>org.freedesktop.UPower.QoS</refname>
+    <refpurpose>QoS interface</refpurpose>
+  </refnamediv>
+  <refsynopsisdiv role="synopsis">
+    <title role="synopsis.title">Methods</title>
+    <synopsis><link linkend="QoS.SetMinimumLatency">SetMinimumLatency</link>(in's'type,
+in'i'value)
+<link linkend="QoS.RequestLatency">RequestLatency</link>(in's'type,
+in'i'value,
+in'b'persistent,
+out'u'cookie)
+<link linkend="QoS.CancelRequest">CancelRequest</link>(in'u'cookie)
+<link linkend="QoS.GetLatency">GetLatency</link>(in's'type,
+out'i'value)
+<link linkend="QoS.GetLatencyRequests">GetLatencyRequests</link>(out'a(uuusxbssi)'requests)
+</synopsis>
+  </refsynopsisdiv>
+  <refsect1 role="signal_proto">
+    <title role="signal_proto.title">Signals</title>
+    <synopsis><link linkend="QoS::LatencyChanged">LatencyChanged</link>('s'type,
+'i'value)
+<link linkend="QoS::RequestsChanged">RequestsChanged</link>()
+</synopsis>
+  </refsect1>
+  <refsect1 role="impl_interfaces">
+    <title role="impl_interfaces.title">Implemented Interfaces</title>
+    <para>
+    Objects implementing org.freedesktop.UPower.QoS also implements
+    org.freedesktop.DBus.Introspectable,
+    org.freedesktop.DBus.Properties
+    </para>
+  </refsect1>
+  <refsect1 role="desc">
+    <title role="desc.title">Description</title>
+    <para>
+      
+        <para>
+          org.freedesktop.UPower.QoS is a DBus interface implemented
+          by UPower.
+          It allows applications to request latencies, for example a couple of seconds
+          for an IM application, or a few hundred microseconds for a multiplayer game.
+        </para>
+        <para>
+          Use cases:
+        </para>
+        
+          
+            <para>
+              I want my IM application to request 0.5s latency for messages.
+            </para>
+            <para>
+              I'm running an OpenGL simulation and want maximum performance,
+              even when on battery power.
+            </para>
+            <para>
+              I'm running an SQL server for a credit card company, and want the
+              server to request low latency CPU and network as any delay costs money.
+            </para>
+            <para>
+              I'm an admin, and want to change the power consumption vs. latency
+              from cron scripts so it uses high latency during the night for
+              maximum power saving, and low latency during business hours.
+            </para>
+            <para>
+              I want high throughput when copying files, but want low throughput
+              for downloading updates in the background.
+            </para>
+            <para>
+              I want my power manager to set all latencies to lowest when on
+              AC power.
+            </para>
+            <para>
+              I don't want my users messing with latency settings.
+            </para>
+            <para>
+              I'm and admin and I want to be able to override all latency
+              settings on my machines.
+            </para>
+          
+        
+        <para>
+          Why don't applications use the PMQoS interface directly?
+          By providing a framework we can override requests by policy, and also
+          control requests from random services.
+          You also can't set latencies unless you're the root user, which is not
+          suitable for the desktop use case.
+        </para>
+        <para>
+          Of course, you can do if you really want, but then you loose the
+          benefits of the query interface and the policy override,
+          and have to run your application as root.
+        </para>
+      
+    </para>
+  </refsect1>
+  <refsect1 role="details"><title role="details.title">Details</title><refsect2><title><anchor role="function" id="QoS.SetMinimumLatency"/>SetMinimumLatency ()</title><indexterm><primary>SetMinimumLatency</primary><secondary>QoS</secondary></indexterm><programlisting>SetMinimumLatency (in's'type,
+in'i'value)</programlisting></refsect2>
+          <para>
+            Set the minimum acceptable latency of the system.
+            Setting this value tells the system to not attempt latencies below this setting.
+            This may be useful in a data center or server room, when you want to override the
+            latency requests from applications.
+            This may be required if the server room is operating outside a standard thermal
+            or power envelope, and an override is required.
+            You do not have to use this method during normal operation.
+          </para>
+        <variablelist role="params"><varlistentry><term><parameter>type</parameter>:</term><listitem><simpara>
+            The type of latency to control, <literal>cpu_dma</literal> or
+            <literal>network</literal>.
+          </simpara></listitem></varlistentry><varlistentry><term><parameter>value</parameter>:</term><listitem><simpara>
+            The value, in microseconds or kilobits per second.
+            The value <literal>-1</literal> means unset and the default is used.
+          </simpara></listitem></varlistentry></variablelist><refsect3><title>Errors</title><variablelist role="errors"><varlistentry><term><parameter>org.freedesktop.UPower.GeneralError</parameter>:</term><listitem><simpara>if an error occured while setting the latency</simpara></listitem></varlistentry></variablelist></refsect3><refsect3><title>Permissions</title><para role="permission">Callers need the <literal>org.freedesktop.upower.qos.set-minimum-latency</literal> authorization</para></refsect3><refsect2><title><anchor role="function" id="QoS.RequestLatency"/>RequestLatency ()</title><indexterm><primary>RequestLatency</primary><secondary>QoS</secondary></indexterm><programlisting>RequestLatency (in's'type,
+in'i'value,
+in'b'persistent,
+out'u'cookie)</programlisting></refsect2>
+          <para>
+            Set the required latency of an application or service.
+          </para>
+        <variablelist role="params"><varlistentry><term><parameter>type</parameter>:</term><listitem><simpara>
+            The type of latency to control, <literal>cpu_dma</literal> or
+            <literal>network</literal>.
+          </simpara></listitem></varlistentry><varlistentry><term><parameter>value</parameter>:</term><listitem><simpara>
+            The value, in microseconds or kilobits per second.
+            The value <literal>-1</literal> means remove all latency requirements.
+          </simpara></listitem></varlistentry><varlistentry><term><parameter>persistent</parameter>:</term><listitem><simpara>
+            If the latency request outlives the connection.
+            When the application issuing the request disconnects from the system
+            bus, the latency request is automatically cleaned up.
+            By setting this flag to TRUE, the request is not cleaned up when
+            the client disconnects, and the cookie is preserved acress reboots.
+          </simpara></listitem></varlistentry><varlistentry><term><parameter>cookie</parameter>:</term><listitem><simpara>
+            A cookie that identifies the request. This allows an application or
+            service to request multiple latency settings from one process, and for
+            other processes to cancel requests.
+          </simpara></listitem></varlistentry></variablelist><refsect3><title>Errors</title><variablelist role="errors"><varlistentry><term><parameter>org.freedesktop.UPower.GeneralError</parameter>:</term><listitem><simpara>if an error occured while setting the latency</simpara></listitem></varlistentry></variablelist></refsect3><refsect3><title>Permissions</title><para role="permission">
+          Callers need the
+          <literal>org.freedesktop.upower.qos.request-latency-persistent</literal>
+          authorization if <literal>persistent</literal> is TRUE, or
+          <literal>org.freedesktop.upower.qos.request-latency</literal> otherwise.
+        </para></refsect3><refsect2><title><anchor role="function" id="QoS.CancelRequest"/>CancelRequest ()</title><indexterm><primary>CancelRequest</primary><secondary>QoS</secondary></indexterm><programlisting>CancelRequest (in'u'cookie)</programlisting></refsect2>
+          <para>
+            Cancel the latency request from the application or service.
+          </para>
+        <variablelist role="params"><varlistentry><term><parameter>cookie</parameter>:</term><listitem><simpara>
+            A cookie that identifies the request. This allows an application or
+            serivice to request multiple latency settings from one process.
+          </simpara></listitem></varlistentry></variablelist><refsect3><title>Errors</title><variablelist role="errors"><varlistentry><term><parameter>org.freedesktop.UPower.GeneralError</parameter>:</term><listitem><simpara>if an error occured while clearing the latency</simpara></listitem></varlistentry></variablelist></refsect3><refsect3><title>Permissions</title><para role="permission">
+          Callers need the
+          <literal>org.freedesktop.upower.qos.cancel-request</literal>
+          authorization if they were not the one issuing the request.
+        </para></refsect3><refsect2><title><anchor role="function" id="QoS.GetLatency"/>GetLatency ()</title><indexterm><primary>GetLatency</primary><secondary>QoS</secondary></indexterm><programlisting>GetLatency (in's'type,
+out'i'value)</programlisting></refsect2>
+          <para>
+            Get the lowest latency state on the system at the current time.
+          </para>
+        <variablelist role="params"><varlistentry><term><parameter>type</parameter>:</term><listitem><simpara>
+            The type of latency to return, <literal>cpu_dma</literal> or
+            <literal>network</literal>.
+          </simpara></listitem></varlistentry><varlistentry><term><parameter>value</parameter>:</term><listitem><simpara>
+            The value, in microseconds or kilobits per second.
+            The value <literal>-1</literal> means not set or unavailable.
+          </simpara></listitem></varlistentry></variablelist><refsect3><title>Errors</title><variablelist role="errors"><varlistentry><term><parameter>org.freedesktop.UPower.GeneralError</parameter>:</term><listitem><simpara>if an error occured while getting the latency</simpara></listitem></varlistentry></variablelist></refsect3><refsect2><title><anchor role="function" id="QoS.GetLatencyRequests"/>GetLatencyRequests ()</title><indexterm><primary>GetLatencyRequests</primary><secondary>QoS</secondary></indexterm><programlisting>GetLatencyRequests (out'a(uuusxbssi)'requests)</programlisting></refsect2>
+          <para>
+            Gets all the system requests from all services and applications.
+          </para>
+        <variablelist role="params"><varlistentry><term><parameter>requests</parameter>:</term><listitem><simpara>
+            The request lists, where each application can request different
+            latency types.
+            <para><itemizedlist><listitem><emphasis role="bold">cookie: </emphasis>
+                  The random cookie that identifies the request.
+                </listitem><listitem><emphasis role="bold">uid: </emphasis>
+                  The user ID that issued the request.
+                </listitem><listitem><emphasis role="bold">pid: </emphasis>
+                  The process ID of the application.
+                </listitem><listitem><emphasis role="bold">exec: </emphasis>
+                  The executable that issued the request.
+                </listitem><listitem><emphasis role="bold">timespec: </emphasis>
+                  The number of seconds since the epoch.
+                </listitem><listitem><emphasis role="bold">persistent: </emphasis>
+                  If the request is persistent and outlives the connection lifetime.
+                </listitem><listitem><emphasis role="bold">type: </emphasis>
+                  The type of the request, <literal>cpu_dma</literal> or
+                  <literal>network</literal>.
+                </listitem><listitem><emphasis role="bold">value: </emphasis>
+                  The value, in microseconds or kilobits per second.
+                </listitem></itemizedlist></para>
+        </simpara></listitem></varlistentry></variablelist></refsect1>
+  <refsect1 role="signals"><title role="signals.title">Signal Details</title><refsect2><title><anchor role="function" id="QoS::LatencyChanged"/>The LatencyChanged signal</title><indexterm><primary>LatencyChanged</primary><secondary>QoS</secondary></indexterm><programlisting>LatencyChanged ('s'type,
+'i'value)</programlisting></refsect2>
+          <para>
+            Some latency value has changed.
+          </para>
+        <variablelist role="params"><varlistentry><term><parameter>type</parameter>:</term><listitem><simpara>
+            The type of latency that changed, cpu_dma or
+            network.
+          </simpara></listitem></varlistentry><varlistentry><term><parameter>value</parameter>:</term><listitem><simpara>
+            The value, in microseconds or kilobits per second.
+            The value -1 means not set or unavailable.
+          </simpara></listitem></varlistentry></variablelist><refsect2><title><anchor role="function" id="QoS::RequestsChanged"/>The RequestsChanged signal</title><indexterm><primary>RequestsChanged</primary><secondary>QoS</secondary></indexterm><programlisting>RequestsChanged ()</programlisting></refsect2>
+          <para>
+            The latency requests on the system have changed.
+          </para>
+        <variablelist role="params"/></refsect1>
+</refentry>
diff --git a/doc/dbus/org.freedesktop.UPower-compat.ref.xml b/doc/dbus/org.freedesktop.UPower-compat.ref.xml
new file mode 100644
index 0000000..3d89b50
--- /dev/null
+++ b/doc/dbus/org.freedesktop.UPower-compat.ref.xml
@@ -0,0 +1,252 @@
+<?xml version="1.0"?><!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN" "http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd">
+<refentry id="UPower">
+  <refmeta>
+    <refentrytitle role="top_of_page">org.freedesktop.UPower</refentrytitle>
+  </refmeta>
+  <refnamediv>
+    <refname>org.freedesktop.UPower</refname>
+    <refpurpose>UPower interface</refpurpose>
+  </refnamediv>
+  <refsynopsisdiv role="synopsis">
+    <title role="synopsis.title">Methods</title>
+    <synopsis><link linkend="UPower.EnumerateDevices">EnumerateDevices</link>(out'ao'devices)
+<link linkend="UPower.AboutToSleep">AboutToSleep</link>(in's'action)
+<link linkend="UPower.Suspend">Suspend</link>()
+<link linkend="UPower.SuspendAllowed">SuspendAllowed</link>(out'b'allowed)
+<link linkend="UPower.Hibernate">Hibernate</link>()
+<link linkend="UPower.HibernateAllowed">HibernateAllowed</link>(out'b'allowed)
+</synopsis>
+  </refsynopsisdiv>
+  <refsect1 role="signal_proto">
+    <title role="signal_proto.title">Signals</title>
+    <synopsis><link linkend="UPower::DeviceAdded">DeviceAdded</link>('o'device)
+<link linkend="UPower::DeviceRemoved">DeviceRemoved</link>('o'device)
+<link linkend="UPower::DeviceChanged">DeviceChanged</link>('o'device)
+<link linkend="UPower::Changed">Changed</link>()
+<link linkend="UPower::Sleeping">Sleeping</link>()
+<link linkend="UPower::NotifySleep">NotifySleep</link>('s'action)
+<link linkend="UPower::Resuming">Resuming</link>()
+<link linkend="UPower::NotifyResume">NotifyResume</link>('s'action)
+</synopsis>
+  </refsect1>
+  <refsect1 role="impl_interfaces">
+    <title role="impl_interfaces.title">Implemented Interfaces</title>
+    <para>
+    Objects implementing org.freedesktop.UPower also implements
+    org.freedesktop.DBus.Introspectable,
+    org.freedesktop.DBus.Properties
+    </para>
+  </refsect1>
+  <refsect1 role="properties">
+    <title role="properties.title">Properties</title>
+    <synopsis><link linkend="UPower:DaemonVersion">'DaemonVersion'</link>read's'
+<link linkend="UPower:CanSuspend">'CanSuspend'</link>read'b'
+<link linkend="UPower:CanHibernate">'CanHibernate'</link>read'b'
+<link linkend="UPower:OnBattery">'OnBattery'</link>read'b'
+<link linkend="UPower:OnLowBattery">'OnLowBattery'</link>read'b'
+<link linkend="UPower:LidIsClosed">'LidIsClosed'</link>read'b'
+<link linkend="UPower:LidIsPresent">'LidIsPresent'</link>read'b'
+<link linkend="UPower:LidForceSleep">'LidForceSleep'</link>read'b'
+<link linkend="UPower:IsDocked">'IsDocked'</link>read'b'
+</synopsis>
+  </refsect1>
+  <refsect1 role="desc">
+    <title role="desc.title">Description</title>
+    <para>
+      
+        <para>
+          The UPower service is available via the system message
+          bus. To access the service, use
+          the <literal>org.freedesktop.UPower</literal> interface on
+          the <literal>/org/freedesktop/UPower</literal> object on
+          the D-Bus system bus service with the well-known
+          name <literal>org.freedesktop.UPower</literal>.
+        </para>
+        <para>
+          <informalexample>
+            <programlisting>
+$ dbus-send --print-reply \
+            --system \
+            --dest=org.freedesktop.UPower \
+            /org/freedesktop/UPower \
+            org.freedesktop.UPower.EnumerateDevices
+
+method return sender=:1.386 -&gt; dest=:1.451 reply_serial=2
+   array [
+      object path "/org/freedesktop/UPower/devices/line_power_AC"
+      object path "/org/freedesktop/UPower/devices/battery_BAT0"
+   ]
+            </programlisting>
+          </informalexample>
+        </para>
+      
+    </para>
+  </refsect1>
+  <refsect1 role="details"><title role="details.title">Details</title><refsect2><title><anchor role="function" id="UPower.EnumerateDevices"/>EnumerateDevices ()</title><indexterm><primary>EnumerateDevices</primary><secondary>UPower</secondary></indexterm><programlisting>EnumerateDevices (out'ao'devices)</programlisting></refsect2>
+          <para>
+            Enumerate all power objects on the system.
+          </para>
+        <variablelist role="params"><varlistentry><term><parameter>devices</parameter>:</term><listitem><simpara>An array of object paths for devices.</simpara></listitem></varlistentry></variablelist><refsect2><title><anchor role="function" id="UPower.AboutToSleep"/>AboutToSleep ()</title><indexterm><primary>AboutToSleep</primary><secondary>UPower</secondary></indexterm><programlisting>AboutToSleep (in's'action)</programlisting></refsect2>
+          <para>
+            This method tells UPower that the Suspend() or Hibernate() method
+            is about to be called.
+            This allows UPower to emit the Suspending signal whilst
+            session activities are happening that have to be done before the
+            suspend process is started.
+          </para>
+          <para>
+            This method would typically be called by the session power
+            management daemon, before it locks the screen and waits for the
+            screen to fade to black.
+            The session power management component would then call Suspend() or
+            Hibernate() when these syncronous tasks have completed.
+          </para>
+          <para>
+            If this method is not called than nothing bad will happen and
+            Suspend() or Hibernate() will block for the required second.
+          </para>
+        <variablelist role="params"><varlistentry><term><parameter>action</parameter>:</term><listitem><simpara>
+            The sleep action type, e.g. <literal>suspend</literal> or
+            <literal>hibernate</literal>.
+          </simpara></listitem></varlistentry></variablelist><refsect2><title><anchor role="function" id="UPower.Suspend"/>Suspend ()</title><indexterm><primary>Suspend</primary><secondary>UPower</secondary></indexterm><programlisting>Suspend ()</programlisting></refsect2>
+          <para>
+            Suspends the computer into a low power state.
+            System state is not preserved if the power is lost.
+          </para>
+          <para>
+            If AboutToSleep() has not been called then UPower will send
+            the Sleeping() signal and block for one second.
+          </para>
+          <para>
+            If AboutToSleep() has been called less than one second
+            before this method is called then UPower will block for the
+            remaining time to complete one second of delay.
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="UPower.SuspendAllowed"/>SuspendAllowed ()</title><indexterm><primary>SuspendAllowed</primary><secondary>UPower</secondary></indexterm><programlisting>SuspendAllowed (out'b'allowed)</programlisting></refsect2>
+          <para>
+            Check if the caller has (or can get) the PolicyKit privilege to call
+            <link linkend="Power.Suspend"><function>Suspend</function></link>.
+          </para>
+        <variablelist role="params"><varlistentry><term><parameter>allowed</parameter>:</term><listitem><simpara>TRUE if allowed, otherwise FALSE</simpara></listitem></varlistentry></variablelist><refsect2><title><anchor role="function" id="UPower.Hibernate"/>Hibernate ()</title><indexterm><primary>Hibernate</primary><secondary>UPower</secondary></indexterm><programlisting>Hibernate ()</programlisting></refsect2>
+          <para>
+            Hibernates the computer into a low power state.
+            System state is preserved if the power is lost.
+          </para>
+          <para>
+            If AboutToSleep() has not been called then UPower will send
+            the Sleeping() signal and block for one second.
+          </para>
+          <para>
+            If AboutToSleep() has been called less than one second
+            before this method is called then UPower will block for the
+            remaining time to complete one second of delay.
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="UPower.HibernateAllowed"/>HibernateAllowed ()</title><indexterm><primary>HibernateAllowed</primary><secondary>UPower</secondary></indexterm><programlisting>HibernateAllowed (out'b'allowed)</programlisting></refsect2>
+          <para>
+            Check if the caller has (or can get) the PolicyKit privilege to call
+            <link linkend="Power.Hibernate"><function>Hibernate</function></link>.
+          </para>
+        <variablelist role="params"><varlistentry><term><parameter>allowed</parameter>:</term><listitem><simpara>TRUE if allowed, otherwise FALSE</simpara></listitem></varlistentry></variablelist></refsect1>
+  <refsect1 role="signals"><title role="signals.title">Signal Details</title><refsect2><title><anchor role="function" id="UPower::DeviceAdded"/>The DeviceAdded signal</title><indexterm><primary>DeviceAdded</primary><secondary>UPower</secondary></indexterm><programlisting>DeviceAdded ('o'device)</programlisting></refsect2>
+          <para>
+            Emitted when a device is added.
+          </para>
+        <variablelist role="params"><varlistentry><term><parameter>device</parameter>:</term><listitem><simpara>Object path of device that was added.</simpara></listitem></varlistentry></variablelist><refsect2><title><anchor role="function" id="UPower::DeviceRemoved"/>The DeviceRemoved signal</title><indexterm><primary>DeviceRemoved</primary><secondary>UPower</secondary></indexterm><programlisting>DeviceRemoved ('o'device)</programlisting></refsect2>
+          <para>
+            Emitted when a device is removed.
+          </para>
+        <variablelist role="params"><varlistentry><term><parameter>device</parameter>:</term><listitem><simpara>Object path of device that was removed.</simpara></listitem></varlistentry></variablelist><refsect2><title><anchor role="function" id="UPower::DeviceChanged"/>The DeviceChanged signal</title><indexterm><primary>DeviceChanged</primary><secondary>UPower</secondary></indexterm><programlisting>DeviceChanged ('o'device)</programlisting></refsect2>
+          <para>
+            Emitted when a device changed.
+          </para>
+        <variablelist role="params"><varlistentry><term><parameter>device</parameter>:</term><listitem><simpara>Object path of device that was changed.</simpara></listitem></varlistentry></variablelist><refsect2><title><anchor role="function" id="UPower::Changed"/>The Changed signal</title><indexterm><primary>Changed</primary><secondary>UPower</secondary></indexterm><programlisting>Changed ()</programlisting></refsect2>
+          <para>
+            Emitted when one or more properties on the object changes.
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="UPower::Sleeping"/>The Sleeping signal</title><indexterm><primary>Sleeping</primary><secondary>UPower</secondary></indexterm><programlisting>Sleeping ()</programlisting></refsect2>
+          <para>
+            This signal is sent when the session is about to be suspended or
+            hibernated.
+          </para>
+          <para>
+            This signal is DEPRECATED. Use NotifySleep() instead.
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="UPower::NotifySleep"/>The NotifySleep signal</title><indexterm><primary>NotifySleep</primary><secondary>UPower</secondary></indexterm><programlisting>NotifySleep ('s'action)</programlisting></refsect2>
+          <para>
+            This signal is sent when the session is about to be suspended or
+            hibernated.
+            Session and system programs have one second to do anything required
+            before the sleep action is taken (such as sending out Avahi or
+            Jabber messages).
+          </para>
+        <variablelist role="params"><varlistentry><term><parameter>action</parameter>:</term><listitem><simpara>
+            The sleep action type, e.g. suspend,
+            hibernate or hybrid.
+          </simpara></listitem></varlistentry></variablelist><refsect2><title><anchor role="function" id="UPower::Resuming"/>The Resuming signal</title><indexterm><primary>Resuming</primary><secondary>UPower</secondary></indexterm><programlisting>Resuming ()</programlisting></refsect2>
+          <para>
+            This signal is sent when the session has just returned from
+            Suspend() or Hibernate().
+          </para>
+          <para>
+            This signal is DEPRECATED. Use NotifyResume() instead.
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="UPower::NotifyResume"/>The NotifyResume signal</title><indexterm><primary>NotifyResume</primary><secondary>UPower</secondary></indexterm><programlisting>NotifyResume ('s'action)</programlisting></refsect2>
+          <para>
+            This signal is sent when the session has just returned from
+            Suspend() or Hibernate().
+            Session and system programs can then do anything required (such as
+            sending out Avahi or Jabber messages).
+          </para>
+        <variablelist role="params"><varlistentry><term><parameter>action</parameter>:</term><listitem><simpara>
+            The sleep action type, e.g. suspend,
+            hibernate or hybrid.
+          </simpara></listitem></varlistentry></variablelist></refsect1>
+  <refsect1 role="property_details"><title role="property_details.title">Property Details</title><refsect2><title><anchor role="function" id="UPower:DaemonVersion"/>The "DaemonVersion" property</title><indexterm><primary>DaemonVersion</primary><secondary>UPower</secondary></indexterm><programlisting>'DaemonVersion'read's'
+</programlisting></refsect2><para>
+            Version of the running daemon, e.g. <literal>002</literal>.
+      </para><variablelist role="params"/><refsect2><title><anchor role="function" id="UPower:CanSuspend"/>The "CanSuspend" property</title><indexterm><primary>CanSuspend</primary><secondary>UPower</secondary></indexterm><programlisting>'CanSuspend'read'b'
+</programlisting></refsect2><para>
+            Whether the system is able to suspend.
+      </para><variablelist role="params"/><refsect2><title><anchor role="function" id="UPower:CanHibernate"/>The "CanHibernate" property</title><indexterm><primary>CanHibernate</primary><secondary>UPower</secondary></indexterm><programlisting>'CanHibernate'read'b'
+</programlisting></refsect2><para>
+            Whether the system is able to hibernate.
+      </para><variablelist role="params"/><refsect2><title><anchor role="function" id="UPower:OnBattery"/>The "OnBattery" property</title><indexterm><primary>OnBattery</primary><secondary>UPower</secondary></indexterm><programlisting>'OnBattery'read'b'
+</programlisting></refsect2><para>
+            Indicates whether the system is running on battery power.
+            This property is provided for convenience.
+      </para><variablelist role="params"/><refsect2><title><anchor role="function" id="UPower:OnLowBattery"/>The "OnLowBattery" property</title><indexterm><primary>OnLowBattery</primary><secondary>UPower</secondary></indexterm><programlisting>'OnLowBattery'read'b'
+</programlisting></refsect2><para>
+            Indicates whether the system is running on battery power and if the battery is critically low.
+            This property is provided for convenience.
+      </para><variablelist role="params"/><refsect2><title><anchor role="function" id="UPower:LidIsClosed"/>The "LidIsClosed" property</title><indexterm><primary>LidIsClosed</primary><secondary>UPower</secondary></indexterm><programlisting>'LidIsClosed'read'b'
+</programlisting></refsect2>
+          <para>
+            Indicates if the laptop lid is closed where the display cannot be seen.
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="UPower:LidIsPresent"/>The "LidIsPresent" property</title><indexterm><primary>LidIsPresent</primary><secondary>UPower</secondary></indexterm><programlisting>'LidIsPresent'read'b'
+</programlisting></refsect2>
+          <para>
+            If the system has a lid device.
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="UPower:LidForceSleep"/>The "LidForceSleep" property</title><indexterm><primary>LidForceSleep</primary><secondary>UPower</secondary></indexterm><programlisting>'LidForceSleep'read'b'
+</programlisting></refsect2>
+          <para>
+            If the system really has to sleep when the lid is closed.
+            Some laptops actually melt (!) if the lid is closed and the
+            computer keeps running. We blacklist those, and do something
+            sane for the other machines.
+          </para>
+          <para>
+            This allows us to set the default session policy to not
+            suspend on lid close if the laptop is docked, and be sure
+            the machine is not going to melt.
+          </para>
+        <variablelist role="params"/><refsect2><title><anchor role="function" id="UPower:IsDocked"/>The "IsDocked" property</title><indexterm><primary>IsDocked</primary><secondary>UPower</secondary></indexterm><programlisting>'IsDocked'read'b'
+</programlisting></refsect2>
+          <para>
+            If the system is currently docked.
+            Note: the "is-docked" value is the result of a heuristic,
+            which may involve testing the display output.
+          </para>
+        <variablelist role="params"/></refsect1>
+</refentry>
diff --git a/doc/dbus/org.freedesktop.UPower.Device.ref.xml b/doc/dbus/org.freedesktop.UPower.Device.ref.xml
deleted file mode 100644
index 9d76315..0000000
--- a/doc/dbus/org.freedesktop.UPower.Device.ref.xml
+++ /dev/null
@@ -1,498 +0,0 @@
-<?xml version="1.0"?><!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN" "http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd">
-<refentry id="Device">
-  <refmeta>
-    <refentrytitle role="top_of_page">org.freedesktop.UPower.Device</refentrytitle>
-  </refmeta>
-  <refnamediv>
-    <refname>org.freedesktop.UPower.Device</refname>
-    <refpurpose>Device interface</refpurpose>
-  </refnamediv>
-  <refsynopsisdiv role="synopsis">
-    <title role="synopsis.title">Methods</title>
-    <synopsis><link linkend="Device.Refresh">Refresh</link>()
-<link linkend="Device.GetHistory">GetHistory</link>(in's'type,
-in'u'timespan,
-in'u'resolution,
-out'a(udu)'data)
-<link linkend="Device.GetStatistics">GetStatistics</link>(in's'type,
-out'a(dd)'data)
-</synopsis>
-  </refsynopsisdiv>
-  <refsect1 role="signal_proto">
-    <title role="signal_proto.title">Signals</title>
-    <synopsis><link linkend="Device::Changed">Changed</link>()
-</synopsis>
-  </refsect1>
-  <refsect1 role="impl_interfaces">
-    <title role="impl_interfaces.title">Implemented Interfaces</title>
-    <para>
-    Objects implementing org.freedesktop.UPower.Device also implements
-    org.freedesktop.DBus.Introspectable,
-    org.freedesktop.DBus.Properties
-    </para>
-  </refsect1>
-  <refsect1 role="properties">
-    <title role="properties.title">Properties</title>
-    <synopsis><link linkend="Device:NativePath">'NativePath'</link>read's'
-<link linkend="Device:Vendor">'Vendor'</link>read's'
-<link linkend="Device:Model">'Model'</link>read's'
-<link linkend="Device:Serial">'Serial'</link>read's'
-<link linkend="Device:UpdateTime">'UpdateTime'</link>read't'
-<link linkend="Device:Type">'Type'</link>read'u'
-<link linkend="Device:PowerSupply">'PowerSupply'</link>read'b'
-<link linkend="Device:HasHistory">'HasHistory'</link>read'b'
-<link linkend="Device:HasStatistics">'HasStatistics'</link>read'b'
-<link linkend="Device:Online">'Online'</link>read'b'
-<link linkend="Device:Energy">'Energy'</link>read'd'
-<link linkend="Device:EnergyEmpty">'EnergyEmpty'</link>read'd'
-<link linkend="Device:EnergyFull">'EnergyFull'</link>read'd'
-<link linkend="Device:EnergyFullDesign">'EnergyFullDesign'</link>read'd'
-<link linkend="Device:EnergyRate">'EnergyRate'</link>read'd'
-<link linkend="Device:Voltage">'Voltage'</link>read'd'
-<link linkend="Device:Luminosity">'Luminosity'</link>read'd'
-<link linkend="Device:TimeToEmpty">'TimeToEmpty'</link>read'x'
-<link linkend="Device:TimeToFull">'TimeToFull'</link>read'x'
-<link linkend="Device:Percentage">'Percentage'</link>read'd'
-<link linkend="Device:Temperature">'Temperature'</link>read'd'
-<link linkend="Device:IsPresent">'IsPresent'</link>read'b'
-<link linkend="Device:State">'State'</link>read'u'
-<link linkend="Device:IsRechargeable">'IsRechargeable'</link>read'b'
-<link linkend="Device:Capacity">'Capacity'</link>read'd'
-<link linkend="Device:Technology">'Technology'</link>read'u'
-<link linkend="Device:RecallNotice">'RecallNotice'</link>read'b'
-<link linkend="Device:RecallVendor">'RecallVendor'</link>read's'
-<link linkend="Device:RecallUrl">'RecallUrl'</link>read's'
-</synopsis>
-  </refsect1>
-  <refsect1 role="desc">
-    <title role="desc.title">Description</title>
-    <para>
-      
-        <para>
-          Objects implementing this interface are usually discovered through
-          the <literal>org.freedesktop.UPower</literal> interface on
-          the <literal>/org/freedesktop/UPower</literal> object on
-          the D-Bus system bus service with the well-known
-          name <literal>org.freedesktop.UPower</literal> using
-          the
-          <link linkend="Power.EnumerateDevices"><function>EnumerateDevices</function></link>
-          method.
-        </para>
-        <para>
-          <informalexample>
-            <programlisting>
-$ dbus-send --print-reply \
-            --system \
-            --dest=org.freedesktop.UPower \
-            /org/freedesktop/UPower/devices/battery_BAT0 \
-            org.freedesktop.DBus.Properties.GetAll \
-            string:org.freedesktop.UPower.Device
-
-method return sender=:1.386 -&gt; dest=:1.477 reply_serial=2
-   array [
-      dict entry(
-         string "native-path"
-         variant             string "/sys/devices/LNXSYSTM:00/device:00/PNP0A08:00/device:01/PNP0C09:00/PNP0C0A:00/power_supply/BAT0"
-      )
-      dict entry(
-         string "vendor"
-         variant             string "SONY"
-      )
-      dict entry(
-         string "model"
-         variant             string "42T4568"
-      )
-      dict entry(
-         string "serial"
-         variant             string "4179"
-      )
-      dict entry(
-         string "update-time"
-         variant             uint64 1226417875
-      )
-      dict entry(
-         string "type"
-         variant             uint 2
-      )
-      dict entry(
-         string "power-supply"
-         variant             boolean true
-      )
-      dict entry(
-         string "has-history"
-         variant             boolean true
-      )
-      dict entry(
-         string "has-statistics"
-         variant             boolean true
-      )
-      dict entry(
-         string "online"
-         variant             boolean false
-      )
-      dict entry(
-         string "energy"
-         variant             double 72.85
-      )
-      dict entry(
-         string "energy-empty"
-         variant             double 0
-      )
-      dict entry(
-         string "energy-full"
-         variant             double 74.55
-      )
-      dict entry(
-         string "energy-full-design"
-         variant             double 74.88
-      )
-      dict entry(
-         string "energy-rate"
-         variant             double 0
-      )
-      dict entry(
-         string "voltage"
-         variant             double 16.415
-      )
-      dict entry(
-         string "time-to-empty"
-         variant             int64 0
-      )
-      dict entry(
-         string "time-to-full"
-         variant             int64 0
-      )
-      dict entry(
-         string "percentage"
-         variant             double 97.7197
-      )
-      dict entry(
-         string "is-present"
-         variant             boolean true
-      )
-      dict entry(
-         string "state"
-         variant             uint 3
-      )
-      dict entry(
-         string "is-rechargeable"
-         variant             boolean true
-      )
-      dict entry(
-         string "capacity"
-         variant             double 100
-      )
-      dict entry(
-         string "technology"
-         variant             uint 1
-      )
-   ]
-            </programlisting>
-          </informalexample>
-        </para>
-        <para>
-          Unless otherwise noted, an empty string or the value 0 in a
-          property on this interface means not set.
-        </para>
-      
-    </para>
-  </refsect1>
-  <refsect1 role="details"><title role="details.title">Details</title><refsect2><title><anchor role="function" id="Device.Refresh"/>Refresh ()</title><indexterm><primary>Refresh</primary><secondary>Device</secondary></indexterm><programlisting>Refresh ()</programlisting></refsect2>
-          <para>
-            Refreshes the data collected from the power source.
-          </para>
-        <variablelist role="params"/><refsect3><title>Errors</title><variablelist role="errors"><varlistentry><term><parameter>org.freedesktop.UPower.Device.GeneralError</parameter>:</term><listitem><simpara>if an error occured while refreshing</simpara></listitem></varlistentry></variablelist></refsect3><refsect3><title>Permissions</title><para role="permission">Callers need the org.freedesktop.upower.refresh-power-source authorization</para></refsect3><refsect2><title><anchor role="function" id="Device.GetHistory"/>GetHistory ()</title><indexterm><primary>GetHistory</primary><secondary>Device</secondary></indexterm><programlisting>GetHistory (in's'type,
-in'u'timespan,
-in'u'resolution,
-out'a(udu)'data)</programlisting></refsect2>
-          <para>
-            Gets history for the power device that is persistent across reboots.
-          </para>
-        <variablelist role="params"><varlistentry><term><parameter>type</parameter>:</term><listitem><simpara>The type of history.
-        Valid types are <literal>rate</literal> or <literal>charge</literal>.</simpara></listitem></varlistentry><varlistentry><term><parameter>timespan</parameter>:</term><listitem><simpara>The amount of data to return in seconds, or 0 for all.</simpara></listitem></varlistentry><varlistentry><term><parameter>resolution</parameter>:</term><listitem><simpara>
-            The approximate number of points to return.
-            A higher resolution is more accurate, at the expense of plotting speed.
-          </simpara></listitem></varlistentry><varlistentry><term><parameter>data</parameter>:</term><listitem><simpara>
-            The history data for the power device, if the device supports history.
-            Data is ordered from the earliest in time, to the newest data point.
-            Each element contains the following members:
-            <para><itemizedlist><listitem><emphasis role="bold">time: </emphasis>
-                  The time value in seconds from the <literal>gettimeofday()</literal> method.
-                </listitem><listitem><emphasis role="bold">value: </emphasis>
-                  The data value, for instance the rate in W or the charge in %.
-                </listitem><listitem><emphasis role="bold">state: </emphasis>
-                  The state of the device, for instance <literal>charging</literal> or
-                  <literal>discharging</literal>.
-                </listitem></itemizedlist></para>
-        </simpara></listitem></varlistentry></variablelist><refsect2><title><anchor role="function" id="Device.GetStatistics"/>GetStatistics ()</title><indexterm><primary>GetStatistics</primary><secondary>Device</secondary></indexterm><programlisting>GetStatistics (in's'type,
-out'a(dd)'data)</programlisting></refsect2>
-          <para>
-            Gets statistics for the power device that may be interesting
-            to show on a graph in the session.
-          </para>
-        <variablelist role="params"><varlistentry><term><parameter>type</parameter>:</term><listitem><simpara>The mode for the statistics.
-        Valid types are <literal>charging</literal> or <literal>discharging</literal>.</simpara></listitem></varlistentry><varlistentry><term><parameter>data</parameter>:</term><listitem><simpara>
-            The statistics data for the power device.
-            Each element contains the following members:
-            <para><itemizedlist><listitem><emphasis role="bold">value: </emphasis>
-                  The value of the percentage point, usually in seconds
-                </listitem><listitem><emphasis role="bold">accuracy: </emphasis>
-                  The accuracy of the prediction in percent.
-                </listitem></itemizedlist></para>
-        </simpara></listitem></varlistentry></variablelist></refsect1>
-  <refsect1 role="signals"><title role="signals.title">Signal Details</title><refsect2><title><anchor role="function" id="Device::Changed"/>The Changed signal</title><indexterm><primary>Changed</primary><secondary>Device</secondary></indexterm><programlisting>Changed ()</programlisting></refsect2>
-          <para>
-            Some value on the power source changed.
-          </para>
-        <variablelist role="params"/></refsect1>
-  <refsect1 role="property_details"><title role="property_details.title">Property Details</title><refsect2><title><anchor role="function" id="Device:NativePath"/>The "NativePath" property</title><indexterm><primary>NativePath</primary><secondary>Device</secondary></indexterm><programlisting>'NativePath'read's'
-</programlisting></refsect2>
-          <para>
-            OS specific native path of the power source. On Linux this
-            is the sysfs path, for
-            example <literal>/sys/devices/LNXSYSTM:00/device:00/PNP0C0A:00/power_supply/BAT0</literal>. Is
-            blank if the device is being driven by a user space
-            driver.
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:Vendor"/>The "Vendor" property</title><indexterm><primary>Vendor</primary><secondary>Device</secondary></indexterm><programlisting>'Vendor'read's'
-</programlisting></refsect2>
-          <para>
-            Name of the vendor of the battery.
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:Model"/>The "Model" property</title><indexterm><primary>Model</primary><secondary>Device</secondary></indexterm><programlisting>'Model'read's'
-</programlisting></refsect2>
-          <para>
-            Name of the model of this battery.
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:Serial"/>The "Serial" property</title><indexterm><primary>Serial</primary><secondary>Device</secondary></indexterm><programlisting>'Serial'read's'
-</programlisting></refsect2>
-          <para>
-            Unique serial number of the battery.
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:UpdateTime"/>The "UpdateTime" property</title><indexterm><primary>UpdateTime</primary><secondary>Device</secondary></indexterm><programlisting>'UpdateTime'read't'
-</programlisting></refsect2>
-          <para>
-            The point in time (seconds since the Epoch Jan 1, 1970
-            0:00 UTC) that data was read from the power source.
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:Type"/>The "Type" property</title><indexterm><primary>Type</primary><secondary>Device</secondary></indexterm><programlisting>'Type'read'u'
-</programlisting></refsect2>
-          <para>
-            Type of power source.
-          </para>
-          <para><itemizedlist><listitem><emphasis role="bold">0: </emphasis>Unknown</listitem><listitem><emphasis role="bold">1: </emphasis>Line Power</listitem><listitem><emphasis role="bold">2: </emphasis>Battery</listitem><listitem><emphasis role="bold">3: </emphasis>Ups</listitem><listitem><emphasis role="bold">4: </emphasis>Monitor</listitem><listitem><emphasis role="bold">5: </emphasis>Mouse</listitem><listitem><emphasis role="bold">6: </emphasis>Keyboard</listitem><listitem><emphasis role="bold">7: </emphasis>Pda</listitem><listitem><emphasis role="bold">8: </emphasis>Phone</listitem></itemizedlist></para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:PowerSupply"/>The "PowerSupply" property</title><indexterm><primary>PowerSupply</primary><secondary>Device</secondary></indexterm><programlisting>'PowerSupply'read'b'
-</programlisting></refsect2>
-          <para>
-            If the power device is used to supply the system.
-            This would be set TRUE for laptop batteries and UPS devices,
-            but set FALSE for wireless mice or PDAs.
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:HasHistory"/>The "HasHistory" property</title><indexterm><primary>HasHistory</primary><secondary>Device</secondary></indexterm><programlisting>'HasHistory'read'b'
-</programlisting></refsect2>
-          <para>
-            If the power device has history.
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:HasStatistics"/>The "HasStatistics" property</title><indexterm><primary>HasStatistics</primary><secondary>Device</secondary></indexterm><programlisting>'HasStatistics'read'b'
-</programlisting></refsect2>
-          <para>
-            If the power device has statistics.
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:Online"/>The "Online" property</title><indexterm><primary>Online</primary><secondary>Device</secondary></indexterm><programlisting>'Online'read'b'
-</programlisting></refsect2>
-          <para>
-            Whether power is currently being provided through line power.
-            This property is only valid if the property
-            <link linkend="Source:Type"><literal>type</literal></link>
-            has the value "line-power".
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:Energy"/>The "Energy" property</title><indexterm><primary>Energy</primary><secondary>Device</secondary></indexterm><programlisting>'Energy'read'd'
-</programlisting></refsect2>
-          <para>
-            Amount of energy (measured in Wh) currently available in
-            the power source.
-          </para><para>
-            This property is only valid if the property
-            <link linkend="Source:Type"><literal>type</literal></link>
-            has the value "battery".
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:EnergyEmpty"/>The "EnergyEmpty" property</title><indexterm><primary>EnergyEmpty</primary><secondary>Device</secondary></indexterm><programlisting>'EnergyEmpty'read'd'
-</programlisting></refsect2>
-          <para>
-            Amount of energy (measured in Wh) in the power source when
-            it's considered to be empty.
-          </para><para>
-            This property is only valid if the property
-            <link linkend="Source:Type"><literal>type</literal></link>
-            has the value "battery".
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:EnergyFull"/>The "EnergyFull" property</title><indexterm><primary>EnergyFull</primary><secondary>Device</secondary></indexterm><programlisting>'EnergyFull'read'd'
-</programlisting></refsect2>
-          <para>
-            Amount of energy (measured in Wh) in the power source when
-            it's considered full.
-          </para><para>
-            This property is only valid if the property
-            <link linkend="Source:Type"><literal>type</literal></link>
-            has the value "battery".
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:EnergyFullDesign"/>The "EnergyFullDesign" property</title><indexterm><primary>EnergyFullDesign</primary><secondary>Device</secondary></indexterm><programlisting>'EnergyFullDesign'read'd'
-</programlisting></refsect2>
-          <para>
-            Amount of energy (measured in Wh) the power source is
-            designed to hold when it's considered full.
-          </para><para>
-            This property is only valid if the property
-            <link linkend="Source:Type"><literal>type</literal></link>
-            has the value "battery".
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:EnergyRate"/>The "EnergyRate" property</title><indexterm><primary>EnergyRate</primary><secondary>Device</secondary></indexterm><programlisting>'EnergyRate'read'd'
-</programlisting></refsect2>
-          <para>
-            Amount of energy being drained from the source, measured
-            in W. If positive, the source is being discharged, if
-            negative it's being charged.
-          </para><para>
-            This property is only valid if the property
-            <link linkend="Source:Type"><literal>type</literal></link>
-            has the value "battery".
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:Voltage"/>The "Voltage" property</title><indexterm><primary>Voltage</primary><secondary>Device</secondary></indexterm><programlisting>'Voltage'read'd'
-</programlisting></refsect2>
-          <para>
-            Voltage in the Cell or being recorded by the meter.
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:Luminosity"/>The "Luminosity" property</title><indexterm><primary>Luminosity</primary><secondary>Device</secondary></indexterm><programlisting>'Luminosity'read'd'
-</programlisting></refsect2>
-          <para>
-            Luminosity being recorded by the meter.
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:TimeToEmpty"/>The "TimeToEmpty" property</title><indexterm><primary>TimeToEmpty</primary><secondary>Device</secondary></indexterm><programlisting>'TimeToEmpty'read'x'
-</programlisting></refsect2>
-          <para>
-            Number of seconds until the power source is considered empty.
-            Is set to 0 if unknown.
-          </para><para>
-            This property is only valid if the property
-            <link linkend="Source:Type"><literal>type</literal></link>
-            has the value "battery".
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:TimeToFull"/>The "TimeToFull" property</title><indexterm><primary>TimeToFull</primary><secondary>Device</secondary></indexterm><programlisting>'TimeToFull'read'x'
-</programlisting></refsect2>
-          <para>
-            Number of seconds until the power source is considered full.
-            Is set to 0 if unknown.
-          </para><para>
-            This property is only valid if the property
-            <link linkend="Source:Type"><literal>type</literal></link>
-            has the value "battery".
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:Percentage"/>The "Percentage" property</title><indexterm><primary>Percentage</primary><secondary>Device</secondary></indexterm><programlisting>'Percentage'read'd'
-</programlisting></refsect2>
-          <para>
-            The amount of energy left in the power source expressed as
-            a percentage between 0 and 100. Typically this is the same as
-            (<link linkend="Source:Energy"><literal>energy</literal></link> -
-            <link linkend="Source:EnergyEmpty"><literal>energy-empty</literal></link>) /
-            (<link linkend="Source:EnergyFull"><literal>energy-full</literal></link> -
-            <link linkend="Source:EnergyEmpty"><literal>energy-empty</literal></link>).
-            However, some primitive power sources are capable of only
-            reporting percentages and in this case the energy-*
-            properties will be unset while this property is set.
-          </para><para>
-            This property is only valid if the property
-            <link linkend="Source:Type"><literal>type</literal></link>
-            has the value "battery".
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:Temperature"/>The "Temperature" property</title><indexterm><primary>Temperature</primary><secondary>Device</secondary></indexterm><programlisting>'Temperature'read'd'
-</programlisting></refsect2>
-          <para>
-            The temperature of the device in degrees Celsius. This property is
-            only valid if the property
-            <link linkend="Source:Type"><literal>type</literal></link>
-            has the value "battery".
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:IsPresent"/>The "IsPresent" property</title><indexterm><primary>IsPresent</primary><secondary>Device</secondary></indexterm><programlisting>'IsPresent'read'b'
-</programlisting></refsect2>
-          <para>
-            If the power source is present in the bay.
-            This field is required as some batteries are hot-removable, for example
-            expensive UPS and most laptop batteries.
-          </para><para>
-            This property is only valid if the property
-            <link linkend="Source:Type"><literal>type</literal></link>
-            has the value "battery".
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:State"/>The "State" property</title><indexterm><primary>State</primary><secondary>Device</secondary></indexterm><programlisting>'State'read'u'
-</programlisting></refsect2>
-          <para>
-            The battery power state.
-          </para>
-          <para><itemizedlist><listitem><emphasis role="bold">0: </emphasis>Unknown</listitem><listitem><emphasis role="bold">1: </emphasis>Charging</listitem><listitem><emphasis role="bold">2: </emphasis>Discharging</listitem><listitem><emphasis role="bold">3: </emphasis>Empty</listitem><listitem><emphasis role="bold">4: </emphasis>Fully charged</listitem><listitem><emphasis role="bold">5: </emphasis>Pending charge</listitem><listitem><emphasis role="bold">6: </emphasis>Pending discharge</listitem></itemizedlist></para>
-          <para>
-            This property is only valid if the property
-            <link linkend="Source:Type"><literal>type</literal></link>
-            has the value "battery".
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:IsRechargeable"/>The "IsRechargeable" property</title><indexterm><primary>IsRechargeable</primary><secondary>Device</secondary></indexterm><programlisting>'IsRechargeable'read'b'
-</programlisting></refsect2>
-          <para>
-            If the power source is rechargeable.
-          </para><para>
-            This property is only valid if the property
-            <link linkend="Source:Type"><literal>type</literal></link>
-            has the value "battery".
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:Capacity"/>The "Capacity" property</title><indexterm><primary>Capacity</primary><secondary>Device</secondary></indexterm><programlisting>'Capacity'read'd'
-</programlisting></refsect2>
-          <para>
-            The capacity of the power source expressed as a percentage between 0 and 100.
-            The capacity of the battery will reduce with age.
-            A capacity value less than 75% is usually a sign that you should renew your battery.
-            Typically this value is the same as
-            (<link linkend="Source:FullDesign"><literal>full-design</literal></link> /
-            <link linkend="Source:Full"><literal>full</literal></link>) * 100.
-            However, some primitive power sources are not capable reporting capacity
-            and in this case the capacity property will be unset.
-          </para><para>
-            This property is only valid if the property
-            <link linkend="Source:Type"><literal>type</literal></link>
-            has the value "battery".
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:Technology"/>The "Technology" property</title><indexterm><primary>Technology</primary><secondary>Device</secondary></indexterm><programlisting>'Technology'read'u'
-</programlisting></refsect2>
-          <para>
-            Technology used in the battery:
-          </para>
-          <para><itemizedlist><listitem><emphasis role="bold">0: </emphasis>Unknown</listitem><listitem><emphasis role="bold">1: </emphasis>Lithium ion</listitem><listitem><emphasis role="bold">2: </emphasis>Lithium polymer</listitem><listitem><emphasis role="bold">3: </emphasis>Lithium iron phosphate</listitem><listitem><emphasis role="bold">4: </emphasis>Lead acid</listitem><listitem><emphasis role="bold">5: </emphasis>Nickel cadmium</listitem><listitem><emphasis role="bold">6: </emphasis>Nickel metal hydride</listitem></itemizedlist></para>
-          <para>
-            This property is only valid if the property
-            <link linkend="Source:Type"><literal>type</literal></link>
-            has the value "battery".
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:RecallNotice"/>The "RecallNotice" property</title><indexterm><primary>RecallNotice</primary><secondary>Device</secondary></indexterm><programlisting>'RecallNotice'read'b'
-</programlisting></refsect2>
-          <para>
-            If the device may have been recalled by the vendor due to a suspected
-            fault.
-            This key does not imply the device is faulty, only that it approximatly
-            matches the description from the vendor of units that were recalled.
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:RecallVendor"/>The "RecallVendor" property</title><indexterm><primary>RecallVendor</primary><secondary>Device</secondary></indexterm><programlisting>'RecallVendor'read's'
-</programlisting></refsect2>
-          <para>
-            The vendor that is handling the hardware recall.
-          </para>
-          <para>
-            This property is only valid if the property recall-notice is true.
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="Device:RecallUrl"/>The "RecallUrl" property</title><indexterm><primary>RecallUrl</primary><secondary>Device</secondary></indexterm><programlisting>'RecallUrl'read's'
-</programlisting></refsect2>
-          <para>
-            The URL to visit about the hardware recall.
-          </para>
-          <para>
-            This property is only valid if the property recall-notice is true.
-          </para>
-        <variablelist role="params"/></refsect1>
-</refentry>
diff --git a/doc/dbus/org.freedesktop.UPower.KbdBacklight.ref.xml b/doc/dbus/org.freedesktop.UPower.KbdBacklight.ref.xml
deleted file mode 100644
index 80637f9..0000000
--- a/doc/dbus/org.freedesktop.UPower.KbdBacklight.ref.xml
+++ /dev/null
@@ -1,68 +0,0 @@
-<?xml version="1.0"?><!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN" "http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd">
-<refentry id="KbdBacklight">
-  <refmeta>
-    <refentrytitle role="top_of_page">org.freedesktop.UPower.KbdBacklight</refentrytitle>
-  </refmeta>
-  <refnamediv>
-    <refname>org.freedesktop.UPower.KbdBacklight</refname>
-    <refpurpose>KbdBacklight interface</refpurpose>
-  </refnamediv>
-  <refsynopsisdiv role="synopsis">
-    <title role="synopsis.title">Methods</title>
-    <synopsis><link linkend="KbdBacklight.GetMaxBrightness">GetMaxBrightness</link>(out'i'value)
-<link linkend="KbdBacklight.GetBrightness">GetBrightness</link>(out'i'value)
-<link linkend="KbdBacklight.SetBrightness">SetBrightness</link>(in'i'value)
-</synopsis>
-  </refsynopsisdiv>
-  <refsect1 role="signal_proto">
-    <title role="signal_proto.title">Signals</title>
-    <synopsis><link linkend="KbdBacklight::BrightnessChanged">BrightnessChanged</link>('i'value)
-</synopsis>
-  </refsect1>
-  <refsect1 role="impl_interfaces">
-    <title role="impl_interfaces.title">Implemented Interfaces</title>
-    <para>
-    Objects implementing org.freedesktop.UPower.KbdBacklight also implements
-    org.freedesktop.DBus.Introspectable,
-    org.freedesktop.DBus.Properties
-    </para>
-  </refsect1>
-  <refsect1 role="desc">
-    <title role="desc.title">Description</title>
-    <para>
-      
-        <para>
-          org.freedesktop.UPower.KbdBacklight is a DBus interface implemented
-          by UPower.
-	  It allows the keyboard backlight (if present) to be controlled.
-        </para>
-      
-    </para>
-  </refsect1>
-  <refsect1 role="details"><title role="details.title">Details</title><refsect2><title><anchor role="function" id="KbdBacklight.GetMaxBrightness"/>GetMaxBrightness ()</title><indexterm><primary>GetMaxBrightness</primary><secondary>KbdBacklight</secondary></indexterm><programlisting>GetMaxBrightness (out'i'value)</programlisting></refsect2>
-          <para>
-            Get the maximum brightness level for the keyboard backlight.
-          </para>
-        <variablelist role="params"><varlistentry><term><parameter>value</parameter>:</term><listitem><simpara>
-            The maximum value of the keyboard backlight brightness.
-          </simpara></listitem></varlistentry></variablelist><refsect3><title>Errors</title><variablelist role="errors"><varlistentry><term><parameter>org.freedesktop.UPower.GeneralError</parameter>:</term><listitem><simpara>if an error occured while getting the maximum brightness</simpara></listitem></varlistentry></variablelist></refsect3><refsect2><title><anchor role="function" id="KbdBacklight.GetBrightness"/>GetBrightness ()</title><indexterm><primary>GetBrightness</primary><secondary>KbdBacklight</secondary></indexterm><programlisting>GetBrightness (out'i'value)</programlisting></refsect2>
-          <para>
-            Get the brightness level of the keyboard backlight.
-          </para>
-        <variablelist role="params"><varlistentry><term><parameter>value</parameter>:</term><listitem><simpara>
-            The current value of the keyboard backlight brightness.
-          </simpara></listitem></varlistentry></variablelist><refsect3><title>Errors</title><variablelist role="errors"><varlistentry><term><parameter>org.freedesktop.UPower.GeneralError</parameter>:</term><listitem><simpara>if an error occured while getting the brightness</simpara></listitem></varlistentry></variablelist></refsect3><refsect2><title><anchor role="function" id="KbdBacklight.SetBrightness"/>SetBrightness ()</title><indexterm><primary>SetBrightness</primary><secondary>KbdBacklight</secondary></indexterm><programlisting>SetBrightness (in'i'value)</programlisting></refsect2>
-          <para>
-            Set the brightness level of the keyboard backlight.
-          </para>
-        <variablelist role="params"><varlistentry><term><parameter>value</parameter>:</term><listitem><simpara>
-            The value to set the KbdBacklight brightness.
-          </simpara></listitem></varlistentry></variablelist><refsect3><title>Errors</title><variablelist role="errors"><varlistentry><term><parameter>org.freedesktop.UPower.GeneralError</parameter>:</term><listitem><simpara>if an error occured while setting the brightness</simpara></listitem></varlistentry></variablelist></refsect3></refsect1>
-  <refsect1 role="signals"><title role="signals.title">Signal Details</title><refsect2><title><anchor role="function" id="KbdBacklight::BrightnessChanged"/>The BrightnessChanged signal</title><indexterm><primary>BrightnessChanged</primary><secondary>KbdBacklight</secondary></indexterm><programlisting>BrightnessChanged ('i'value)</programlisting></refsect2>
-          <para>
-	    The keyboard backlight brightness level has changed.
-          </para>
-        <variablelist role="params"><varlistentry><term><parameter>value</parameter>:</term><listitem><simpara>
-            The new brightness value of the keyboard backlight.
-          </simpara></listitem></varlistentry></variablelist></refsect1>
-</refentry>
diff --git a/doc/dbus/org.freedesktop.UPower.QoS.ref.xml b/doc/dbus/org.freedesktop.UPower.QoS.ref.xml
deleted file mode 100644
index 93908ab..0000000
--- a/doc/dbus/org.freedesktop.UPower.QoS.ref.xml
+++ /dev/null
@@ -1,211 +0,0 @@
-<?xml version="1.0"?><!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN" "http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd">
-<refentry id="QoS">
-  <refmeta>
-    <refentrytitle role="top_of_page">org.freedesktop.UPower.QoS</refentrytitle>
-  </refmeta>
-  <refnamediv>
-    <refname>org.freedesktop.UPower.QoS</refname>
-    <refpurpose>QoS interface</refpurpose>
-  </refnamediv>
-  <refsynopsisdiv role="synopsis">
-    <title role="synopsis.title">Methods</title>
-    <synopsis><link linkend="QoS.SetMinimumLatency">SetMinimumLatency</link>(in's'type,
-in'i'value)
-<link linkend="QoS.RequestLatency">RequestLatency</link>(in's'type,
-in'i'value,
-in'b'persistent,
-out'u'cookie)
-<link linkend="QoS.CancelRequest">CancelRequest</link>(in'u'cookie)
-<link linkend="QoS.GetLatency">GetLatency</link>(in's'type,
-out'i'value)
-<link linkend="QoS.GetLatencyRequests">GetLatencyRequests</link>(out'a(uuusxbssi)'requests)
-</synopsis>
-  </refsynopsisdiv>
-  <refsect1 role="signal_proto">
-    <title role="signal_proto.title">Signals</title>
-    <synopsis><link linkend="QoS::LatencyChanged">LatencyChanged</link>('s'type,
-'i'value)
-<link linkend="QoS::RequestsChanged">RequestsChanged</link>()
-</synopsis>
-  </refsect1>
-  <refsect1 role="impl_interfaces">
-    <title role="impl_interfaces.title">Implemented Interfaces</title>
-    <para>
-    Objects implementing org.freedesktop.UPower.QoS also implements
-    org.freedesktop.DBus.Introspectable,
-    org.freedesktop.DBus.Properties
-    </para>
-  </refsect1>
-  <refsect1 role="desc">
-    <title role="desc.title">Description</title>
-    <para>
-      
-        <para>
-          org.freedesktop.UPower.QoS is a DBus interface implemented
-          by UPower.
-          It allows applications to request latencies, for example a couple of seconds
-          for an IM application, or a few hundred microseconds for a multiplayer game.
-        </para>
-        <para>
-          Use cases:
-        </para>
-        
-          
-            <para>
-              I want my IM application to request 0.5s latency for messages.
-            </para>
-            <para>
-              I'm running an OpenGL simulation and want maximum performance,
-              even when on battery power.
-            </para>
-            <para>
-              I'm running an SQL server for a credit card company, and want the
-              server to request low latency CPU and network as any delay costs money.
-            </para>
-            <para>
-              I'm an admin, and want to change the power consumption vs. latency
-              from cron scripts so it uses high latency during the night for
-              maximum power saving, and low latency during business hours.
-            </para>
-            <para>
-              I want high throughput when copying files, but want low throughput
-              for downloading updates in the background.
-            </para>
-            <para>
-              I want my power manager to set all latencies to lowest when on
-              AC power.
-            </para>
-            <para>
-              I don't want my users messing with latency settings.
-            </para>
-            <para>
-              I'm and admin and I want to be able to override all latency
-              settings on my machines.
-            </para>
-          
-        
-        <para>
-          Why don't applications use the PMQoS interface directly?
-          By providing a framework we can override requests by policy, and also
-          control requests from random services.
-          You also can't set latencies unless you're the root user, which is not
-          suitable for the desktop use case.
-        </para>
-        <para>
-          Of course, you can do if you really want, but then you loose the
-          benefits of the query interface and the policy override,
-          and have to run your application as root.
-        </para>
-      
-    </para>
-  </refsect1>
-  <refsect1 role="details"><title role="details.title">Details</title><refsect2><title><anchor role="function" id="QoS.SetMinimumLatency"/>SetMinimumLatency ()</title><indexterm><primary>SetMinimumLatency</primary><secondary>QoS</secondary></indexterm><programlisting>SetMinimumLatency (in's'type,
-in'i'value)</programlisting></refsect2>
-          <para>
-            Set the minimum acceptable latency of the system.
-            Setting this value tells the system to not attempt latencies below this setting.
-            This may be useful in a data center or server room, when you want to override the
-            latency requests from applications.
-            This may be required if the server room is operating outside a standard thermal
-            or power envelope, and an override is required.
-            You do not have to use this method during normal operation.
-          </para>
-        <variablelist role="params"><varlistentry><term><parameter>type</parameter>:</term><listitem><simpara>
-            The type of latency to control, <literal>cpu_dma</literal> or
-            <literal>network</literal>.
-          </simpara></listitem></varlistentry><varlistentry><term><parameter>value</parameter>:</term><listitem><simpara>
-            The value, in microseconds or kilobits per second.
-            The value <literal>-1</literal> means unset and the default is used.
-          </simpara></listitem></varlistentry></variablelist><refsect3><title>Errors</title><variablelist role="errors"><varlistentry><term><parameter>org.freedesktop.UPower.GeneralError</parameter>:</term><listitem><simpara>if an error occured while setting the latency</simpara></listitem></varlistentry></variablelist></refsect3><refsect3><title>Permissions</title><para role="permission">Callers need the <literal>org.freedesktop.upower.qos.set-minimum-latency</literal> authorization</para></refsect3><refsect2><title><anchor role="function" id="QoS.RequestLatency"/>RequestLatency ()</title><indexterm><primary>RequestLatency</primary><secondary>QoS</secondary></indexterm><programlisting>RequestLatency (in's'type,
-in'i'value,
-in'b'persistent,
-out'u'cookie)</programlisting></refsect2>
-          <para>
-            Set the required latency of an application or service.
-          </para>
-        <variablelist role="params"><varlistentry><term><parameter>type</parameter>:</term><listitem><simpara>
-            The type of latency to control, <literal>cpu_dma</literal> or
-            <literal>network</literal>.
-          </simpara></listitem></varlistentry><varlistentry><term><parameter>value</parameter>:</term><listitem><simpara>
-            The value, in microseconds or kilobits per second.
-            The value <literal>-1</literal> means remove all latency requirements.
-          </simpara></listitem></varlistentry><varlistentry><term><parameter>persistent</parameter>:</term><listitem><simpara>
-            If the latency request outlives the connection.
-            When the application issuing the request disconnects from the system
-            bus, the latency request is automatically cleaned up.
-            By setting this flag to TRUE, the request is not cleaned up when
-            the client disconnects, and the cookie is preserved acress reboots.
-          </simpara></listitem></varlistentry><varlistentry><term><parameter>cookie</parameter>:</term><listitem><simpara>
-            A cookie that identifies the request. This allows an application or
-            service to request multiple latency settings from one process, and for
-            other processes to cancel requests.
-          </simpara></listitem></varlistentry></variablelist><refsect3><title>Errors</title><variablelist role="errors"><varlistentry><term><parameter>org.freedesktop.UPower.GeneralError</parameter>:</term><listitem><simpara>if an error occured while setting the latency</simpara></listitem></varlistentry></variablelist></refsect3><refsect3><title>Permissions</title><para role="permission">
-          Callers need the
-          <literal>org.freedesktop.upower.qos.request-latency-persistent</literal>
-          authorization if <literal>persistent</literal> is TRUE, or
-          <literal>org.freedesktop.upower.qos.request-latency</literal> otherwise.
-        </para></refsect3><refsect2><title><anchor role="function" id="QoS.CancelRequest"/>CancelRequest ()</title><indexterm><primary>CancelRequest</primary><secondary>QoS</secondary></indexterm><programlisting>CancelRequest (in'u'cookie)</programlisting></refsect2>
-          <para>
-            Cancel the latency request from the application or service.
-          </para>
-        <variablelist role="params"><varlistentry><term><parameter>cookie</parameter>:</term><listitem><simpara>
-            A cookie that identifies the request. This allows an application or
-            serivice to request multiple latency settings from one process.
-          </simpara></listitem></varlistentry></variablelist><refsect3><title>Errors</title><variablelist role="errors"><varlistentry><term><parameter>org.freedesktop.UPower.GeneralError</parameter>:</term><listitem><simpara>if an error occured while clearing the latency</simpara></listitem></varlistentry></variablelist></refsect3><refsect3><title>Permissions</title><para role="permission">
-          Callers need the
-          <literal>org.freedesktop.upower.qos.cancel-request</literal>
-          authorization if they were not the one issuing the request.
-        </para></refsect3><refsect2><title><anchor role="function" id="QoS.GetLatency"/>GetLatency ()</title><indexterm><primary>GetLatency</primary><secondary>QoS</secondary></indexterm><programlisting>GetLatency (in's'type,
-out'i'value)</programlisting></refsect2>
-          <para>
-            Get the lowest latency state on the system at the current time.
-          </para>
-        <variablelist role="params"><varlistentry><term><parameter>type</parameter>:</term><listitem><simpara>
-            The type of latency to return, <literal>cpu_dma</literal> or
-            <literal>network</literal>.
-          </simpara></listitem></varlistentry><varlistentry><term><parameter>value</parameter>:</term><listitem><simpara>
-            The value, in microseconds or kilobits per second.
-            The value <literal>-1</literal> means not set or unavailable.
-          </simpara></listitem></varlistentry></variablelist><refsect3><title>Errors</title><variablelist role="errors"><varlistentry><term><parameter>org.freedesktop.UPower.GeneralError</parameter>:</term><listitem><simpara>if an error occured while getting the latency</simpara></listitem></varlistentry></variablelist></refsect3><refsect2><title><anchor role="function" id="QoS.GetLatencyRequests"/>GetLatencyRequests ()</title><indexterm><primary>GetLatencyRequests</primary><secondary>QoS</secondary></indexterm><programlisting>GetLatencyRequests (out'a(uuusxbssi)'requests)</programlisting></refsect2>
-          <para>
-            Gets all the system requests from all services and applications.
-          </para>
-        <variablelist role="params"><varlistentry><term><parameter>requests</parameter>:</term><listitem><simpara>
-            The request lists, where each application can request different
-            latency types.
-            <para><itemizedlist><listitem><emphasis role="bold">cookie: </emphasis>
-                  The random cookie that identifies the request.
-                </listitem><listitem><emphasis role="bold">uid: </emphasis>
-                  The user ID that issued the request.
-                </listitem><listitem><emphasis role="bold">pid: </emphasis>
-                  The process ID of the application.
-                </listitem><listitem><emphasis role="bold">exec: </emphasis>
-                  The executable that issued the request.
-                </listitem><listitem><emphasis role="bold">timespec: </emphasis>
-                  The number of seconds since the epoch.
-                </listitem><listitem><emphasis role="bold">persistent: </emphasis>
-                  If the request is persistent and outlives the connection lifetime.
-                </listitem><listitem><emphasis role="bold">type: </emphasis>
-                  The type of the request, <literal>cpu_dma</literal> or
-                  <literal>network</literal>.
-                </listitem><listitem><emphasis role="bold">value: </emphasis>
-                  The value, in microseconds or kilobits per second.
-                </listitem></itemizedlist></para>
-        </simpara></listitem></varlistentry></variablelist></refsect1>
-  <refsect1 role="signals"><title role="signals.title">Signal Details</title><refsect2><title><anchor role="function" id="QoS::LatencyChanged"/>The LatencyChanged signal</title><indexterm><primary>LatencyChanged</primary><secondary>QoS</secondary></indexterm><programlisting>LatencyChanged ('s'type,
-'i'value)</programlisting></refsect2>
-          <para>
-            Some latency value has changed.
-          </para>
-        <variablelist role="params"><varlistentry><term><parameter>type</parameter>:</term><listitem><simpara>
-            The type of latency that changed, cpu_dma or
-            network.
-          </simpara></listitem></varlistentry><varlistentry><term><parameter>value</parameter>:</term><listitem><simpara>
-            The value, in microseconds or kilobits per second.
-            The value -1 means not set or unavailable.
-          </simpara></listitem></varlistentry></variablelist><refsect2><title><anchor role="function" id="QoS::RequestsChanged"/>The RequestsChanged signal</title><indexterm><primary>RequestsChanged</primary><secondary>QoS</secondary></indexterm><programlisting>RequestsChanged ()</programlisting></refsect2>
-          <para>
-            The latency requests on the system have changed.
-          </para>
-        <variablelist role="params"/></refsect1>
-</refentry>
diff --git a/doc/dbus/org.freedesktop.UPower.ref.xml b/doc/dbus/org.freedesktop.UPower.ref.xml
deleted file mode 100644
index 3d89b50..0000000
--- a/doc/dbus/org.freedesktop.UPower.ref.xml
+++ /dev/null
@@ -1,252 +0,0 @@
-<?xml version="1.0"?><!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN" "http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd">
-<refentry id="UPower">
-  <refmeta>
-    <refentrytitle role="top_of_page">org.freedesktop.UPower</refentrytitle>
-  </refmeta>
-  <refnamediv>
-    <refname>org.freedesktop.UPower</refname>
-    <refpurpose>UPower interface</refpurpose>
-  </refnamediv>
-  <refsynopsisdiv role="synopsis">
-    <title role="synopsis.title">Methods</title>
-    <synopsis><link linkend="UPower.EnumerateDevices">EnumerateDevices</link>(out'ao'devices)
-<link linkend="UPower.AboutToSleep">AboutToSleep</link>(in's'action)
-<link linkend="UPower.Suspend">Suspend</link>()
-<link linkend="UPower.SuspendAllowed">SuspendAllowed</link>(out'b'allowed)
-<link linkend="UPower.Hibernate">Hibernate</link>()
-<link linkend="UPower.HibernateAllowed">HibernateAllowed</link>(out'b'allowed)
-</synopsis>
-  </refsynopsisdiv>
-  <refsect1 role="signal_proto">
-    <title role="signal_proto.title">Signals</title>
-    <synopsis><link linkend="UPower::DeviceAdded">DeviceAdded</link>('o'device)
-<link linkend="UPower::DeviceRemoved">DeviceRemoved</link>('o'device)
-<link linkend="UPower::DeviceChanged">DeviceChanged</link>('o'device)
-<link linkend="UPower::Changed">Changed</link>()
-<link linkend="UPower::Sleeping">Sleeping</link>()
-<link linkend="UPower::NotifySleep">NotifySleep</link>('s'action)
-<link linkend="UPower::Resuming">Resuming</link>()
-<link linkend="UPower::NotifyResume">NotifyResume</link>('s'action)
-</synopsis>
-  </refsect1>
-  <refsect1 role="impl_interfaces">
-    <title role="impl_interfaces.title">Implemented Interfaces</title>
-    <para>
-    Objects implementing org.freedesktop.UPower also implements
-    org.freedesktop.DBus.Introspectable,
-    org.freedesktop.DBus.Properties
-    </para>
-  </refsect1>
-  <refsect1 role="properties">
-    <title role="properties.title">Properties</title>
-    <synopsis><link linkend="UPower:DaemonVersion">'DaemonVersion'</link>read's'
-<link linkend="UPower:CanSuspend">'CanSuspend'</link>read'b'
-<link linkend="UPower:CanHibernate">'CanHibernate'</link>read'b'
-<link linkend="UPower:OnBattery">'OnBattery'</link>read'b'
-<link linkend="UPower:OnLowBattery">'OnLowBattery'</link>read'b'
-<link linkend="UPower:LidIsClosed">'LidIsClosed'</link>read'b'
-<link linkend="UPower:LidIsPresent">'LidIsPresent'</link>read'b'
-<link linkend="UPower:LidForceSleep">'LidForceSleep'</link>read'b'
-<link linkend="UPower:IsDocked">'IsDocked'</link>read'b'
-</synopsis>
-  </refsect1>
-  <refsect1 role="desc">
-    <title role="desc.title">Description</title>
-    <para>
-      
-        <para>
-          The UPower service is available via the system message
-          bus. To access the service, use
-          the <literal>org.freedesktop.UPower</literal> interface on
-          the <literal>/org/freedesktop/UPower</literal> object on
-          the D-Bus system bus service with the well-known
-          name <literal>org.freedesktop.UPower</literal>.
-        </para>
-        <para>
-          <informalexample>
-            <programlisting>
-$ dbus-send --print-reply \
-            --system \
-            --dest=org.freedesktop.UPower \
-            /org/freedesktop/UPower \
-            org.freedesktop.UPower.EnumerateDevices
-
-method return sender=:1.386 -&gt; dest=:1.451 reply_serial=2
-   array [
-      object path "/org/freedesktop/UPower/devices/line_power_AC"
-      object path "/org/freedesktop/UPower/devices/battery_BAT0"
-   ]
-            </programlisting>
-          </informalexample>
-        </para>
-      
-    </para>
-  </refsect1>
-  <refsect1 role="details"><title role="details.title">Details</title><refsect2><title><anchor role="function" id="UPower.EnumerateDevices"/>EnumerateDevices ()</title><indexterm><primary>EnumerateDevices</primary><secondary>UPower</secondary></indexterm><programlisting>EnumerateDevices (out'ao'devices)</programlisting></refsect2>
-          <para>
-            Enumerate all power objects on the system.
-          </para>
-        <variablelist role="params"><varlistentry><term><parameter>devices</parameter>:</term><listitem><simpara>An array of object paths for devices.</simpara></listitem></varlistentry></variablelist><refsect2><title><anchor role="function" id="UPower.AboutToSleep"/>AboutToSleep ()</title><indexterm><primary>AboutToSleep</primary><secondary>UPower</secondary></indexterm><programlisting>AboutToSleep (in's'action)</programlisting></refsect2>
-          <para>
-            This method tells UPower that the Suspend() or Hibernate() method
-            is about to be called.
-            This allows UPower to emit the Suspending signal whilst
-            session activities are happening that have to be done before the
-            suspend process is started.
-          </para>
-          <para>
-            This method would typically be called by the session power
-            management daemon, before it locks the screen and waits for the
-            screen to fade to black.
-            The session power management component would then call Suspend() or
-            Hibernate() when these syncronous tasks have completed.
-          </para>
-          <para>
-            If this method is not called than nothing bad will happen and
-            Suspend() or Hibernate() will block for the required second.
-          </para>
-        <variablelist role="params"><varlistentry><term><parameter>action</parameter>:</term><listitem><simpara>
-            The sleep action type, e.g. <literal>suspend</literal> or
-            <literal>hibernate</literal>.
-          </simpara></listitem></varlistentry></variablelist><refsect2><title><anchor role="function" id="UPower.Suspend"/>Suspend ()</title><indexterm><primary>Suspend</primary><secondary>UPower</secondary></indexterm><programlisting>Suspend ()</programlisting></refsect2>
-          <para>
-            Suspends the computer into a low power state.
-            System state is not preserved if the power is lost.
-          </para>
-          <para>
-            If AboutToSleep() has not been called then UPower will send
-            the Sleeping() signal and block for one second.
-          </para>
-          <para>
-            If AboutToSleep() has been called less than one second
-            before this method is called then UPower will block for the
-            remaining time to complete one second of delay.
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="UPower.SuspendAllowed"/>SuspendAllowed ()</title><indexterm><primary>SuspendAllowed</primary><secondary>UPower</secondary></indexterm><programlisting>SuspendAllowed (out'b'allowed)</programlisting></refsect2>
-          <para>
-            Check if the caller has (or can get) the PolicyKit privilege to call
-            <link linkend="Power.Suspend"><function>Suspend</function></link>.
-          </para>
-        <variablelist role="params"><varlistentry><term><parameter>allowed</parameter>:</term><listitem><simpara>TRUE if allowed, otherwise FALSE</simpara></listitem></varlistentry></variablelist><refsect2><title><anchor role="function" id="UPower.Hibernate"/>Hibernate ()</title><indexterm><primary>Hibernate</primary><secondary>UPower</secondary></indexterm><programlisting>Hibernate ()</programlisting></refsect2>
-          <para>
-            Hibernates the computer into a low power state.
-            System state is preserved if the power is lost.
-          </para>
-          <para>
-            If AboutToSleep() has not been called then UPower will send
-            the Sleeping() signal and block for one second.
-          </para>
-          <para>
-            If AboutToSleep() has been called less than one second
-            before this method is called then UPower will block for the
-            remaining time to complete one second of delay.
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="UPower.HibernateAllowed"/>HibernateAllowed ()</title><indexterm><primary>HibernateAllowed</primary><secondary>UPower</secondary></indexterm><programlisting>HibernateAllowed (out'b'allowed)</programlisting></refsect2>
-          <para>
-            Check if the caller has (or can get) the PolicyKit privilege to call
-            <link linkend="Power.Hibernate"><function>Hibernate</function></link>.
-          </para>
-        <variablelist role="params"><varlistentry><term><parameter>allowed</parameter>:</term><listitem><simpara>TRUE if allowed, otherwise FALSE</simpara></listitem></varlistentry></variablelist></refsect1>
-  <refsect1 role="signals"><title role="signals.title">Signal Details</title><refsect2><title><anchor role="function" id="UPower::DeviceAdded"/>The DeviceAdded signal</title><indexterm><primary>DeviceAdded</primary><secondary>UPower</secondary></indexterm><programlisting>DeviceAdded ('o'device)</programlisting></refsect2>
-          <para>
-            Emitted when a device is added.
-          </para>
-        <variablelist role="params"><varlistentry><term><parameter>device</parameter>:</term><listitem><simpara>Object path of device that was added.</simpara></listitem></varlistentry></variablelist><refsect2><title><anchor role="function" id="UPower::DeviceRemoved"/>The DeviceRemoved signal</title><indexterm><primary>DeviceRemoved</primary><secondary>UPower</secondary></indexterm><programlisting>DeviceRemoved ('o'device)</programlisting></refsect2>
-          <para>
-            Emitted when a device is removed.
-          </para>
-        <variablelist role="params"><varlistentry><term><parameter>device</parameter>:</term><listitem><simpara>Object path of device that was removed.</simpara></listitem></varlistentry></variablelist><refsect2><title><anchor role="function" id="UPower::DeviceChanged"/>The DeviceChanged signal</title><indexterm><primary>DeviceChanged</primary><secondary>UPower</secondary></indexterm><programlisting>DeviceChanged ('o'device)</programlisting></refsect2>
-          <para>
-            Emitted when a device changed.
-          </para>
-        <variablelist role="params"><varlistentry><term><parameter>device</parameter>:</term><listitem><simpara>Object path of device that was changed.</simpara></listitem></varlistentry></variablelist><refsect2><title><anchor role="function" id="UPower::Changed"/>The Changed signal</title><indexterm><primary>Changed</primary><secondary>UPower</secondary></indexterm><programlisting>Changed ()</programlisting></refsect2>
-          <para>
-            Emitted when one or more properties on the object changes.
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="UPower::Sleeping"/>The Sleeping signal</title><indexterm><primary>Sleeping</primary><secondary>UPower</secondary></indexterm><programlisting>Sleeping ()</programlisting></refsect2>
-          <para>
-            This signal is sent when the session is about to be suspended or
-            hibernated.
-          </para>
-          <para>
-            This signal is DEPRECATED. Use NotifySleep() instead.
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="UPower::NotifySleep"/>The NotifySleep signal</title><indexterm><primary>NotifySleep</primary><secondary>UPower</secondary></indexterm><programlisting>NotifySleep ('s'action)</programlisting></refsect2>
-          <para>
-            This signal is sent when the session is about to be suspended or
-            hibernated.
-            Session and system programs have one second to do anything required
-            before the sleep action is taken (such as sending out Avahi or
-            Jabber messages).
-          </para>
-        <variablelist role="params"><varlistentry><term><parameter>action</parameter>:</term><listitem><simpara>
-            The sleep action type, e.g. suspend,
-            hibernate or hybrid.
-          </simpara></listitem></varlistentry></variablelist><refsect2><title><anchor role="function" id="UPower::Resuming"/>The Resuming signal</title><indexterm><primary>Resuming</primary><secondary>UPower</secondary></indexterm><programlisting>Resuming ()</programlisting></refsect2>
-          <para>
-            This signal is sent when the session has just returned from
-            Suspend() or Hibernate().
-          </para>
-          <para>
-            This signal is DEPRECATED. Use NotifyResume() instead.
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="UPower::NotifyResume"/>The NotifyResume signal</title><indexterm><primary>NotifyResume</primary><secondary>UPower</secondary></indexterm><programlisting>NotifyResume ('s'action)</programlisting></refsect2>
-          <para>
-            This signal is sent when the session has just returned from
-            Suspend() or Hibernate().
-            Session and system programs can then do anything required (such as
-            sending out Avahi or Jabber messages).
-          </para>
-        <variablelist role="params"><varlistentry><term><parameter>action</parameter>:</term><listitem><simpara>
-            The sleep action type, e.g. suspend,
-            hibernate or hybrid.
-          </simpara></listitem></varlistentry></variablelist></refsect1>
-  <refsect1 role="property_details"><title role="property_details.title">Property Details</title><refsect2><title><anchor role="function" id="UPower:DaemonVersion"/>The "DaemonVersion" property</title><indexterm><primary>DaemonVersion</primary><secondary>UPower</secondary></indexterm><programlisting>'DaemonVersion'read's'
-</programlisting></refsect2><para>
-            Version of the running daemon, e.g. <literal>002</literal>.
-      </para><variablelist role="params"/><refsect2><title><anchor role="function" id="UPower:CanSuspend"/>The "CanSuspend" property</title><indexterm><primary>CanSuspend</primary><secondary>UPower</secondary></indexterm><programlisting>'CanSuspend'read'b'
-</programlisting></refsect2><para>
-            Whether the system is able to suspend.
-      </para><variablelist role="params"/><refsect2><title><anchor role="function" id="UPower:CanHibernate"/>The "CanHibernate" property</title><indexterm><primary>CanHibernate</primary><secondary>UPower</secondary></indexterm><programlisting>'CanHibernate'read'b'
-</programlisting></refsect2><para>
-            Whether the system is able to hibernate.
-      </para><variablelist role="params"/><refsect2><title><anchor role="function" id="UPower:OnBattery"/>The "OnBattery" property</title><indexterm><primary>OnBattery</primary><secondary>UPower</secondary></indexterm><programlisting>'OnBattery'read'b'
-</programlisting></refsect2><para>
-            Indicates whether the system is running on battery power.
-            This property is provided for convenience.
-      </para><variablelist role="params"/><refsect2><title><anchor role="function" id="UPower:OnLowBattery"/>The "OnLowBattery" property</title><indexterm><primary>OnLowBattery</primary><secondary>UPower</secondary></indexterm><programlisting>'OnLowBattery'read'b'
-</programlisting></refsect2><para>
-            Indicates whether the system is running on battery power and if the battery is critically low.
-            This property is provided for convenience.
-      </para><variablelist role="params"/><refsect2><title><anchor role="function" id="UPower:LidIsClosed"/>The "LidIsClosed" property</title><indexterm><primary>LidIsClosed</primary><secondary>UPower</secondary></indexterm><programlisting>'LidIsClosed'read'b'
-</programlisting></refsect2>
-          <para>
-            Indicates if the laptop lid is closed where the display cannot be seen.
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="UPower:LidIsPresent"/>The "LidIsPresent" property</title><indexterm><primary>LidIsPresent</primary><secondary>UPower</secondary></indexterm><programlisting>'LidIsPresent'read'b'
-</programlisting></refsect2>
-          <para>
-            If the system has a lid device.
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="UPower:LidForceSleep"/>The "LidForceSleep" property</title><indexterm><primary>LidForceSleep</primary><secondary>UPower</secondary></indexterm><programlisting>'LidForceSleep'read'b'
-</programlisting></refsect2>
-          <para>
-            If the system really has to sleep when the lid is closed.
-            Some laptops actually melt (!) if the lid is closed and the
-            computer keeps running. We blacklist those, and do something
-            sane for the other machines.
-          </para>
-          <para>
-            This allows us to set the default session policy to not
-            suspend on lid close if the laptop is docked, and be sure
-            the machine is not going to melt.
-          </para>
-        <variablelist role="params"/><refsect2><title><anchor role="function" id="UPower:IsDocked"/>The "IsDocked" property</title><indexterm><primary>IsDocked</primary><secondary>UPower</secondary></indexterm><programlisting>'IsDocked'read'b'
-</programlisting></refsect2>
-          <para>
-            If the system is currently docked.
-            Note: the "is-docked" value is the result of a heuristic,
-            which may involve testing the display output.
-          </para>
-        <variablelist role="params"/></refsect1>
-</refentry>
diff --git a/doc/man/Makefile.am b/doc/man/Makefile.am
index cb3dedc..31e2cdd 100644
--- a/doc/man/Makefile.am
+++ b/doc/man/Makefile.am
@@ -1,9 +1,9 @@
 if MAN_PAGES_ENABLED
 
 man_MANS = 				\
-	upower.1			\
-	upowerd.8			\
-	UPower.7
+	upower-compat.1			\
+	upowerd-compat.8		\
+	UPower-compat.7
 
 %.1 %.7 %.8 : %.xml
 	$(XSLTPROC) -nonet http://docbook.sourceforge.net/release/xsl/current/manpages/docbook.xsl $<
@@ -13,9 +13,9 @@ MAINTAINERCLEANFILES = $(man_MANS)
 endif # MAN_PAGES_ENABLED
 
 EXTRA_DIST= 				\
-	upower.xml			\
-	upowerd.xml			\
-	UPower.xml
+	upower-compat.xml		\
+	upowerd-compat.xml		\
+	UPower-compat.xml
 
 clean-local:
 	rm -f *~ *.[178]
diff --git a/doc/man/UPower-compat.xml b/doc/man/UPower-compat.xml
new file mode 100644
index 0000000..3381a3e
--- /dev/null
+++ b/doc/man/UPower-compat.xml
@@ -0,0 +1,62 @@
+<refentry id="UPower-compat.7">
+  <refentryinfo>
+    <title>UPower-compat</title>
+    <date>March 2008</date>
+    <productname>UPower-compat</productname>
+  </refentryinfo>
+
+  <refmeta>
+    <refentrytitle>UPower-compat</refentrytitle>
+    <manvolnum>7</manvolnum>
+    <refmiscinfo class="version"></refmiscinfo>
+  </refmeta>
+
+  <refnamediv>
+    <refname>UPower-compat</refname>
+    <refpurpose>System-wide Power Management</refpurpose>
+  </refnamediv>
+
+  <refsect1><title>DESCRIPTION</title>
+    <para>
+      UPower provides an interface to enumerate power sources
+      on the system and control system-wide power management. Any
+      application can access
+      the <emphasis>org.freedesktop.UPowerCompat</emphasis> service
+      on the system message bus. Some operations (such as suspending
+      the system) is restricted using PolicyKit.
+    </para>
+  </refsect1>
+
+  <refsect1><title>AUTHOR</title>
+    <para>
+      Written by David Zeuthen <email>davidz@redhat.com</email>,
+      Richard Hughes <email>richard@hughsie.com</email> and with
+      a lot of help from many others.
+    </para>
+  </refsect1>
+
+  <refsect1>
+    <title>BUGS</title>
+    <para>
+      Please send bug reports to either the distribution or the
+      DeviceKit mailing list,
+      see <ulink url="http://lists.freedesktop.org/mailman/listinfo/devkit-devel"/>
+      on how to subscribe.
+    </para>
+  </refsect1>
+
+  <refsect1>
+    <title>SEE ALSO</title>
+    <para>
+      <citerefentry>
+        <refentrytitle>PolicyKit</refentrytitle><manvolnum>8</manvolnum>
+      </citerefentry>,
+      <citerefentry>
+        <refentrytitle>upowerd-compat</refentrytitle><manvolnum>8</manvolnum>
+      </citerefentry>,
+      <citerefentry>
+        <refentrytitle>upower-compat</refentrytitle><manvolnum>1</manvolnum>
+      </citerefentry>
+    </para>
+  </refsect1>
+</refentry>
diff --git a/doc/man/UPower.xml b/doc/man/UPower.xml
deleted file mode 100644
index 2d4c14d..0000000
--- a/doc/man/UPower.xml
+++ /dev/null
@@ -1,62 +0,0 @@
-<refentry id="UPower.7">
-  <refentryinfo>
-    <title>UPower</title>
-    <date>March 2008</date>
-    <productname>UPower</productname>
-  </refentryinfo>
-
-  <refmeta>
-    <refentrytitle>UPower</refentrytitle>
-    <manvolnum>7</manvolnum>
-    <refmiscinfo class="version"></refmiscinfo>
-  </refmeta>
-
-  <refnamediv>
-    <refname>UPower</refname>
-    <refpurpose>System-wide Power Management</refpurpose>
-  </refnamediv>
-
-  <refsect1><title>DESCRIPTION</title>
-    <para>
-      UPower provides an interface to enumerate power sources
-      on the system and control system-wide power management. Any
-      application can access
-      the <emphasis>org.freedesktop.UPower</emphasis> service
-      on the system message bus. Some operations (such as suspending
-      the system) is restricted using PolicyKit.
-    </para>
-  </refsect1>
-
-  <refsect1><title>AUTHOR</title>
-    <para>
-      Written by David Zeuthen <email>davidz@redhat.com</email>,
-      Richard Hughes <email>richard@hughsie.com</email> and with
-      a lot of help from many others.
-    </para>
-  </refsect1>
-
-  <refsect1>
-    <title>BUGS</title>
-    <para>
-      Please send bug reports to either the distribution or the
-      DeviceKit mailing list,
-      see <ulink url="http://lists.freedesktop.org/mailman/listinfo/devkit-devel"/>
-      on how to subscribe.
-    </para>
-  </refsect1>
-
-  <refsect1>
-    <title>SEE ALSO</title>
-    <para>
-      <citerefentry>
-        <refentrytitle>PolicyKit</refentrytitle><manvolnum>8</manvolnum>
-      </citerefentry>,
-      <citerefentry>
-        <refentrytitle>upowerd</refentrytitle><manvolnum>8</manvolnum>
-      </citerefentry>,
-      <citerefentry>
-        <refentrytitle>upower</refentrytitle><manvolnum>1</manvolnum>
-      </citerefentry>
-    </para>
-  </refsect1>
-</refentry>
diff --git a/doc/man/upower-compat.xml b/doc/man/upower-compat.xml
new file mode 100644
index 0000000..3d4ab78
--- /dev/null
+++ b/doc/man/upower-compat.xml
@@ -0,0 +1,103 @@
+<refentry id="upower-compat.1">
+  <refentryinfo>
+    <title>upower-compat</title>
+    <date>April 2008</date>
+    <productname>upower-compat</productname>
+  </refentryinfo>
+
+  <refmeta>
+    <refentrytitle>upower-compat</refentrytitle>
+    <manvolnum>1</manvolnum>
+    <refmiscinfo class="version"></refmiscinfo>
+  </refmeta>
+
+  <refnamediv>
+    <refname>upower-compat</refname>
+    <refpurpose>UPower command line tool</refpurpose>
+  </refnamediv>
+
+  <refsynopsisdiv>
+    <cmdsynopsis>
+      <command>upower-compat</command>
+      <arg><option>--dump</option></arg>
+      <arg><option>--enumerate</option></arg>
+      <arg><option>--monitor-detail</option></arg>
+      <arg><option>--monitor</option></arg>
+      <arg><option>--show-info</option></arg>
+      <arg><option>--version</option></arg>
+      <arg><option>--wakeups</option></arg>
+      <arg><option>--help</option></arg>
+    </cmdsynopsis>
+  </refsynopsisdiv>
+
+
+  <refsect1><title>DESCRIPTION</title>
+    <para>
+      <emphasis><refentrytitle>upower-compat</refentrytitle></emphasis> is a
+      simple command line client for the
+      <citerefentry><refentrytitle>UPower-compat</refentrytitle><manvolnum>7</manvolnum></citerefentry>
+      daemon. TODO: not fully documented.
+    </para>
+  </refsect1>
+
+  <refsect1>
+    <title>OPTIONS</title>
+    <variablelist>
+      <varlistentry>
+        <term><option>--monitor</option></term>
+        <listitem>
+          <para>
+            Connect to the UPower daemon and print a line
+            every time a power source is added, removed or changed.
+          </para>
+        </listitem>
+      </varlistentry>
+      <varlistentry>
+        <term><option>--monitor-detail</option></term>
+        <listitem>
+          <para>
+            Like <option>--monitor</option> but prints the full
+            details of the power source whenever an event happens.
+          </para>
+        </listitem>
+      </varlistentry>
+      <varlistentry>
+        <term><option>--help</option></term>
+        <listitem>
+          <para>
+            Show help options.
+          </para>
+        </listitem>
+      </varlistentry>
+    </variablelist>
+  </refsect1>
+
+  <refsect1><title>AUTHOR</title>
+    <para>
+      Written by David Zeuthen <email>davidz@redhat.com</email> with
+      a lot of help from many others.
+    </para>
+  </refsect1>
+
+  <refsect1>
+    <title>BUGS</title>
+    <para>
+      Please send bug reports to either the distribution or the
+      DeviceKit mailing list,
+      see <ulink url="http://lists.freedesktop.org/mailman/listinfo/devkit-devel"/>
+      on how to subscribe.
+    </para>
+  </refsect1>
+
+  <refsect1>
+    <title>SEE ALSO</title>
+    <para>
+      <citerefentry>
+        <refentrytitle>upowerd-compat</refentrytitle><manvolnum>8</manvolnum>
+      </citerefentry>,
+      <citerefentry>
+        <refentrytitle>UPower-compat</refentrytitle><manvolnum>7</manvolnum>
+      </citerefentry>,
+    </para>
+  </refsect1>
+</refentry>
diff --git a/doc/man/upower.xml b/doc/man/upower.xml
deleted file mode 100644
index e7f0f7a..0000000
--- a/doc/man/upower.xml
+++ /dev/null
@@ -1,103 +0,0 @@
-<refentry id="upower.1">
-  <refentryinfo>
-    <title>upower</title>
-    <date>April 2008</date>
-    <productname>upower</productname>
-  </refentryinfo>
-
-  <refmeta>
-    <refentrytitle>upower</refentrytitle>
-    <manvolnum>1</manvolnum>
-    <refmiscinfo class="version"></refmiscinfo>
-  </refmeta>
-
-  <refnamediv>
-    <refname>upower</refname>
-    <refpurpose>UPower command line tool</refpurpose>
-  </refnamediv>
-
-  <refsynopsisdiv>
-    <cmdsynopsis>
-      <command>upower</command>
-      <arg><option>--dump</option></arg>
-      <arg><option>--enumerate</option></arg>
-      <arg><option>--monitor-detail</option></arg>
-      <arg><option>--monitor</option></arg>
-      <arg><option>--show-info</option></arg>
-      <arg><option>--version</option></arg>
-      <arg><option>--wakeups</option></arg>
-      <arg><option>--help</option></arg>
-    </cmdsynopsis>
-  </refsynopsisdiv>
-
-
-  <refsect1><title>DESCRIPTION</title>
-    <para>
-      <emphasis><refentrytitle>upower</refentrytitle></emphasis> is a
-      simple command line client for the
-      <citerefentry><refentrytitle>UPower</refentrytitle><manvolnum>7</manvolnum></citerefentry>
-      daemon. TODO: not fully documented.
-    </para>
-  </refsect1>
-
-  <refsect1>
-    <title>OPTIONS</title>
-    <variablelist>
-      <varlistentry>
-        <term><option>--monitor</option></term>
-        <listitem>
-          <para>
-            Connect to the UPower daemon and print a line
-            every time a power source is added, removed or changed.
-          </para>
-        </listitem>
-      </varlistentry>
-      <varlistentry>
-        <term><option>--monitor-detail</option></term>
-        <listitem>
-          <para>
-            Like <option>--monitor</option> but prints the full
-            details of the power source whenever an event happens.
-          </para>
-        </listitem>
-      </varlistentry>
-      <varlistentry>
-        <term><option>--help</option></term>
-        <listitem>
-          <para>
-            Show help options.
-          </para>
-        </listitem>
-      </varlistentry>
-    </variablelist>
-  </refsect1>
-
-  <refsect1><title>AUTHOR</title>
-    <para>
-      Written by David Zeuthen <email>davidz@redhat.com</email> with
-      a lot of help from many others.
-    </para>
-  </refsect1>
-
-  <refsect1>
-    <title>BUGS</title>
-    <para>
-      Please send bug reports to either the distribution or the
-      DeviceKit mailing list,
-      see <ulink url="http://lists.freedesktop.org/mailman/listinfo/devkit-devel"/>
-      on how to subscribe.
-    </para>
-  </refsect1>
-
-  <refsect1>
-    <title>SEE ALSO</title>
-    <para>
-      <citerefentry>
-        <refentrytitle>upowerd</refentrytitle><manvolnum>8</manvolnum>
-      </citerefentry>,
-      <citerefentry>
-        <refentrytitle>UPower</refentrytitle><manvolnum>7</manvolnum>
-      </citerefentry>,
-    </para>
-  </refsect1>
-</refentry>
diff --git a/doc/man/upowerd-compat.xml b/doc/man/upowerd-compat.xml
new file mode 100644
index 0000000..30d3a66
--- /dev/null
+++ b/doc/man/upowerd-compat.xml
@@ -0,0 +1,84 @@
+<refentry id="upowerd-compat.8">
+  <refentryinfo>
+    <title>upowerd-compat</title>
+    <date>April 2008</date>
+    <productname>upowerd-compat</productname>
+  </refentryinfo>
+
+  <refmeta>
+    <refentrytitle>upowerd-compat</refentrytitle>
+    <manvolnum>8</manvolnum>
+    <refmiscinfo class="version"></refmiscinfo>
+  </refmeta>
+
+  <refnamediv>
+    <refname>upowerd-compat</refname>
+    <refpurpose>UPower Daemon</refpurpose>
+  </refnamediv>
+
+  <refsynopsisdiv>
+    <cmdsynopsis>
+      <command>upowerd-compat</command>
+      <arg><option>--help</option></arg>
+    </cmdsynopsis>
+  </refsynopsisdiv>
+
+
+  <refsect1><title>DESCRIPTION</title>
+    <para>
+      <emphasis><refentrytitle>upowerd-compat</refentrytitle></emphasis> provides
+      the <emphasis>org.freedesktop.UPowerCompat</emphasis> service on the
+      system message bus. Users or administrators should never need to
+      start this daemon as it will be automatically started by
+      <citerefentry><refentrytitle>dbus-daemon</refentrytitle><manvolnum>1</manvolnum></citerefentry>
+      whenever an application calls into the <emphasis>org.freedesktop.UPowerCompat</emphasis>
+      service.
+    </para>
+  </refsect1>
+
+  <refsect1>
+    <title>OPTIONS</title>
+    <variablelist>
+      <varlistentry>
+        <term><option>--help</option></term>
+        <listitem>
+          <para>
+            Show help options.
+          </para>
+        </listitem>
+      </varlistentry>
+    </variablelist>
+  </refsect1>
+
+  <refsect1><title>AUTHOR</title>
+    <para>
+      Written by David Zeuthen <email>davidz@redhat.com</email> with
+      a lot of help from many others.
+    </para>
+  </refsect1>
+
+  <refsect1>
+    <title>BUGS</title>
+    <para>
+      Please send bug reports to either the distribution or the
+      DeviceKit mailing list,
+      see <ulink url="http://lists.freedesktop.org/mailman/listinfo/devkit-devel"/>
+      on how to subscribe.
+    </para>
+  </refsect1>
+
+  <refsect1>
+    <title>SEE ALSO</title>
+    <para>
+      <citerefentry>
+        <refentrytitle>UPower-compat</refentrytitle><manvolnum>7</manvolnum>
+      </citerefentry>,
+      <citerefentry>
+        <refentrytitle>upower-compat</refentrytitle><manvolnum>1</manvolnum>
+      </citerefentry>,
+      <citerefentry>
+        <refentrytitle>dbus-daemon</refentrytitle><manvolnum>1</manvolnum>
+      </citerefentry>,
+    </para>
+  </refsect1>
+</refentry>
diff --git a/doc/man/upowerd.xml b/doc/man/upowerd.xml
deleted file mode 100644
index 511fe16..0000000
--- a/doc/man/upowerd.xml
+++ /dev/null
@@ -1,84 +0,0 @@
-<refentry id="upowerd.8">
-  <refentryinfo>
-    <title>upowerd</title>
-    <date>April 2008</date>
-    <productname>upowerd</productname>
-  </refentryinfo>
-
-  <refmeta>
-    <refentrytitle>upowerd</refentrytitle>
-    <manvolnum>8</manvolnum>
-    <refmiscinfo class="version"></refmiscinfo>
-  </refmeta>
-
-  <refnamediv>
-    <refname>upowerd</refname>
-    <refpurpose>UPower Daemon</refpurpose>
-  </refnamediv>
-
-  <refsynopsisdiv>
-    <cmdsynopsis>
-      <command>upowerd</command>
-      <arg><option>--help</option></arg>
-    </cmdsynopsis>
-  </refsynopsisdiv>
-
-
-  <refsect1><title>DESCRIPTION</title>
-    <para>
-      <emphasis><refentrytitle>upowerd</refentrytitle></emphasis> provides
-      the <emphasis>org.freedesktop.UPower</emphasis> service on the
-      system message bus. Users or administrators should never need to
-      start this daemon as it will be automatically started by
-      <citerefentry><refentrytitle>dbus-daemon</refentrytitle><manvolnum>1</manvolnum></citerefentry>
-      whenever an application calls into the <emphasis>org.freedesktop.UPower</emphasis>
-      service.
-    </para>
-  </refsect1>
-
-  <refsect1>
-    <title>OPTIONS</title>
-    <variablelist>
-      <varlistentry>
-        <term><option>--help</option></term>
-        <listitem>
-          <para>
-            Show help options.
-          </para>
-        </listitem>
-      </varlistentry>
-    </variablelist>
-  </refsect1>
-
-  <refsect1><title>AUTHOR</title>
-    <para>
-      Written by David Zeuthen <email>davidz@redhat.com</email> with
-      a lot of help from many others.
-    </para>
-  </refsect1>
-
-  <refsect1>
-    <title>BUGS</title>
-    <para>
-      Please send bug reports to either the distribution or the
-      DeviceKit mailing list,
-      see <ulink url="http://lists.freedesktop.org/mailman/listinfo/devkit-devel"/>
-      on how to subscribe.
-    </para>
-  </refsect1>
-
-  <refsect1>
-    <title>SEE ALSO</title>
-    <para>
-      <citerefentry>
-        <refentrytitle>UPower</refentrytitle><manvolnum>7</manvolnum>
-      </citerefentry>,
-      <citerefentry>
-        <refentrytitle>upower</refentrytitle><manvolnum>1</manvolnum>
-      </citerefentry>,
-      <citerefentry>
-        <refentrytitle>dbus-daemon</refentrytitle><manvolnum>1</manvolnum>
-      </citerefentry>,
-    </para>
-  </refsect1>
-</refentry>
diff --git a/doc/upower-docs.xml b/doc/upower-docs.xml
index 15b99a3..9281ba6 100644
--- a/doc/upower-docs.xml
+++ b/doc/upower-docs.xml
@@ -102,9 +102,9 @@
 	This part contains the manual pages distributed with UPower.
       </para>
     </partintro>
-    <xi:include href="man/UPower.xml"/>
-    <xi:include href="man/upowerd.xml"/>
-    <xi:include href="man/upower.xml"/>
+    <xi:include href="man/UPower-compat.xml"/>
+    <xi:include href="man/upowerd-compat.xml"/>
+    <xi:include href="man/upower-compat.xml"/>
   </reference>
 
   <index>
diff --git a/etc/Makefile.am b/etc/Makefile.am
index 94d5548..23c066d 100644
--- a/etc/Makefile.am
+++ b/etc/Makefile.am
@@ -1,5 +1,5 @@
 configdir = $(sysconfdir)/UPower
-config_DATA = UPower.conf
+config_DATA = UPower-compat.conf
 
 EXTRA_DIST =						\
 	$(config_DATA)
diff --git a/etc/UPower-compat.conf b/etc/UPower-compat.conf
new file mode 100644
index 0000000..31753cf
--- /dev/null
+++ b/etc/UPower-compat.conf
@@ -0,0 +1,60 @@
+# Only the system vendor should modify this file, ordinary users
+# should not have to change anything.
+
+[UPower]
+
+# This is the smallest amount of time that UPower gives to session and system
+# processes after the suspend or hibernate request is given.
+# If the session power management component uses AboutToSuspend() then the
+# session process can only make this time larger than the value below, never
+# smaller.
+#
+# Reducing this time means the suspend happens quicker, but might also not give
+# some processes enough time to save state.
+#
+# default=1000
+SleepTimeout=1000
+
+# This controls whether hibernate is allowed when using encrypted swap.
+#
+# default=true
+AllowHibernateEncryptedSwap=true
+
+# This controls whether we want the powersave commands to be run when running
+# on battery or plugging AC.
+#
+# default=true
+RunPowersaveCommand=true
+
+# Enable the Watts Up Pro device.
+#
+# The Watts Up Pro contains a generic FTDI USB device without a specific
+# vendor and product ID. When we probe for WUP devices, we can cause
+# the user to get a perplexing "Device or resource busy" error when
+# attempting to use their non-WUP device.
+#
+# The generic FTDI device is known to also be used on:
+#
+# - Sparkfun FT232 breakout board
+# - Parallax Propeller
+#
+# default=false
+EnableWattsUpPro=false
+
+# Poll the kernel for dock state changes.
+#
+# Some drivers are still broken, and do not send out uvents when the
+# connected state changes.
+#
+# default=false
+PollDockDevices=false
+
+# Do we ignore the lid state
+#
+# Some laptops are broken. The lid state is either inverted, or stuck
+# on or off. We can't do much to fix these problems, but this is a way
+# for users to make the laptop panel vanish and for programs like
+# gnome-power-manager to not suspend on system startup.
+#
+# default=false
+IgnoreLid=false
diff --git a/etc/UPower.conf b/etc/UPower.conf
deleted file mode 100644
index 31753cf..0000000
--- a/etc/UPower.conf
+++ /dev/null
@@ -1,60 +0,0 @@
-# Only the system vendor should modify this file, ordinary users
-# should not have to change anything.
-
-[UPower]
-
-# This is the smallest amount of time that UPower gives to session and system
-# processes after the suspend or hibernate request is given.
-# If the session power management component uses AboutToSuspend() then the
-# session process can only make this time larger than the value below, never
-# smaller.
-#
-# Reducing this time means the suspend happens quicker, but might also not give
-# some processes enough time to save state.
-#
-# default=1000
-SleepTimeout=1000
-
-# This controls whether hibernate is allowed when using encrypted swap.
-#
-# default=true
-AllowHibernateEncryptedSwap=true
-
-# This controls whether we want the powersave commands to be run when running
-# on battery or plugging AC.
-#
-# default=true
-RunPowersaveCommand=true
-
-# Enable the Watts Up Pro device.
-#
-# The Watts Up Pro contains a generic FTDI USB device without a specific
-# vendor and product ID. When we probe for WUP devices, we can cause
-# the user to get a perplexing "Device or resource busy" error when
-# attempting to use their non-WUP device.
-#
-# The generic FTDI device is known to also be used on:
-#
-# - Sparkfun FT232 breakout board
-# - Parallax Propeller
-#
-# default=false
-EnableWattsUpPro=false
-
-# Poll the kernel for dock state changes.
-#
-# Some drivers are still broken, and do not send out uvents when the
-# connected state changes.
-#
-# default=false
-PollDockDevices=false
-
-# Do we ignore the lid state
-#
-# Some laptops are broken. The lid state is either inverted, or stuck
-# on or off. We can't do much to fix these problems, but this is a way
-# for users to make the laptop panel vanish and for programs like
-# gnome-power-manager to not suspend on system startup.
-#
-# default=false
-IgnoreLid=false
diff --git a/libupower-glib/Makefile.am b/libupower-glib/Makefile.am
index 5c03409..7a4d689 100644
--- a/libupower-glib/Makefile.am
+++ b/libupower-glib/Makefile.am
@@ -6,7 +6,7 @@ AM_CPPFLAGS = \
 	-I$(top_srcdir)/libupower-glib				\
 	-DUP_COMPILATION					\
 	-DUPOWER_ENABLE_DEPRECATED				\
-	-DG_LOG_DOMAIN=\"libupower-glib\"			\
+	-DG_LOG_DOMAIN=\"libupower-glib-compat\"		\
 	-DPACKAGE_DATA_DIR=\""$(datadir)"\"			\
 	-DPACKAGE_LOCALE_DIR=\""$(prefix)/$(DATADIRNAME)/locale"\"
 
@@ -16,10 +16,10 @@ INTROSPECTION_SCANNER_ARGS = --add-include-path=$(srcdir)
 INTROSPECTION_COMPILER_ARGS = --includedir=$(srcdir)
 
 lib_LTLIBRARIES =						\
-	libupower-glib.la
+	libupower-glib-compat.la
 
-libupower_glib_includedir = $(includedir)/libupower-glib
-libupower_glib_include_HEADERS =				\
+libupower_glib_compat_includedir = $(includedir)/libupower-glib-compat
+libupower_glib_compat_include_HEADERS =				\
 	upower.h						\
 	up-version.h						\
 	up-types.h						\
@@ -31,7 +31,7 @@ libupower_glib_include_HEADERS =				\
 	up-wakeups.h						\
 	up-client.h
 
-libupower_glib_la_SOURCES =					\
+libupower_glib_compat_la_SOURCES =					\
 	up-types.c						\
 	up-client.c						\
 	up-wakeups.c						\
@@ -41,18 +41,18 @@ libupower_glib_la_SOURCES =					\
 	up-history-item.c					\
 	up-device.c
 
-libupower_glib_la_LIBADD =					\
+libupower_glib_compat_la_LIBADD =					\
 	$(INTLLIBS)						\
 	$(GLIB_LIBS)						\
 	$(DBUS_GLIB_LIBS)
 
-libupower_glib_la_LDFLAGS =					\
+libupower_glib_compat_la_LDFLAGS =					\
 	-version-info $(LT_CURRENT):$(LT_REVISION):$(LT_AGE)	\
 	-export-dynamic						\
 	-no-undefined						\
 	-export-symbols-regex '^up_.*'
 
-libupower_glib_la_CFLAGS =					\
+libupower_glib_compat_la_CFLAGS =					\
 	$(WARNINGFLAGS_C)					\
 	$(NULL)
 
@@ -62,16 +62,16 @@ EXTRA_DIST =							\
 CLEANFILES = $(BUILT_SOURCES)
 
 if HAVE_INTROSPECTION
-introspection_sources = $(libupower_glib_include_HEADERS) $(libupower_glib_la_SOURCES)
-
-UPowerGlib-1.0.gir: libupower-glib.la
-UPowerGlib_1_0_gir_INCLUDES = GObject-2.0 Gio-2.0
-UPowerGlib_1_0_gir_CFLAGS = $(AM_CPPFLAGS)
-UPowerGlib_1_0_gir_SCANNERFLAGS = --identifier-prefix=Up --symbol-prefix=up_ --warn-all --add-include-path=$(srcdir)
-UPowerGlib_1_0_gir_LIBS = libupower-glib.la
-UPowerGlib_1_0_gir_FILES = $(introspection_sources)
-UPowerGlib_1_0_gir_NAMESPACE = UPowerGlib
-INTROSPECTION_GIRS += UPowerGlib-1.0.gir
+introspection_sources = $(libupower_glib_compat_include_HEADERS) $(libupower_glib_compat_la_SOURCES)
+
+UPowerGlibCompat-1.0.gir: libupower-glib-compat.la
+UPowerGlibCompat_1_0_gir_INCLUDES = GObject-2.0 Gio-2.0
+UPowerGlibCompat_1_0_gir_CFLAGS = $(AM_CPPFLAGS)
+UPowerGlibCompat_1_0_gir_SCANNERFLAGS = --identifier-prefix=Up --symbol-prefix=up_ --warn-all --add-include-path=$(srcdir)
+UPowerGlibCompat_1_0_gir_LIBS = libupower-glib-compat.la
+UPowerGlibCompat_1_0_gir_FILES = $(introspection_sources)
+UPowerGlibCompat_1_0_gir_NAMESPACE = UPowerGlibCompat
+INTROSPECTION_GIRS += UPowerGlibCompat-1.0.gir
 
 girdir = $(datadir)/gir-1.0
 gir_DATA = $(INTROSPECTION_GIRS)
diff --git a/libupower-glib/up-client.c b/libupower-glib/up-client.c
index 26960fe..094a7d8 100644
--- a/libupower-glib/up-client.c
+++ b/libupower-glib/up-client.c
@@ -331,7 +331,7 @@ up_client_get_properties_sync (UpClient *client, GCancellable *cancellable, GErr
 	if (error != NULL)
 		*error = NULL;
 	ret = dbus_g_proxy_call (client->priv->prop_proxy, "GetAll", error,
-				 G_TYPE_STRING, "org.freedesktop.UPower",
+				 G_TYPE_STRING, "org.freedesktop.UPowerCompat",
 				 G_TYPE_INVALID,
 				 dbus_g_type_get_map ("GHashTable", G_TYPE_STRING, G_TYPE_VALUE), &props,
 				 G_TYPE_INVALID);
@@ -1066,9 +1066,9 @@ up_client_init (UpClient *client)
 
 	/* connect to main interface */
 	client->priv->proxy = dbus_g_proxy_new_for_name (client->priv->bus,
-							 "org.freedesktop.UPower",
-							 "/org/freedesktop/UPower",
-							 "org.freedesktop.UPower");
+							 "org.freedesktop.UPowerCompat",
+							 "/org/freedesktop/UPowerCompat",
+							 "org.freedesktop.UPowerCompat");
 	if (client->priv->proxy == NULL) {
 		g_warning ("Couldn't connect to proxy");
 		goto out;
@@ -1076,8 +1076,8 @@ up_client_init (UpClient *client)
 
 	/* connect to properties interface */
 	client->priv->prop_proxy = dbus_g_proxy_new_for_name (client->priv->bus,
-							      "org.freedesktop.UPower",
-							      "/org/freedesktop/UPower",
+							      "org.freedesktop.UPowerCompat",
+							      "/org/freedesktop/UPowerCompat",
 							      "org.freedesktop.DBus.Properties");
 	if (client->priv->prop_proxy == NULL) {
 		g_warning ("Couldn't connect to proxy");
diff --git a/libupower-glib/up-device.c b/libupower-glib/up-device.c
index 72cf530..495f14f 100644
--- a/libupower-glib/up-device.c
+++ b/libupower-glib/up-device.c
@@ -145,7 +145,7 @@ up_device_get_device_properties (UpDevice *device, GError **error)
 	GHashTable *hash_table = NULL;
 
 	ret = dbus_g_proxy_call (device->priv->proxy_props, "GetAll", &error_local,
-				 G_TYPE_STRING, "org.freedesktop.UPower.Device",
+				 G_TYPE_STRING, "org.freedesktop.UPowerCompat.Device",
 				 G_TYPE_INVALID,
 				 dbus_g_type_get_map ("GHashTable", G_TYPE_STRING, G_TYPE_VALUE),
 				 &hash_table,
@@ -309,7 +309,7 @@ up_device_set_object_path_sync (UpDevice *device, const gchar *object_path, GCan
 	}
 
 	/* connect to the correct path for properties */
-	proxy_props = dbus_g_proxy_new_for_name (device->priv->bus, "org.freedesktop.UPower",
+	proxy_props = dbus_g_proxy_new_for_name (device->priv->bus, "org.freedesktop.UPowerCompat",
 						 object_path, "org.freedesktop.DBus.Properties");
 	if (proxy_props == NULL) {
 		g_set_error_literal (error, 1, 0, "Couldn't connect to proxy");
@@ -317,8 +317,8 @@ up_device_set_object_path_sync (UpDevice *device, const gchar *object_path, GCan
 	}
 
 	/* connect to the correct path for all the other methods */
-	proxy_device = dbus_g_proxy_new_for_name (device->priv->bus, "org.freedesktop.UPower",
-						  object_path, "org.freedesktop.UPower.Device");
+	proxy_device = dbus_g_proxy_new_for_name (device->priv->bus, "org.freedesktop.UPowerCompat",
+						  object_path, "org.freedesktop.UPowerCompat.Device");
 	if (proxy_device == NULL) {
 		g_set_error_literal (error, 1, 0, "Couldn't connect to proxy");
 		goto out;
diff --git a/libupower-glib/up-wakeups.c b/libupower-glib/up-wakeups.c
index e3d3475..77cba52 100644
--- a/libupower-glib/up-wakeups.c
+++ b/libupower-glib/up-wakeups.c
@@ -205,7 +205,7 @@ up_wakeups_ensure_properties (UpWakeups *wakeups)
 
 	error = NULL;
 	ret = dbus_g_proxy_call (wakeups->priv->prop_proxy, "GetAll", &error,
-				 G_TYPE_STRING, "org.freedesktop.UPower.Wakeups",
+				 G_TYPE_STRING, "org.freedesktop.UPowerCompat.Wakeups",
 				 G_TYPE_INVALID,
 				 dbus_g_type_get_map ("GHashTable", G_TYPE_STRING, G_TYPE_VALUE), &props,
 				 G_TYPE_INVALID);
@@ -333,8 +333,8 @@ up_wakeups_init (UpWakeups *wakeups)
 
 	/* connect to properties interface */
 	wakeups->priv->prop_proxy = dbus_g_proxy_new_for_name (wakeups->priv->bus,
-							      "org.freedesktop.UPower",
-							      "/org/freedesktop/UPower/Wakeups",
+							      "org.freedesktop.UPowerCompat",
+							      "/org/freedesktop/UPowerCompat/Wakeups",
 							      "org.freedesktop.DBus.Properties");
 	if (wakeups->priv->prop_proxy == NULL) {
 		g_warning ("Couldn't connect to proxy");
@@ -343,9 +343,9 @@ up_wakeups_init (UpWakeups *wakeups)
 
 	/* connect to main interface */
 	wakeups->priv->proxy = dbus_g_proxy_new_for_name (wakeups->priv->bus,
-							 "org.freedesktop.UPower",
-							 "/org/freedesktop/UPower/Wakeups",
-							 "org.freedesktop.UPower.Wakeups");
+							 "org.freedesktop.UPowerCompat",
+							 "/org/freedesktop/UPowerCompat/Wakeups",
+							 "org.freedesktop.UPowerCompat.Wakeups");
 	if (wakeups->priv->proxy == NULL) {
 		g_warning ("Couldn't connect to proxy");
 		goto out;
diff --git a/po/POTFILES.in b/po/POTFILES.in
index 77b0a8d..e91b907 100644
--- a/po/POTFILES.in
+++ b/po/POTFILES.in
@@ -1,7 +1,7 @@
 # List of source files containing translatable strings.
 # Please keep this file sorted alphabetically.
 [encoding: UTF-8]
-policy/org.freedesktop.upower.policy.in
-policy/org.freedesktop.upower.qos.policy.in
+policy/org.freedesktop.upower_compat.policy.in
+policy/org.freedesktop.upower_compat.qos.policy.in
 src/up-main.c
 tools/up-tool.c
diff --git a/policy/Makefile.am b/policy/Makefile.am
index 7a25230..afb456c 100644
--- a/policy/Makefile.am
+++ b/policy/Makefile.am
@@ -1,19 +1,19 @@
 polkit_policydir = $(datadir)/polkit-1/actions
 polkit_policy_DATA =					\
-	org.freedesktop.upower.policy		\
-	org.freedesktop.upower.qos.policy
+	org.freedesktop.upower_compat.policy		\
+	org.freedesktop.upower_compat.qos.policy
 
 # You will need a recent intltool or the patch from this bug
 # http://bugzilla.gnome.org/show_bug.cgi?id=462312
 @INTLTOOL_POLICY_RULE@
 
 EXTRA_DIST =						\
-	org.freedesktop.upower.policy.in	\
-	org.freedesktop.upower.qos.policy.in
+	org.freedesktop.upower_compat.policy.in	\
+	org.freedesktop.upower_compat.qos.policy.in
 
 DISTCLEANFILES =					\
-	org.freedesktop.upower.policy		\
-	org.freedesktop.upower.qos.policy
+	org.freedesktop.upower_compat.policy		\
+	org.freedesktop.upower_compat.qos.policy
 
 clean-local :
 	rm -f *~
diff --git a/policy/org.freedesktop.upower.policy.in b/policy/org.freedesktop.upower.policy.in
deleted file mode 100644
index 2800701..0000000
--- a/policy/org.freedesktop.upower.policy.in
+++ /dev/null
@@ -1,41 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-
-<!DOCTYPE policyconfig PUBLIC
- "-//freedesktop//DTD PolicyKit Policy Configuration 1.0//EN"
- "http://www.freedesktop.org/standards/PolicyKit/1.0/policyconfig.dtd">
-
-<!--
-Policy definitions for UPower
-
-Copyright (c) 2008 David Zeuthen <david@fubar.dk>
-Copyright (c) 2008-2010 Richard Hughes <richard@hughsie.com>
-
-NOTE: If you make changes to this file, make sure to validate the file
-using the polkit-policy-file-validate(1) tool. Changes made to this
-file are instantly applied.
--->
-
-<policyconfig>
-  <vendor>The UPower Project</vendor>
-  <vendor_url>http://upower.freedesktop.org/</vendor_url>
-  <icon_name>system-suspend</icon_name>
-
-  <action id="org.freedesktop.upower.suspend">
-    <_description>Suspend the system</_description>
-    <_message>Authentication is required to suspend the system</_message>
-    <defaults>
-      <allow_inactive>no</allow_inactive>
-      <allow_active>yes</allow_active>
-    </defaults>
-  </action>
-
-  <action id="org.freedesktop.upower.hibernate">
-    <_description>Hibernate the system</_description>
-    <_message>Authentication is required to hibernate the system</_message>
-    <defaults>
-      <allow_inactive>no</allow_inactive>
-      <allow_active>yes</allow_active>
-    </defaults>
-  </action>
-
-</policyconfig>
diff --git a/policy/org.freedesktop.upower.qos.policy.in b/policy/org.freedesktop.upower.qos.policy.in
deleted file mode 100644
index fdc7b90..0000000
--- a/policy/org.freedesktop.upower.qos.policy.in
+++ /dev/null
@@ -1,59 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-
-<!DOCTYPE policyconfig PUBLIC
- "-//freedesktop//DTD PolicyKit Policy Configuration 1.0//EN"
- "http://www.freedesktop.org/standards/PolicyKit/1.0/policyconfig.dtd">
-
-<!--
-Policy definitions for UPower
-
-Copyright (c) 2008 David Zeuthen <david@fubar.dk>
-Copyright (c) 2008-2010 Richard Hughes <richard@hughsie.com>
-
-NOTE: If you make changes to this file, make sure to validate the file
-using the polkit-policy-file-validate(1) tool. Changes made to this
-file are instantly applied.
--->
-
-<policyconfig>
-  <vendor>The UPower Project</vendor>
-  <vendor_url>http://upower.freedesktop.org/</vendor_url>
-  <icon_name>system-suspend</icon_name>
-
-  <action id="org.freedesktop.upower.qos.request-latency">
-    <_description>Set the required latency of an application</_description>
-    <_message>Authentication is required to set the required latency of an application</_message>
-    <defaults>
-      <allow_inactive>no</allow_inactive>
-      <allow_active>yes</allow_active>
-    </defaults>
-  </action>
-
-  <action id="org.freedesktop.upower.qos.request-latency-persistent">
-    <_description>Set a persistent latency setting</_description>
-    <_message>Authentication is required to set a persistent latency setting</_message>
-    <defaults>
-      <allow_inactive>no</allow_inactive>
-      <allow_active>yes</allow_active>
-    </defaults>
-  </action>
-
-  <action id="org.freedesktop.upower.qos.set-minimum-latency">
-    <_description>Set administrator settings for latency control</_description>
-    <_message>Authentication is required to set administrator settings for latency control</_message>
-    <defaults>
-      <allow_inactive>no</allow_inactive>
-      <allow_active>auth_admin</allow_active>
-    </defaults>
-  </action>
-
-  <action id="org.freedesktop.upower.qos.cancel-request">
-    <_description>Cancel a latency request</_description>
-    <_message>Authentication is required to cancel a latency request</_message>
-    <defaults>
-      <allow_inactive>no</allow_inactive>
-      <allow_active>auth_admin</allow_active>
-    </defaults>
-  </action>
-
-</policyconfig>
diff --git a/policy/org.freedesktop.upower_compat.policy.in b/policy/org.freedesktop.upower_compat.policy.in
new file mode 100644
index 0000000..9d84a26
--- /dev/null
+++ b/policy/org.freedesktop.upower_compat.policy.in
@@ -0,0 +1,41 @@
+<?xml version="1.0" encoding="utf-8"?>
+
+<!DOCTYPE policyconfig PUBLIC
+ "-//freedesktop//DTD PolicyKit Policy Configuration 1.0//EN"
+ "http://www.freedesktop.org/standards/PolicyKit/1.0/policyconfig.dtd">
+
+<!--
+Policy definitions for UPower
+
+Copyright (c) 2008 David Zeuthen <david@fubar.dk>
+Copyright (c) 2008-2010 Richard Hughes <richard@hughsie.com>
+
+NOTE: If you make changes to this file, make sure to validate the file
+using the polkit-policy-file-validate(1) tool. Changes made to this
+file are instantly applied.
+-->
+
+<policyconfig>
+  <vendor>The UPower Project</vendor>
+  <vendor_url>http://upower.freedesktop.org/</vendor_url>
+  <icon_name>system-suspend</icon_name>
+
+  <action id="org.freedesktop.upower_compat.suspend">
+    <_description>Suspend the system</_description>
+    <_message>Authentication is required to suspend the system</_message>
+    <defaults>
+      <allow_inactive>no</allow_inactive>
+      <allow_active>yes</allow_active>
+    </defaults>
+  </action>
+
+  <action id="org.freedesktop.upower_compat.hibernate">
+    <_description>Hibernate the system</_description>
+    <_message>Authentication is required to hibernate the system</_message>
+    <defaults>
+      <allow_inactive>no</allow_inactive>
+      <allow_active>yes</allow_active>
+    </defaults>
+  </action>
+
+</policyconfig>
diff --git a/policy/org.freedesktop.upower_compat.qos.policy.in b/policy/org.freedesktop.upower_compat.qos.policy.in
new file mode 100644
index 0000000..aa5d1a2
--- /dev/null
+++ b/policy/org.freedesktop.upower_compat.qos.policy.in
@@ -0,0 +1,59 @@
+<?xml version="1.0" encoding="utf-8"?>
+
+<!DOCTYPE policyconfig PUBLIC
+ "-//freedesktop//DTD PolicyKit Policy Configuration 1.0//EN"
+ "http://www.freedesktop.org/standards/PolicyKit/1.0/policyconfig.dtd">
+
+<!--
+Policy definitions for UPower
+
+Copyright (c) 2008 David Zeuthen <david@fubar.dk>
+Copyright (c) 2008-2010 Richard Hughes <richard@hughsie.com>
+
+NOTE: If you make changes to this file, make sure to validate the file
+using the polkit-policy-file-validate(1) tool. Changes made to this
+file are instantly applied.
+-->
+
+<policyconfig>
+  <vendor>The UPower Project</vendor>
+  <vendor_url>http://upower.freedesktop.org/</vendor_url>
+  <icon_name>system-suspend</icon_name>
+
+  <action id="org.freedesktop.upower_compat.qos.request-latency">
+    <_description>Set the required latency of an application</_description>
+    <_message>Authentication is required to set the required latency of an application</_message>
+    <defaults>
+      <allow_inactive>no</allow_inactive>
+      <allow_active>yes</allow_active>
+    </defaults>
+  </action>
+
+  <action id="org.freedesktop.upower_compat.qos.request-latency-persistent">
+    <_description>Set a persistent latency setting</_description>
+    <_message>Authentication is required to set a persistent latency setting</_message>
+    <defaults>
+      <allow_inactive>no</allow_inactive>
+      <allow_active>yes</allow_active>
+    </defaults>
+  </action>
+
+  <action id="org.freedesktop.upower_compat.qos.set-minimum-latency">
+    <_description>Set administrator settings for latency control</_description>
+    <_message>Authentication is required to set administrator settings for latency control</_message>
+    <defaults>
+      <allow_inactive>no</allow_inactive>
+      <allow_active>auth_admin</allow_active>
+    </defaults>
+  </action>
+
+  <action id="org.freedesktop.upower_compat.qos.cancel-request">
+    <_description>Cancel a latency request</_description>
+    <_message>Authentication is required to cancel a latency request</_message>
+    <defaults>
+      <allow_inactive>no</allow_inactive>
+      <allow_active>auth_admin</allow_active>
+    </defaults>
+  </action>
+
+</policyconfig>
diff --git a/rules/95-upower-battery-recall-dell.rules b/rules/95-upower-battery-recall-dell.rules
deleted file mode 100644
index 45c44e9..0000000
--- a/rules/95-upower-battery-recall-dell.rules
+++ /dev/null
@@ -1,61 +0,0 @@
-##############################################################################################################
-# Battery recall notices: Dell
-#
-# These are properties defining the behavior:
-#  UPOWER_RECALL_NOTICE
-#  UPOWER_RECALL_VENDOR
-#  UPOWER_RECALL_URL
-#
-
-# only match power_supply devices
-SUBSYSTEM!="power_supply", GOTO="up_battery_recall_dell_end"
-
-# only match batteries
-ATTR{type}!="Battery", GOTO="up_battery_recall_dell_end"
-
-# only match correct manufacturer
-ATTR{manufacturer}!="Dell", GOTO="up_battery_recall_dell_end"
-
-ATTR{model_name}=="1K055", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="C5446", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="F2100", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="KD494", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="W5915", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="Y1333", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="3K590", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="C6269", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="F5132", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="OR331", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="X5308", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="Y4500", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="5P474", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="C6270", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="GD785", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="M3006", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="X5329", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="Y5466", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="6P922", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="D2961", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="H3191", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="RD857", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="X5332", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="C2603", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="D5555", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="J1524", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="TD349", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="X5333", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="C5339", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="D6024", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="JD616", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="U5867", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="X5875", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="C5340", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="D6025", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="JD617", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="U5882", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="X5877", ENV{UPOWER_RECALL_NOTICE}="1"
-
-ENV{UPOWER_RECALL_NOTICE}=="1", ENV{UPOWER_RECALL_VENDOR}="Dell", ENV{UPOWER_RECALL_URL}="https://www.dellbatteryprogram.com"
-
-LABEL="up_battery_recall_dell_end"
-
diff --git a/rules/95-upower-battery-recall-fujitsu.rules b/rules/95-upower-battery-recall-fujitsu.rules
deleted file mode 100644
index 21e5f6d..0000000
--- a/rules/95-upower-battery-recall-fujitsu.rules
+++ /dev/null
@@ -1,31 +0,0 @@
-##############################################################################################################
-# Battery recall notices: Fujitsu
-#
-# These are properties defining the behavior:
-#  UPOWER_RECALL_NOTICE
-#  UPOWER_RECALL_VENDOR
-#  UPOWER_RECALL_URL
-#
-
-# only match power_supply devices
-SUBSYSTEM!="power_supply", GOTO="up_battery_recall_fujitsu_end"
-
-# only match batteries
-ATTR{type}!="Battery", GOTO="up_battery_recall_fujitsu_end"
-
-# only match correct manufacturer
-ATTR{manufacturer}!="Fujitsu", GOTO="up_battery_recall_fujitsu_end"
-
-ATTR{model_name}=="CP255100", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="CP255108", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="CP229720", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="CP229725", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="CP234003", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="CP234019", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="CP283030", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="CP267910", ENV{UPOWER_RECALL_NOTICE}="1"
-
-ENV{UPOWER_RECALL_NOTICE}=="1", ENV{UPOWER_RECALL_VENDOR}="Fujitsu", ENV{UPOWER_RECALL_URL}="http://www.computers.us.fujitsu.com/battery/"
-
-LABEL="up_battery_recall_fujitsu_end"
-
diff --git a/rules/95-upower-battery-recall-gateway.rules b/rules/95-upower-battery-recall-gateway.rules
deleted file mode 100644
index b788779..0000000
--- a/rules/95-upower-battery-recall-gateway.rules
+++ /dev/null
@@ -1,28 +0,0 @@
-##############################################################################################################
-# Battery recall notices: Gateway
-#
-# These are properties defining the behavior:
-#  UPOWER_RECALL_NOTICE
-#  UPOWER_RECALL_VENDOR
-#  UPOWER_RECALL_URL
-#
-
-# only match power_supply devices
-SUBSYSTEM!="power_supply", GOTO="up_battery_recall_gateway_end"
-
-# only match batteries
-ATTR{type}!="Battery", GOTO="up_battery_recall_gateway_end"
-
-# only match correct manufacturer
-ATTR{manufacturer}!="Gateway", GOTO="up_battery_recall_gateway_end"
-
-ATTR{model_name}=="916C4610F", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="916C4720F", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="916C4730F", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="916C5010F", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="W230", ENV{UPOWER_RECALL_NOTICE}="1"
-
-ENV{UPOWER_RECALL_NOTICE}=="1", ENV{UPOWER_RECALL_VENDOR}="Gateway", ENV{UPOWER_RECALL_URL}="http://www.gateway.com/battery/\n"
-
-LABEL="up_battery_recall_gateway_end"
-
diff --git a/rules/95-upower-battery-recall-ibm.rules b/rules/95-upower-battery-recall-ibm.rules
deleted file mode 100644
index 860a41c..0000000
--- a/rules/95-upower-battery-recall-ibm.rules
+++ /dev/null
@@ -1,38 +0,0 @@
-##############################################################################################################
-# Battery recall notices: IBM
-#
-# These are properties defining the behavior:
-#  UPOWER_RECALL_NOTICE
-#  UPOWER_RECALL_VENDOR
-#  UPOWER_RECALL_URL
-#
-
-# only match power_supply devices
-SUBSYSTEM!="power_supply", GOTO="up_battery_recall_ibm_end"
-
-# only match batteries
-ATTR{type}!="Battery", GOTO="up_battery_recall_ibm_end"
-
-# only match correct manufacturer
-ATTR{manufacturer}!="SONY", GOTO="up_battery_recall_ibm_end"
-
-# only recalled on some particular models
-ATTR{[dmi/id]product_version}!="*R60*|*T60*|*Z60m*|*Z61e*|*Z61m*|*Z61p*", GOTO="up_battery_recall_ibm_end"
-
-ATTR{model_name}=="92P1072", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="92P1073", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="92P1088", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="92P1089", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="92P1142", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="92P1141", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="92P1170", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="92P1169", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="93P5028", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="92P1174", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="92P1173", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="93P5030", ENV{UPOWER_RECALL_NOTICE}="1"
-
-ENV{UPOWER_RECALL_NOTICE}=="1", ENV{UPOWER_RECALL_VENDOR}="LENOVO", ENV{UPOWER_RECALL_URL}="http://www.lenovo.com/batteryprogram"
-
-LABEL="up_battery_recall_ibm_end"
-
diff --git a/rules/95-upower-battery-recall-lenovo.rules b/rules/95-upower-battery-recall-lenovo.rules
deleted file mode 100644
index 04db19e..0000000
--- a/rules/95-upower-battery-recall-lenovo.rules
+++ /dev/null
@@ -1,24 +0,0 @@
-##############################################################################################################
-# Battery recall notices: Lenovo
-#
-# These are properties defining the behavior:
-#  UPOWER_RECALL_NOTICE
-#  UPOWER_RECALL_VENDOR
-#  UPOWER_RECALL_URL
-#
-
-# only match power_supply devices
-SUBSYSTEM!="power_supply", GOTO="up_battery_recall_lenovo_end"
-
-# only match batteries
-ATTR{type}!="Battery", GOTO="up_battery_recall_lenovo_end"
-
-# only match correct manufacturer
-ATTR{manufacturer}!="SANYO", GOTO="up_battery_recall_lenovo_end"
-
-ATTR{model_name}=="92P1131", ENV{UPOWER_RECALL_NOTICE}="1"
-
-ENV{UPOWER_RECALL_NOTICE}=="1", ENV{UPOWER_RECALL_VENDOR}="LENOVO", ENV{UPOWER_RECALL_URL}="http://www.lenovo.com/batteryprogram"
-
-LABEL="up_battery_recall_lenovo_end"
-
diff --git a/rules/95-upower-battery-recall-toshiba.rules b/rules/95-upower-battery-recall-toshiba.rules
deleted file mode 100644
index 8c7483f..0000000
--- a/rules/95-upower-battery-recall-toshiba.rules
+++ /dev/null
@@ -1,36 +0,0 @@
-##############################################################################################################
-# Battery recall notices: Toshiba
-#
-# These are properties defining the behavior:
-#  UPOWER_RECALL_NOTICE
-#  UPOWER_RECALL_VENDOR
-#  UPOWER_RECALL_URL
-#
-
-# only match power_supply devices
-SUBSYSTEM!="power_supply", GOTO="up_battery_recall_toshiba_end"
-
-# only match batteries
-ATTR{type}!="Battery", GOTO="up_battery_recall_toshiba_end"
-
-# only match correct manufacturer
-ATTR{manufacturer}!="TOSHIBA", GOTO="up_battery_recall_toshiba_end"
-
-ATTR{model_name}=="PA3191U", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="PA3191U", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="PA3356U", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="PA3356U", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="PA3475U", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="PA3476U", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="PA3399U", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="PA3451U", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="PA3383U", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="PA3395U", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="PA3399U", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="PA3400U", ENV{UPOWER_RECALL_NOTICE}="1"
-ATTR{model_name}=="PA3421U", ENV{UPOWER_RECALL_NOTICE}="1"
-
-ENV{UPOWER_RECALL_NOTICE}=="1", ENV{UPOWER_RECALL_VENDOR}="Toshiba", ENV{UPOWER_RECALL_URL}="http://bxinfo.toshiba.com/"
-
-LABEL="up_battery_recall_toshiba_end"
-
diff --git a/rules/95-upower-compat-battery-recall-dell.rules b/rules/95-upower-compat-battery-recall-dell.rules
new file mode 100644
index 0000000..45c44e9
--- /dev/null
+++ b/rules/95-upower-compat-battery-recall-dell.rules
@@ -0,0 +1,61 @@
+##############################################################################################################
+# Battery recall notices: Dell
+#
+# These are properties defining the behavior:
+#  UPOWER_RECALL_NOTICE
+#  UPOWER_RECALL_VENDOR
+#  UPOWER_RECALL_URL
+#
+
+# only match power_supply devices
+SUBSYSTEM!="power_supply", GOTO="up_battery_recall_dell_end"
+
+# only match batteries
+ATTR{type}!="Battery", GOTO="up_battery_recall_dell_end"
+
+# only match correct manufacturer
+ATTR{manufacturer}!="Dell", GOTO="up_battery_recall_dell_end"
+
+ATTR{model_name}=="1K055", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="C5446", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="F2100", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="KD494", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="W5915", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="Y1333", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="3K590", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="C6269", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="F5132", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="OR331", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="X5308", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="Y4500", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="5P474", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="C6270", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="GD785", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="M3006", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="X5329", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="Y5466", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="6P922", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="D2961", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="H3191", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="RD857", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="X5332", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="C2603", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="D5555", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="J1524", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="TD349", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="X5333", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="C5339", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="D6024", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="JD616", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="U5867", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="X5875", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="C5340", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="D6025", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="JD617", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="U5882", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="X5877", ENV{UPOWER_RECALL_NOTICE}="1"
+
+ENV{UPOWER_RECALL_NOTICE}=="1", ENV{UPOWER_RECALL_VENDOR}="Dell", ENV{UPOWER_RECALL_URL}="https://www.dellbatteryprogram.com"
+
+LABEL="up_battery_recall_dell_end"
+
diff --git a/rules/95-upower-compat-battery-recall-fujitsu.rules b/rules/95-upower-compat-battery-recall-fujitsu.rules
new file mode 100644
index 0000000..21e5f6d
--- /dev/null
+++ b/rules/95-upower-compat-battery-recall-fujitsu.rules
@@ -0,0 +1,31 @@
+##############################################################################################################
+# Battery recall notices: Fujitsu
+#
+# These are properties defining the behavior:
+#  UPOWER_RECALL_NOTICE
+#  UPOWER_RECALL_VENDOR
+#  UPOWER_RECALL_URL
+#
+
+# only match power_supply devices
+SUBSYSTEM!="power_supply", GOTO="up_battery_recall_fujitsu_end"
+
+# only match batteries
+ATTR{type}!="Battery", GOTO="up_battery_recall_fujitsu_end"
+
+# only match correct manufacturer
+ATTR{manufacturer}!="Fujitsu", GOTO="up_battery_recall_fujitsu_end"
+
+ATTR{model_name}=="CP255100", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="CP255108", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="CP229720", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="CP229725", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="CP234003", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="CP234019", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="CP283030", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="CP267910", ENV{UPOWER_RECALL_NOTICE}="1"
+
+ENV{UPOWER_RECALL_NOTICE}=="1", ENV{UPOWER_RECALL_VENDOR}="Fujitsu", ENV{UPOWER_RECALL_URL}="http://www.computers.us.fujitsu.com/battery/"
+
+LABEL="up_battery_recall_fujitsu_end"
+
diff --git a/rules/95-upower-compat-battery-recall-gateway.rules b/rules/95-upower-compat-battery-recall-gateway.rules
new file mode 100644
index 0000000..b788779
--- /dev/null
+++ b/rules/95-upower-compat-battery-recall-gateway.rules
@@ -0,0 +1,28 @@
+##############################################################################################################
+# Battery recall notices: Gateway
+#
+# These are properties defining the behavior:
+#  UPOWER_RECALL_NOTICE
+#  UPOWER_RECALL_VENDOR
+#  UPOWER_RECALL_URL
+#
+
+# only match power_supply devices
+SUBSYSTEM!="power_supply", GOTO="up_battery_recall_gateway_end"
+
+# only match batteries
+ATTR{type}!="Battery", GOTO="up_battery_recall_gateway_end"
+
+# only match correct manufacturer
+ATTR{manufacturer}!="Gateway", GOTO="up_battery_recall_gateway_end"
+
+ATTR{model_name}=="916C4610F", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="916C4720F", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="916C4730F", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="916C5010F", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="W230", ENV{UPOWER_RECALL_NOTICE}="1"
+
+ENV{UPOWER_RECALL_NOTICE}=="1", ENV{UPOWER_RECALL_VENDOR}="Gateway", ENV{UPOWER_RECALL_URL}="http://www.gateway.com/battery/\n"
+
+LABEL="up_battery_recall_gateway_end"
+
diff --git a/rules/95-upower-compat-battery-recall-ibm.rules b/rules/95-upower-compat-battery-recall-ibm.rules
new file mode 100644
index 0000000..860a41c
--- /dev/null
+++ b/rules/95-upower-compat-battery-recall-ibm.rules
@@ -0,0 +1,38 @@
+##############################################################################################################
+# Battery recall notices: IBM
+#
+# These are properties defining the behavior:
+#  UPOWER_RECALL_NOTICE
+#  UPOWER_RECALL_VENDOR
+#  UPOWER_RECALL_URL
+#
+
+# only match power_supply devices
+SUBSYSTEM!="power_supply", GOTO="up_battery_recall_ibm_end"
+
+# only match batteries
+ATTR{type}!="Battery", GOTO="up_battery_recall_ibm_end"
+
+# only match correct manufacturer
+ATTR{manufacturer}!="SONY", GOTO="up_battery_recall_ibm_end"
+
+# only recalled on some particular models
+ATTR{[dmi/id]product_version}!="*R60*|*T60*|*Z60m*|*Z61e*|*Z61m*|*Z61p*", GOTO="up_battery_recall_ibm_end"
+
+ATTR{model_name}=="92P1072", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="92P1073", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="92P1088", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="92P1089", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="92P1142", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="92P1141", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="92P1170", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="92P1169", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="93P5028", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="92P1174", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="92P1173", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="93P5030", ENV{UPOWER_RECALL_NOTICE}="1"
+
+ENV{UPOWER_RECALL_NOTICE}=="1", ENV{UPOWER_RECALL_VENDOR}="LENOVO", ENV{UPOWER_RECALL_URL}="http://www.lenovo.com/batteryprogram"
+
+LABEL="up_battery_recall_ibm_end"
+
diff --git a/rules/95-upower-compat-battery-recall-lenovo.rules b/rules/95-upower-compat-battery-recall-lenovo.rules
new file mode 100644
index 0000000..04db19e
--- /dev/null
+++ b/rules/95-upower-compat-battery-recall-lenovo.rules
@@ -0,0 +1,24 @@
+##############################################################################################################
+# Battery recall notices: Lenovo
+#
+# These are properties defining the behavior:
+#  UPOWER_RECALL_NOTICE
+#  UPOWER_RECALL_VENDOR
+#  UPOWER_RECALL_URL
+#
+
+# only match power_supply devices
+SUBSYSTEM!="power_supply", GOTO="up_battery_recall_lenovo_end"
+
+# only match batteries
+ATTR{type}!="Battery", GOTO="up_battery_recall_lenovo_end"
+
+# only match correct manufacturer
+ATTR{manufacturer}!="SANYO", GOTO="up_battery_recall_lenovo_end"
+
+ATTR{model_name}=="92P1131", ENV{UPOWER_RECALL_NOTICE}="1"
+
+ENV{UPOWER_RECALL_NOTICE}=="1", ENV{UPOWER_RECALL_VENDOR}="LENOVO", ENV{UPOWER_RECALL_URL}="http://www.lenovo.com/batteryprogram"
+
+LABEL="up_battery_recall_lenovo_end"
+
diff --git a/rules/95-upower-compat-battery-recall-toshiba.rules b/rules/95-upower-compat-battery-recall-toshiba.rules
new file mode 100644
index 0000000..8c7483f
--- /dev/null
+++ b/rules/95-upower-compat-battery-recall-toshiba.rules
@@ -0,0 +1,36 @@
+##############################################################################################################
+# Battery recall notices: Toshiba
+#
+# These are properties defining the behavior:
+#  UPOWER_RECALL_NOTICE
+#  UPOWER_RECALL_VENDOR
+#  UPOWER_RECALL_URL
+#
+
+# only match power_supply devices
+SUBSYSTEM!="power_supply", GOTO="up_battery_recall_toshiba_end"
+
+# only match batteries
+ATTR{type}!="Battery", GOTO="up_battery_recall_toshiba_end"
+
+# only match correct manufacturer
+ATTR{manufacturer}!="TOSHIBA", GOTO="up_battery_recall_toshiba_end"
+
+ATTR{model_name}=="PA3191U", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="PA3191U", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="PA3356U", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="PA3356U", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="PA3475U", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="PA3476U", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="PA3399U", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="PA3451U", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="PA3383U", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="PA3395U", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="PA3399U", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="PA3400U", ENV{UPOWER_RECALL_NOTICE}="1"
+ATTR{model_name}=="PA3421U", ENV{UPOWER_RECALL_NOTICE}="1"
+
+ENV{UPOWER_RECALL_NOTICE}=="1", ENV{UPOWER_RECALL_VENDOR}="Toshiba", ENV{UPOWER_RECALL_URL}="http://bxinfo.toshiba.com/"
+
+LABEL="up_battery_recall_toshiba_end"
+
diff --git a/rules/95-upower-compat-csr.rules b/rules/95-upower-compat-csr.rules
new file mode 100644
index 0000000..b476660
--- /dev/null
+++ b/rules/95-upower-compat-csr.rules
@@ -0,0 +1,29 @@
+##############################################################################################################
+# Logitech Mice with CSR battery readouts
+#
+# These are properties defining the behavior:
+#  UPOWER_CSR_DUAL (Dual Receiver)
+#
+SUBSYSTEM!="usb", GOTO="up_csr_end"
+
+ATTR{idVendor}=="046d", ENV{UPOWER_VENDOR}="Logitech, Inc."
+ATTR{idVendor}=="046d", ATTR{idProduct}=="c501", ENV{UPOWER_PRODUCT}="Mouse Receiver", ENV{UPOWER_BATTERY_TYPE}="mouse"
+ATTR{idVendor}=="046d", ATTR{idProduct}=="c502", ENV{UPOWER_PRODUCT}="Dual Receiver", ENV{UPOWER_BATTERY_TYPE}="mouse", ENV{UPOWER_CSR_DUAL}="1"
+ATTR{idVendor}=="046d", ATTR{idProduct}=="c504", ENV{UPOWER_PRODUCT}="Freedom Optical", ENV{UPOWER_BATTERY_TYPE}="mouse", ENV{UPOWER_CSR_DUAL}="1"
+ATTR{idVendor}=="046d", ATTR{idProduct}=="c505", ENV{UPOWER_PRODUCT}="Elite Duo", ENV{UPOWER_BATTERY_TYPE}="keyboard"
+ATTR{idVendor}=="046d", ATTR{idProduct}=="c506", ENV{UPOWER_PRODUCT}="MX700 Optical Mouse", ENV{UPOWER_BATTERY_TYPE}="mouse"
+ATTR{idVendor}=="046d", ATTR{idProduct}=="c508", ENV{UPOWER_PRODUCT}="Optical TrackMan", ENV{UPOWER_BATTERY_TYPE}="mouse"
+ATTR{idVendor}=="046d", ATTR{idProduct}=="c50e", ENV{UPOWER_PRODUCT}="MX1000 Laser Mouse", ENV{UPOWER_BATTERY_TYPE}="mouse"
+ATTR{idVendor}=="046d", ATTR{idProduct}=="c510", ENV{UPOWER_PRODUCT}="Click! Mouse", ENV{UPOWER_BATTERY_TYPE}="mouse"
+ATTR{idVendor}=="046d", ATTR{idProduct}=="c512", ENV{UPOWER_PRODUCT}="Keyboard+Mouse Receiver", ENV{UPOWER_BATTERY_TYPE}="keyboard"
+ATTR{idVendor}=="046d", ATTR{idProduct}=="c702", ENV{UPOWER_PRODUCT}="Presenter", ENV{UPOWER_BATTERY_TYPE}="mouse"
+
+LABEL="up_csr_end"
+
+# Unifying HID++ devices
+SUBSYSTEM!="hid", GOTO="up_unifying_end"
+ATTRS{idVendor}=="046d", ENV{UPOWER_VENDOR}="Logitech, Inc."
+ATTRS{idVendor}=="046d", ATTRS{idProduct}=="c52b", DRIVER=="logitech-djdevice", ENV{UPOWER_BATTERY_TYPE}="unifying"
+ATTRS{idVendor}=="046d", ATTRS{idProduct}=="c532", DRIVER=="logitech-djdevice", ENV{UPOWER_BATTERY_TYPE}="unifying"
+ATTRS{idVendor}=="046d", ATTRS{idProduct}=="c52f", ENV{UPOWER_BATTERY_TYPE}="lg-wireless"
+LABEL="up_unifying_end"
diff --git a/rules/95-upower-compat-hid.rules b/rules/95-upower-compat-hid.rules
new file mode 100644
index 0000000..dcf4380
--- /dev/null
+++ b/rules/95-upower-compat-hid.rules
@@ -0,0 +1,108 @@
+##############################################################################################################
+# Uninterruptible Power Supplies with USB HID interfaces
+#
+# to keep up to date, monitor: http://svn.debian.org/wsvn/nut/trunk/scripts/upower/95-upower-hid.rules
+
+# only support USB, else ignore
+SUBSYSTEM=="usbmisc", GOTO="up_hid_chkdev"
+SUBSYSTEM!="usb", GOTO="up_hid_end"
+
+# if usbraw device, ignore
+LABEL="up_hid_chkdev"
+KERNEL!="hiddev*", GOTO="up_hid_end"
+
+# if an interface, ignore
+ENV{DEVTYPE}=="usb_interface", GOTO="up_hid_end"
+
+ATTRS{idVendor}=="03f0", ENV{UPOWER_VENDOR}="Hewlett Packard"
+ATTRS{idVendor}=="0463", ENV{UPOWER_VENDOR}="Eaton"
+ATTRS{idVendor}=="047c", ENV{UPOWER_VENDOR}="Dell"
+ATTRS{idVendor}=="050d", ENV{UPOWER_VENDOR}="Belkin"
+ATTRS{idVendor}=="051d", ENV{UPOWER_VENDOR}="APC"
+ATTRS{idVendor}=="06da", ENV{UPOWER_VENDOR}="Liebert"
+ATTRS{idVendor}=="0764", ENV{UPOWER_VENDOR}="Cyber Power Systems"
+ATTRS{idVendor}=="09ae", ENV{UPOWER_VENDOR}="TrippLite"
+ATTRS{idVendor}=="0d9f", ENV{UPOWER_VENDOR}="PowerCOM"
+ATTRS{idVendor}=="10af", ENV{UPOWER_VENDOR}="Liebert"
+
+# Hewlett Packard
+ATTRS{idVendor}=="03f0", ATTRS{idProduct}=="1f06", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="03f0", ATTRS{idProduct}=="1f08", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="03f0", ATTRS{idProduct}=="1f09", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="03f0", ATTRS{idProduct}=="1f0a", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="03f0", ATTRS{idProduct}=="1fe0", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="03f0", ATTRS{idProduct}=="1fe1", ENV{UPOWER_BATTERY_TYPE}="ups"
+
+# Eaton
+ATTRS{idVendor}=="0463", ATTRS{idProduct}=="0001", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="0463", ATTRS{idProduct}=="ffff", ENV{UPOWER_BATTERY_TYPE}="ups"
+
+# Dell
+ATTRS{idVendor}=="047c", ATTRS{idProduct}=="ffff", ENV{UPOWER_BATTERY_TYPE}="ups"
+
+# Belkin
+ATTRS{idVendor}=="050d", ATTRS{idProduct}=="0375", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="050d", ATTRS{idProduct}=="0551", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="050d", ATTRS{idProduct}=="0750", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="050d", ATTRS{idProduct}=="0751", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="050d", ATTRS{idProduct}=="0900", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="050d", ATTRS{idProduct}=="0910", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="050d", ATTRS{idProduct}=="0912", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="050d", ATTRS{idProduct}=="0980", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="050d", ATTRS{idProduct}=="1100", ENV{UPOWER_BATTERY_TYPE}="ups"
+
+# APC
+ATTRS{idVendor}=="051d", ATTRS{idProduct}=="0002", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="051d", ATTRS{idProduct}=="0003", ENV{UPOWER_BATTERY_TYPE}="ups"
+
+# Liebert
+ATTRS{idVendor}=="06da", ATTRS{idProduct}=="ffff", ENV{UPOWER_BATTERY_TYPE}="ups"
+
+# Cyber Power Systems
+ATTRS{idVendor}=="0764", ATTRS{idProduct}=="0005", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="0764", ATTRS{idProduct}=="0501", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="0764", ATTRS{idProduct}=="0601", ENV{UPOWER_BATTERY_TYPE}="ups"
+
+# TrippLite
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="1003", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="1007", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="1008", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="1009", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="1010", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="2005", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="2007", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="2008", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="2009", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="2010", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="2011", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="2012", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="2013", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="2014", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="3008", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="3009", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="3010", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="3011", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="3012", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="3013", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="3014", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="3015", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="4001", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="4002", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="4003", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="4004", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="4005", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="4006", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="4007", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="4008", ENV{UPOWER_BATTERY_TYPE}="ups"
+
+# PowerCOM
+ATTRS{idVendor}=="0d9f", ATTRS{idProduct}=="00a2", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="0d9f", ATTRS{idProduct}=="00a3", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="0d9f", ATTRS{idProduct}=="00a4", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="0d9f", ATTRS{idProduct}=="00a5", ENV{UPOWER_BATTERY_TYPE}="ups"
+ATTRS{idVendor}=="0d9f", ATTRS{idProduct}=="00a6", ENV{UPOWER_BATTERY_TYPE}="ups"
+
+# Liebert
+ATTRS{idVendor}=="10af", ATTRS{idProduct}=="0001", ENV{UPOWER_BATTERY_TYPE}="ups"
+
+LABEL="up_hid_end"
diff --git a/rules/95-upower-compat-wup.rules b/rules/95-upower-compat-wup.rules
new file mode 100644
index 0000000..5dfacc2
--- /dev/null
+++ b/rules/95-upower-compat-wup.rules
@@ -0,0 +1,5 @@
+##############################################################################################################
+# Watts Up? Pro Devices
+#
+SUBSYSTEM=="tty", SUBSYSTEMS=="usb", ATTRS{idVendor}=="0403", ATTRS{idProduct}=="6001", ATTRS{serial}=="A80?????", ENV{UPOWER_VENDOR}="Watts Up, Inc.", ENV{UPOWER_PRODUCT}="Watts Up? Pro", ENV{UP_MONITOR_TYPE}="wup"
+
diff --git a/rules/95-upower-csr.rules b/rules/95-upower-csr.rules
deleted file mode 100644
index b476660..0000000
--- a/rules/95-upower-csr.rules
+++ /dev/null
@@ -1,29 +0,0 @@
-##############################################################################################################
-# Logitech Mice with CSR battery readouts
-#
-# These are properties defining the behavior:
-#  UPOWER_CSR_DUAL (Dual Receiver)
-#
-SUBSYSTEM!="usb", GOTO="up_csr_end"
-
-ATTR{idVendor}=="046d", ENV{UPOWER_VENDOR}="Logitech, Inc."
-ATTR{idVendor}=="046d", ATTR{idProduct}=="c501", ENV{UPOWER_PRODUCT}="Mouse Receiver", ENV{UPOWER_BATTERY_TYPE}="mouse"
-ATTR{idVendor}=="046d", ATTR{idProduct}=="c502", ENV{UPOWER_PRODUCT}="Dual Receiver", ENV{UPOWER_BATTERY_TYPE}="mouse", ENV{UPOWER_CSR_DUAL}="1"
-ATTR{idVendor}=="046d", ATTR{idProduct}=="c504", ENV{UPOWER_PRODUCT}="Freedom Optical", ENV{UPOWER_BATTERY_TYPE}="mouse", ENV{UPOWER_CSR_DUAL}="1"
-ATTR{idVendor}=="046d", ATTR{idProduct}=="c505", ENV{UPOWER_PRODUCT}="Elite Duo", ENV{UPOWER_BATTERY_TYPE}="keyboard"
-ATTR{idVendor}=="046d", ATTR{idProduct}=="c506", ENV{UPOWER_PRODUCT}="MX700 Optical Mouse", ENV{UPOWER_BATTERY_TYPE}="mouse"
-ATTR{idVendor}=="046d", ATTR{idProduct}=="c508", ENV{UPOWER_PRODUCT}="Optical TrackMan", ENV{UPOWER_BATTERY_TYPE}="mouse"
-ATTR{idVendor}=="046d", ATTR{idProduct}=="c50e", ENV{UPOWER_PRODUCT}="MX1000 Laser Mouse", ENV{UPOWER_BATTERY_TYPE}="mouse"
-ATTR{idVendor}=="046d", ATTR{idProduct}=="c510", ENV{UPOWER_PRODUCT}="Click! Mouse", ENV{UPOWER_BATTERY_TYPE}="mouse"
-ATTR{idVendor}=="046d", ATTR{idProduct}=="c512", ENV{UPOWER_PRODUCT}="Keyboard+Mouse Receiver", ENV{UPOWER_BATTERY_TYPE}="keyboard"
-ATTR{idVendor}=="046d", ATTR{idProduct}=="c702", ENV{UPOWER_PRODUCT}="Presenter", ENV{UPOWER_BATTERY_TYPE}="mouse"
-
-LABEL="up_csr_end"
-
-# Unifying HID++ devices
-SUBSYSTEM!="hid", GOTO="up_unifying_end"
-ATTRS{idVendor}=="046d", ENV{UPOWER_VENDOR}="Logitech, Inc."
-ATTRS{idVendor}=="046d", ATTRS{idProduct}=="c52b", DRIVER=="logitech-djdevice", ENV{UPOWER_BATTERY_TYPE}="unifying"
-ATTRS{idVendor}=="046d", ATTRS{idProduct}=="c532", DRIVER=="logitech-djdevice", ENV{UPOWER_BATTERY_TYPE}="unifying"
-ATTRS{idVendor}=="046d", ATTRS{idProduct}=="c52f", ENV{UPOWER_BATTERY_TYPE}="lg-wireless"
-LABEL="up_unifying_end"
diff --git a/rules/95-upower-hid.rules b/rules/95-upower-hid.rules
deleted file mode 100644
index dcf4380..0000000
--- a/rules/95-upower-hid.rules
+++ /dev/null
@@ -1,108 +0,0 @@
-##############################################################################################################
-# Uninterruptible Power Supplies with USB HID interfaces
-#
-# to keep up to date, monitor: http://svn.debian.org/wsvn/nut/trunk/scripts/upower/95-upower-hid.rules
-
-# only support USB, else ignore
-SUBSYSTEM=="usbmisc", GOTO="up_hid_chkdev"
-SUBSYSTEM!="usb", GOTO="up_hid_end"
-
-# if usbraw device, ignore
-LABEL="up_hid_chkdev"
-KERNEL!="hiddev*", GOTO="up_hid_end"
-
-# if an interface, ignore
-ENV{DEVTYPE}=="usb_interface", GOTO="up_hid_end"
-
-ATTRS{idVendor}=="03f0", ENV{UPOWER_VENDOR}="Hewlett Packard"
-ATTRS{idVendor}=="0463", ENV{UPOWER_VENDOR}="Eaton"
-ATTRS{idVendor}=="047c", ENV{UPOWER_VENDOR}="Dell"
-ATTRS{idVendor}=="050d", ENV{UPOWER_VENDOR}="Belkin"
-ATTRS{idVendor}=="051d", ENV{UPOWER_VENDOR}="APC"
-ATTRS{idVendor}=="06da", ENV{UPOWER_VENDOR}="Liebert"
-ATTRS{idVendor}=="0764", ENV{UPOWER_VENDOR}="Cyber Power Systems"
-ATTRS{idVendor}=="09ae", ENV{UPOWER_VENDOR}="TrippLite"
-ATTRS{idVendor}=="0d9f", ENV{UPOWER_VENDOR}="PowerCOM"
-ATTRS{idVendor}=="10af", ENV{UPOWER_VENDOR}="Liebert"
-
-# Hewlett Packard
-ATTRS{idVendor}=="03f0", ATTRS{idProduct}=="1f06", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="03f0", ATTRS{idProduct}=="1f08", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="03f0", ATTRS{idProduct}=="1f09", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="03f0", ATTRS{idProduct}=="1f0a", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="03f0", ATTRS{idProduct}=="1fe0", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="03f0", ATTRS{idProduct}=="1fe1", ENV{UPOWER_BATTERY_TYPE}="ups"
-
-# Eaton
-ATTRS{idVendor}=="0463", ATTRS{idProduct}=="0001", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="0463", ATTRS{idProduct}=="ffff", ENV{UPOWER_BATTERY_TYPE}="ups"
-
-# Dell
-ATTRS{idVendor}=="047c", ATTRS{idProduct}=="ffff", ENV{UPOWER_BATTERY_TYPE}="ups"
-
-# Belkin
-ATTRS{idVendor}=="050d", ATTRS{idProduct}=="0375", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="050d", ATTRS{idProduct}=="0551", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="050d", ATTRS{idProduct}=="0750", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="050d", ATTRS{idProduct}=="0751", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="050d", ATTRS{idProduct}=="0900", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="050d", ATTRS{idProduct}=="0910", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="050d", ATTRS{idProduct}=="0912", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="050d", ATTRS{idProduct}=="0980", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="050d", ATTRS{idProduct}=="1100", ENV{UPOWER_BATTERY_TYPE}="ups"
-
-# APC
-ATTRS{idVendor}=="051d", ATTRS{idProduct}=="0002", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="051d", ATTRS{idProduct}=="0003", ENV{UPOWER_BATTERY_TYPE}="ups"
-
-# Liebert
-ATTRS{idVendor}=="06da", ATTRS{idProduct}=="ffff", ENV{UPOWER_BATTERY_TYPE}="ups"
-
-# Cyber Power Systems
-ATTRS{idVendor}=="0764", ATTRS{idProduct}=="0005", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="0764", ATTRS{idProduct}=="0501", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="0764", ATTRS{idProduct}=="0601", ENV{UPOWER_BATTERY_TYPE}="ups"
-
-# TrippLite
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="1003", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="1007", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="1008", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="1009", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="1010", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="2005", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="2007", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="2008", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="2009", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="2010", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="2011", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="2012", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="2013", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="2014", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="3008", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="3009", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="3010", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="3011", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="3012", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="3013", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="3014", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="3015", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="4001", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="4002", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="4003", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="4004", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="4005", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="4006", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="4007", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="09ae", ATTRS{idProduct}=="4008", ENV{UPOWER_BATTERY_TYPE}="ups"
-
-# PowerCOM
-ATTRS{idVendor}=="0d9f", ATTRS{idProduct}=="00a2", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="0d9f", ATTRS{idProduct}=="00a3", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="0d9f", ATTRS{idProduct}=="00a4", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="0d9f", ATTRS{idProduct}=="00a5", ENV{UPOWER_BATTERY_TYPE}="ups"
-ATTRS{idVendor}=="0d9f", ATTRS{idProduct}=="00a6", ENV{UPOWER_BATTERY_TYPE}="ups"
-
-# Liebert
-ATTRS{idVendor}=="10af", ATTRS{idProduct}=="0001", ENV{UPOWER_BATTERY_TYPE}="ups"
-
-LABEL="up_hid_end"
diff --git a/rules/95-upower-wup.rules b/rules/95-upower-wup.rules
deleted file mode 100644
index 5dfacc2..0000000
--- a/rules/95-upower-wup.rules
+++ /dev/null
@@ -1,5 +0,0 @@
-##############################################################################################################
-# Watts Up? Pro Devices
-#
-SUBSYSTEM=="tty", SUBSYSTEMS=="usb", ATTRS{idVendor}=="0403", ATTRS{idProduct}=="6001", ATTRS{serial}=="A80?????", ENV{UPOWER_VENDOR}="Watts Up, Inc.", ENV{UPOWER_PRODUCT}="Watts Up? Pro", ENV{UP_MONITOR_TYPE}="wup"
-
diff --git a/rules/Makefile.am b/rules/Makefile.am
index a66490a..dfd048d 100644
--- a/rules/Makefile.am
+++ b/rules/Makefile.am
@@ -1,15 +1,15 @@
 ## Process this file with automake to produce Makefile.in
 
 udevrules_DATA =						\
-	95-upower-battery-recall-dell.rules			\
-	95-upower-battery-recall-fujitsu.rules			\
-	95-upower-battery-recall-gateway.rules			\
-	95-upower-battery-recall-ibm.rules			\
-	95-upower-battery-recall-lenovo.rules			\
-	95-upower-battery-recall-toshiba.rules			\
-	95-upower-wup.rules					\
-	95-upower-hid.rules					\
-	95-upower-csr.rules
+	95-upower-compat-battery-recall-dell.rules			\
+	95-upower-compat-battery-recall-fujitsu.rules			\
+	95-upower-compat-battery-recall-gateway.rules			\
+	95-upower-compat-battery-recall-ibm.rules			\
+	95-upower-compat-battery-recall-lenovo.rules			\
+	95-upower-compat-battery-recall-toshiba.rules			\
+	95-upower-compat-wup.rules					\
+	95-upower-compat-hid.rules					\
+	95-upower-compat-csr.rules
 
 EXTRA_DIST =							\
 	$(udevrules_DATA)
diff --git a/src/Makefile.am b/src/Makefile.am
index 1a97c17..b0ee678 100644
--- a/src/Makefile.am
+++ b/src/Makefile.am
@@ -25,7 +25,7 @@ AM_CPPFLAGS = \
 	$(POLKIT_CFLAGS)					\
 	$(GLIB_CFLAGS)
 
-UPOWER_LIBS = $(top_builddir)/libupower-glib/libupower-glib.la
+UPOWER_LIBS = $(top_builddir)/libupower-glib/libupower-glib-compat.la
 
 BUILT_SOURCES =							\
 	up-daemon-glue.h					\
@@ -42,32 +42,32 @@ up-marshal.h: up-marshal.list
 up-marshal.c: up-marshal.list
 	echo "#include \"up-marshal.h\"" > $@ && glib-genmarshal $< --prefix=up_marshal --body >> $@
 
-up-daemon-glue.h: org.freedesktop.UPower.xml Makefile.am
-	dbus-binding-tool --prefix=up_daemon --mode=glib-server --output=up-daemon-glue.h $(srcdir)/org.freedesktop.UPower.xml
+up-daemon-glue.h: org.freedesktop.UPowerCompat.xml Makefile.am
+	dbus-binding-tool --prefix=up_daemon --mode=glib-server --output=up-daemon-glue.h $(srcdir)/org.freedesktop.UPowerCompat.xml
 
-up-device-glue.h: org.freedesktop.UPower.Device.xml Makefile.am
-	dbus-binding-tool --prefix=up_device --mode=glib-server --output=up-device-glue.h $(srcdir)/org.freedesktop.UPower.Device.xml
+up-device-glue.h: org.freedesktop.UPowerCompat.Device.xml Makefile.am
+	dbus-binding-tool --prefix=up_device --mode=glib-server --output=up-device-glue.h $(srcdir)/org.freedesktop.UPowerCompat.Device.xml
 
-up-qos-glue.h: org.freedesktop.UPower.QoS.xml Makefile.am
-	dbus-binding-tool --prefix=up_qos --mode=glib-server --output=up-qos-glue.h $(srcdir)/org.freedesktop.UPower.QoS.xml
+up-qos-glue.h: org.freedesktop.UPowerCompat.QoS.xml Makefile.am
+	dbus-binding-tool --prefix=up_qos --mode=glib-server --output=up-qos-glue.h $(srcdir)/org.freedesktop.UPowerCompat.QoS.xml
 
-up-kbd-backlight-glue.h: org.freedesktop.UPower.KbdBacklight.xml Makefile.am
-	dbus-binding-tool --prefix=up_kbd_backlight --mode=glib-server --output=up-kbd-backlight-glue.h $(srcdir)/org.freedesktop.UPower.KbdBacklight.xml
+up-kbd-backlight-glue.h: org.freedesktop.UPowerCompat.KbdBacklight.xml Makefile.am
+	dbus-binding-tool --prefix=up_kbd_backlight --mode=glib-server --output=up-kbd-backlight-glue.h $(srcdir)/org.freedesktop.UPowerCompat.KbdBacklight.xml
 
-up-wakeups-glue.h: org.freedesktop.UPower.Wakeups.xml Makefile.am
-	dbus-binding-tool --prefix=up_wakeups --mode=glib-server --output=up-wakeups-glue.h $(srcdir)/org.freedesktop.UPower.Wakeups.xml
+up-wakeups-glue.h: org.freedesktop.UPowerCompat.Wakeups.xml Makefile.am
+	dbus-binding-tool --prefix=up_wakeups --mode=glib-server --output=up-wakeups-glue.h $(srcdir)/org.freedesktop.UPowerCompat.Wakeups.xml
 
-libexec_PROGRAMS = upowerd
+libexec_PROGRAMS = upowerd-compat
 
 dbusifdir = $(datadir)/dbus-1/interfaces
 dbusif_DATA =							\
-	org.freedesktop.UPower.xml				\
-	org.freedesktop.UPower.Device.xml			\
-	org.freedesktop.UPower.QoS.xml				\
-	org.freedesktop.UPower.KbdBacklight.xml			\
-	org.freedesktop.UPower.Wakeups.xml
+	org.freedesktop.UPowerCompat.xml			\
+	org.freedesktop.UPowerCompat.Device.xml		\
+	org.freedesktop.UPowerCompat.QoS.xml			\
+	org.freedesktop.UPowerCompat.KbdBacklight.xml		\
+	org.freedesktop.UPowerCompat.Wakeups.xml
 
-upowerd_SOURCES =						\
+upowerd_compat_SOURCES =						\
 	up-polkit.h						\
 	up-polkit.c						\
 	up-daemon.h						\
@@ -91,11 +91,11 @@ upowerd_SOURCES =						\
 	up-main.c						\
 	$(BUILT_SOURCES)
 
-upowerd_CPPFLAGS =						\
+upowerd_compat_CPPFLAGS =						\
 	-I$(top_srcdir)/src					\
 	$(AM_CPPFLAGS)
 
-upowerd_LDADD =							\
+upowerd_compat_LDADD =							\
 	-lm							\
 	$(USB_LIBS)						\
 	$(GIO_LIBS)						\
@@ -104,29 +104,29 @@ upowerd_LDADD =							\
 	$(UPOWER_LIBS)
 
 if BACKEND_TYPE_DUMMY
-upowerd_LDADD += 						\
+upowerd_compat_LDADD += 						\
 	dummy/libupshared.la
 endif
 
 if BACKEND_TYPE_FREEBSD
-upowerd_LDADD +=						\
+upowerd_compat_LDADD +=						\
 	freebsd/libupshared.la
 endif
 
 if BACKEND_TYPE_OPENBSD
-upowerd_LDADD +=						\
+upowerd_compat_LDADD +=						\
 	openbsd/libupshared.la
 endif
 
 if BACKEND_TYPE_LINUX
-upowerd_LDADD += 						\
+upowerd_compat_LDADD += 						\
 	linux/libupshared.la					\
 	$(USB_LIBS)						\
 	$(GUDEV_LIBS)						\
 	$(IDEVICE_LIBS)						\
 	$(NULL)
 
-upowerd_LDFLAGS =						\
+upowerd_compat_LDFLAGS =						\
 	$(PIE_LDFLAGS)						\
 	$(RELRO_LDFLAGS)
 
@@ -136,13 +136,13 @@ systemsleep_SCRIPTS = notify-upower.sh
 endif
 
 if UP_BUILD_TESTS
-check-local: upowerd
+check-local: upowerd-compat
 	env GI_TYPELIB_PATH=$(top_builddir)/libupower-glib:$(GI_REPOSITORY_PATH) LD_LIBRARY_PATH=$(top_builddir)/libupower-glib/.libs:$(LD_LIBRARY_PATH) top_builddir=$(top_builddir) $(srcdir)/linux/integration-test -v
 endif
 
 endif
 
-upowerd_CFLAGS =						\
+upowerd_compat_CFLAGS =						\
 	$(WARNINGFLAGS_C)					\
 	$(NULL)
 
@@ -192,14 +192,14 @@ TESTS = up-self-test
 endif
 
 dbusservicedir       = $(datadir)/dbus-1/system-services
-dbusservice_in_files = org.freedesktop.UPower.service.in
+dbusservice_in_files = org.freedesktop.UPowerCompat.service.in
 dbusservice_DATA     = $(dbusservice_in_files:.service.in=.service)
 
 $(dbusservice_DATA): $(dbusservice_in_files) Makefile
 	@sed -e "s|\@libexecdir\@|$(libexecdir)|" $< > $@
 
 dbusconfdir = $(sysconfdir)/dbus-1/system.d
-dbusconf_in_files = org.freedesktop.UPower.conf.in
+dbusconf_in_files = org.freedesktop.UPowerCompat.conf.in
 dbusconf_DATA = $(dbusconf_in_files:.conf.in=.conf)
 
 $(dbusconf_DATA): $(dbusconf_in_files) Makefile
@@ -207,7 +207,7 @@ $(dbusconf_DATA): $(dbusconf_in_files) Makefile
 
 if HAVE_SYSTEMDSYSTEMUNITDIR
 systemdservicedir       = $(systemdsystemunitdir)
-systemdservice_in_files = upower.service.in
+systemdservice_in_files = upower-compat.service.in
 systemdservice_DATA     = $(systemdservice_in_files:.service.in=.service)
 
 $(systemdservice_DATA): $(systemdservice_in_files) Makefile
@@ -227,11 +227,11 @@ MAINTAINERCLEANFILES =						\
 	$(dbusservice_DATA)
 
 EXTRA_DIST =							\
-	org.freedesktop.UPower.xml				\
-	org.freedesktop.UPower.Device.xml			\
-	org.freedesktop.UPower.QoS.xml				\
-	org.freedesktop.UPower.KbdBacklight.xml			\
-	org.freedesktop.UPower.Wakeups.xml			\
+	org.freedesktop.UPowerCompat.xml			\
+	org.freedesktop.UPowerCompat.Device.xml		\
+	org.freedesktop.UPowerCompat.QoS.xml			\
+	org.freedesktop.UPowerCompat.KbdBacklight.xml		\
+	org.freedesktop.UPowerCompat.Wakeups.xml		\
 	up-marshal.list						\
 	$(systemsleep_SCRIPTS)					\
 	$(systemdservice_in_files)				\
diff --git a/src/linux/integration-test b/src/linux/integration-test
index 8489bf3..c41cf3d 100755
--- a/src/linux/integration-test
+++ b/src/linux/integration-test
@@ -27,7 +27,7 @@ import time
 try:
     from gi.repository import GLib
     from gi.repository import Gio
-    from gi.repository import UPowerGlib
+    from gi.repository import UPowerGlibCompat
 except ImportError as e:
     sys.stderr.write('Skipping tests, PyGobject not available for Python 3, or missing GI typelibs: %s\n' % str(e))
     sys.exit(0)
@@ -38,7 +38,7 @@ except ImportError:
     sys.stderr.write('Skipping tests, umockdev not available (https://launchpad.net/umockdev/)\n')
     sys.exit(0)
 
-UP = 'org.freedesktop.UPower'
+UP = 'org.freedesktop.UPowerCompat'
 
 (UP_DEVICE_STATE_UNKNOWN,
  UP_DEVICE_STATE_CHARGING,
@@ -52,13 +52,13 @@ class Tests(unittest.TestCase):
     def setUpClass(cls):
         # run from local build tree if we are in one, otherwise use system instance
         builddir = os.getenv('top_builddir', '.')
-        if os.access(os.path.join(builddir, 'src', 'upowerd'), os.X_OK):
-            cls.daemon_path = os.path.join(builddir, 'src', 'upowerd')
+        if os.access(os.path.join(builddir, 'src', 'upowerd-compat'), os.X_OK):
+            cls.daemon_path = os.path.join(builddir, 'src', 'upowerd-compat')
             print('Testing binaries from local build tree')
         else:
             print('Testing installed system binaries')
             cls.daemon_path = None
-            with open('/usr/share/dbus-1/system-services/org.freedesktop.UPower.service') as f:
+            with open('/usr/share/dbus-1/system-services/org.freedesktop.UPowerCompat.service') as f:
                 for line in f:
                     if line.startswith('Exec='):
                         cls.daemon_path = line.split('=', 1)[1].strip()
@@ -142,7 +142,7 @@ class Tests(unittest.TestCase):
 
         self.proxy = Gio.DBusProxy.new_sync(
             self.dbus, Gio.DBusProxyFlags.DO_NOT_AUTO_START, None, UP,
-            '/org/freedesktop/UPower', UP, None)
+            '/org/freedesktop/UPowerCompat', UP, None)
 
         self.assertEqual(self.daemon.poll(), None, 'daemon crashed')
 
@@ -163,7 +163,7 @@ class Tests(unittest.TestCase):
 
         proxy = Gio.DBusProxy.new_sync(
             self.dbus, Gio.DBusProxyFlags.DO_NOT_AUTO_START, None, UP,
-            '/org/freedesktop/UPower', 'org.freedesktop.DBus.Properties', None)
+            '/org/freedesktop/UPowerCompat', 'org.freedesktop.DBus.Properties', None)
         return proxy.Get('(ss)', UP, name)
 
     def get_dbus_dev_property(self, device, name):
@@ -719,7 +719,7 @@ class Tests(unittest.TestCase):
         '''library GI: daemon properties'''
 
         self.start_daemon()
-        client = UPowerGlib.Client.new()
+        client = UPowerGlibCompat.Client.new()
         self.assertTrue(client.get_properties_sync(None))
         self.assertRegex(client.get_daemon_version(), '^[0-9.]+$')
         self.assertIn(client.get_can_hibernate(), [False, True])
diff --git a/src/linux/up-backend.c b/src/linux/up-backend.c
index 2f221b7..d109ab1 100644
--- a/src/linux/up-backend.c
+++ b/src/linux/up-backend.c
@@ -676,7 +676,7 @@ message_filter (DBusConnection *connection,
 {
 	UpBackend *backend = user_data;
 
-	if (dbus_message_is_signal (message, "org.freedesktop.UPower", "Resuming")) {
+	if (dbus_message_is_signal (message, "org.freedesktop.UPowerCompat", "Resuming")) {
 		g_debug ("received Resuming signal");
 		g_signal_emit (backend, signals[SIGNAL_RESUMING], 0);
 		return DBUS_HANDLER_RESULT_HANDLED;
diff --git a/src/notify-upower.sh b/src/notify-upower.sh
index 8421f06..7851955 100755
--- a/src/notify-upower.sh
+++ b/src/notify-upower.sh
@@ -1,7 +1,7 @@
 #!/bin/bash
 [ "$1" = "post" ] && exec /usr/bin/dbus-send	\
 	--system --type=signal			\
-	--dest=org.freedesktop.UPower		\
-	/org/freedesktop/UPower			\
-	org.freedesktop.UPower.Resuming
+	--dest=org.freedesktop.UPowerCompat	\
+	/org/freedesktop/UPowerCompat		\
+	org.freedesktop.UPowerCompat.Resuming
 exit 0
diff --git a/src/org.freedesktop.UPower.Device.xml b/src/org.freedesktop.UPower.Device.xml
deleted file mode 100644
index 0be009c..0000000
--- a/src/org.freedesktop.UPower.Device.xml
+++ /dev/null
@@ -1,728 +0,0 @@
-<!DOCTYPE node PUBLIC
-"-//freedesktop//DTD D-BUS Object Introspection 1.0//EN"
-"http://www.freedesktop.org/standards/dbus/1.0/introspect.dtd" [
-  <!ENTITY ERROR_GENERAL "org.freedesktop.UPower.Device.GeneralError">
-]>
-<node name="/" xmlns:doc="http://www.freedesktop.org/dbus/1.0/doc.dtd">
-  <interface name="org.freedesktop.UPower.Device">
-    <doc:doc>
-      <doc:description>
-        <doc:para>
-          Objects implementing this interface are usually discovered through
-          the <doc:tt>org.freedesktop.UPower</doc:tt> interface on
-          the <doc:tt>/org/freedesktop/UPower</doc:tt> object on
-          the D-Bus system bus service with the well-known
-          name <doc:tt>org.freedesktop.UPower</doc:tt> using
-          the
-          <doc:ref type="method" to="Power.EnumerateDevices">EnumerateDevices</doc:ref>
-          method.
-        </doc:para>
-        <doc:para>
-          <doc:example language="shell" title="simple example">
-            <doc:code>
-$ dbus-send --print-reply \
-            --system \
-            --dest=org.freedesktop.UPower \
-            /org/freedesktop/UPower/devices/battery_BAT0 \
-            org.freedesktop.DBus.Properties.GetAll \
-            string:org.freedesktop.UPower.Device
-
-method return sender=:1.386 -> dest=:1.477 reply_serial=2
-   array [
-      dict entry(
-         string "native-path"
-         variant             string "/sys/devices/LNXSYSTM:00/device:00/PNP0A08:00/device:01/PNP0C09:00/PNP0C0A:00/power_supply/BAT0"
-      )
-      dict entry(
-         string "vendor"
-         variant             string "SONY"
-      )
-      dict entry(
-         string "model"
-         variant             string "42T4568"
-      )
-      dict entry(
-         string "serial"
-         variant             string "4179"
-      )
-      dict entry(
-         string "update-time"
-         variant             uint64 1226417875
-      )
-      dict entry(
-         string "type"
-         variant             uint 2
-      )
-      dict entry(
-         string "power-supply"
-         variant             boolean true
-      )
-      dict entry(
-         string "has-history"
-         variant             boolean true
-      )
-      dict entry(
-         string "has-statistics"
-         variant             boolean true
-      )
-      dict entry(
-         string "online"
-         variant             boolean false
-      )
-      dict entry(
-         string "energy"
-         variant             double 72.85
-      )
-      dict entry(
-         string "energy-empty"
-         variant             double 0
-      )
-      dict entry(
-         string "energy-full"
-         variant             double 74.55
-      )
-      dict entry(
-         string "energy-full-design"
-         variant             double 74.88
-      )
-      dict entry(
-         string "energy-rate"
-         variant             double 0
-      )
-      dict entry(
-         string "voltage"
-         variant             double 16.415
-      )
-      dict entry(
-         string "time-to-empty"
-         variant             int64 0
-      )
-      dict entry(
-         string "time-to-full"
-         variant             int64 0
-      )
-      dict entry(
-         string "percentage"
-         variant             double 97.7197
-      )
-      dict entry(
-         string "is-present"
-         variant             boolean true
-      )
-      dict entry(
-         string "state"
-         variant             uint 3
-      )
-      dict entry(
-         string "is-rechargeable"
-         variant             boolean true
-      )
-      dict entry(
-         string "capacity"
-         variant             double 100
-      )
-      dict entry(
-         string "technology"
-         variant             uint 1
-      )
-   ]
-            </doc:code>
-          </doc:example>
-        </doc:para>
-        <doc:para>
-          Unless otherwise noted, an empty string or the value 0 in a
-          property on this interface means not set.
-        </doc:para>
-      </doc:description>
-    </doc:doc>
-
-
-    <!-- ************************************************************ -->
-    <method name="Refresh">
-      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Refreshes the data collected from the power source.
-          </doc:para>
-        </doc:description>
-        <doc:permission>Callers need the org.freedesktop.upower.refresh-power-source authorization</doc:permission>
-        <doc:errors>
-          <doc:error name="&ERROR_GENERAL;">if an error occured while refreshing</doc:error>
-        </doc:errors>
-      </doc:doc>
-    </method>
-
-    <!-- ************************************************************ -->
-    <signal name="Changed">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Some value on the power source changed.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </signal>
-
-    <!-- ************************************************************ -->
-    <method name="GetHistory">
-      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
-      <arg name="type" direction="in" type="s">
-        <doc:doc><doc:summary>The type of history.
-        Valid types are <doc:tt>rate</doc:tt> or <doc:tt>charge</doc:tt>.</doc:summary></doc:doc>
-      </arg>
-      <arg name="timespan" direction="in" type="u">
-        <doc:doc><doc:summary>The amount of data to return in seconds, or 0 for all.</doc:summary></doc:doc>
-      </arg>
-      <arg name="resolution" direction="in" type="u">
-        <doc:doc>
-          <doc:summary>
-            The approximate number of points to return.
-            A higher resolution is more accurate, at the expense of plotting speed.
-          </doc:summary>
-        </doc:doc>
-      </arg>
-      <arg name="data" direction="out" type="a(udu)">
-        <doc:doc><doc:summary>
-            The history data for the power device, if the device supports history.
-            Data is ordered from the earliest in time, to the newest data point.
-            Each element contains the following members:
-            <doc:list>
-              <doc:item>
-                <doc:term>time</doc:term>
-                <doc:definition>
-                  The time value in seconds from the <doc:tt>gettimeofday()</doc:tt> method.
-                </doc:definition>
-              </doc:item>
-              <doc:item>
-                <doc:term>value</doc:term>
-                <doc:definition>
-                  The data value, for instance the rate in W or the charge in %.
-                </doc:definition>
-              </doc:item>
-              <doc:item>
-                <doc:term>state</doc:term>
-                <doc:definition>
-                  The state of the device, for instance <doc:tt>charging</doc:tt> or
-                  <doc:tt>discharging</doc:tt>.
-                </doc:definition>
-              </doc:item>
-            </doc:list>
-        </doc:summary></doc:doc>
-      </arg>
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Gets history for the power device that is persistent across reboots.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </method>
-
-    <!-- ************************************************************ -->
-    <method name="GetStatistics">
-      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
-      <arg name="type" direction="in" type="s">
-        <doc:doc><doc:summary>The mode for the statistics.
-        Valid types are <doc:tt>charging</doc:tt> or <doc:tt>discharging</doc:tt>.</doc:summary></doc:doc>
-      </arg>
-      <arg name="data" direction="out" type="a(dd)">
-        <doc:doc><doc:summary>
-            The statistics data for the power device.
-            Each element contains the following members:
-            <doc:list>
-              <doc:item>
-                <doc:term>value</doc:term>
-                <doc:definition>
-                  The value of the percentage point, usually in seconds
-                </doc:definition>
-              </doc:item>
-              <doc:item>
-                <doc:term>accuracy</doc:term>
-                <doc:definition>
-                  The accuracy of the prediction in percent.
-                </doc:definition>
-              </doc:item>
-            </doc:list>
-        </doc:summary></doc:doc>
-      </arg>
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Gets statistics for the power device that may be interesting
-            to show on a graph in the session.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </method>
-
-    <!-- ************************************************************ -->
-    <property name="NativePath" type="s" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            OS specific native path of the power source. On Linux this
-            is the sysfs path, for
-            example <doc:tt>/sys/devices/LNXSYSTM:00/device:00/PNP0C0A:00/power_supply/BAT0</doc:tt>. Is
-            blank if the device is being driven by a user space
-            driver.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="Vendor" type="s" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Name of the vendor of the battery.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="Model" type="s" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Name of the model of this battery.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="Serial" type="s" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Unique serial number of the battery.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="UpdateTime" type="t" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            The point in time (seconds since the Epoch Jan 1, 1970
-            0:00 UTC) that data was read from the power source.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="Type" type="u" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Type of power source.
-          </doc:para>
-          <doc:list>
-            <doc:item>
-              <doc:term>0</doc:term><doc:definition>Unknown</doc:definition>
-            </doc:item>
-            <doc:item>
-              <doc:term>1</doc:term><doc:definition>Line Power</doc:definition>
-            </doc:item>
-            <doc:item>
-              <doc:term>2</doc:term><doc:definition>Battery</doc:definition>
-            </doc:item>
-            <doc:item>
-              <doc:term>3</doc:term><doc:definition>Ups</doc:definition>
-            </doc:item>
-            <doc:item>
-              <doc:term>4</doc:term><doc:definition>Monitor</doc:definition>
-            </doc:item>
-            <doc:item>
-              <doc:term>5</doc:term><doc:definition>Mouse</doc:definition>
-            </doc:item>
-            <doc:item>
-              <doc:term>6</doc:term><doc:definition>Keyboard</doc:definition>
-            </doc:item>
-            <doc:item>
-              <doc:term>7</doc:term><doc:definition>Pda</doc:definition>
-            </doc:item>
-            <doc:item>
-              <doc:term>8</doc:term><doc:definition>Phone</doc:definition>
-            </doc:item>
-          </doc:list>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="PowerSupply" type="b" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            If the power device is used to supply the system.
-            This would be set TRUE for laptop batteries and UPS devices,
-            but set FALSE for wireless mice or PDAs.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="HasHistory" type="b" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            If the power device has history.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="HasStatistics" type="b" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            If the power device has statistics.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="Online" type="b" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Whether power is currently being provided through line power.
-            This property is only valid if the property
-            <doc:ref type="property" to="Source:Type">type</doc:ref>
-            has the value "line-power".
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="Energy" type="d" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Amount of energy (measured in Wh) currently available in
-            the power source.
-          </doc:para><doc:para>
-            This property is only valid if the property
-            <doc:ref type="property" to="Source:Type">type</doc:ref>
-            has the value "battery".
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="EnergyEmpty" type="d" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Amount of energy (measured in Wh) in the power source when
-            it's considered to be empty.
-          </doc:para><doc:para>
-            This property is only valid if the property
-            <doc:ref type="property" to="Source:Type">type</doc:ref>
-            has the value "battery".
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="EnergyFull" type="d" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Amount of energy (measured in Wh) in the power source when
-            it's considered full.
-          </doc:para><doc:para>
-            This property is only valid if the property
-            <doc:ref type="property" to="Source:Type">type</doc:ref>
-            has the value "battery".
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="EnergyFullDesign" type="d" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Amount of energy (measured in Wh) the power source is
-            designed to hold when it's considered full.
-          </doc:para><doc:para>
-            This property is only valid if the property
-            <doc:ref type="property" to="Source:Type">type</doc:ref>
-            has the value "battery".
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="EnergyRate" type="d" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Amount of energy being drained from the source, measured
-            in W. If positive, the source is being discharged, if
-            negative it's being charged.
-          </doc:para><doc:para>
-            This property is only valid if the property
-            <doc:ref type="property" to="Source:Type">type</doc:ref>
-            has the value "battery".
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="Voltage" type="d" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Voltage in the Cell or being recorded by the meter.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="Luminosity" type="d" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Luminosity being recorded by the meter.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="TimeToEmpty" type="x" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Number of seconds until the power source is considered empty.
-            Is set to 0 if unknown.
-          </doc:para><doc:para>
-            This property is only valid if the property
-            <doc:ref type="property" to="Source:Type">type</doc:ref>
-            has the value "battery".
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="TimeToFull" type="x" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Number of seconds until the power source is considered full.
-            Is set to 0 if unknown.
-          </doc:para><doc:para>
-            This property is only valid if the property
-            <doc:ref type="property" to="Source:Type">type</doc:ref>
-            has the value "battery".
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="Percentage" type="d" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            The amount of energy left in the power source expressed as
-            a percentage between 0 and 100. Typically this is the same as
-            (<doc:ref type="property" to="Source:Energy">energy</doc:ref> -
-            <doc:ref type="property" to="Source:EnergyEmpty">energy-empty</doc:ref>) /
-            (<doc:ref type="property" to="Source:EnergyFull">energy-full</doc:ref> -
-            <doc:ref type="property" to="Source:EnergyEmpty">energy-empty</doc:ref>).
-            However, some primitive power sources are capable of only
-            reporting percentages and in this case the energy-*
-            properties will be unset while this property is set.
-          </doc:para><doc:para>
-            This property is only valid if the property
-            <doc:ref type="property" to="Source:Type">type</doc:ref>
-            has the value "battery".
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="Temperature" type="d" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            The temperature of the device in degrees Celsius. This property is
-            only valid if the property
-            <doc:ref type="property" to="Source:Type">type</doc:ref>
-            has the value "battery".
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="IsPresent" type="b" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            If the power source is present in the bay.
-            This field is required as some batteries are hot-removable, for example
-            expensive UPS and most laptop batteries.
-          </doc:para><doc:para>
-            This property is only valid if the property
-            <doc:ref type="property" to="Source:Type">type</doc:ref>
-            has the value "battery".
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="State" type="u" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            The battery power state.
-          </doc:para>
-          <doc:list>
-            <doc:item>
-              <doc:term>0</doc:term><doc:definition>Unknown</doc:definition>
-            </doc:item>
-            <doc:item>
-              <doc:term>1</doc:term><doc:definition>Charging</doc:definition>
-            </doc:item>
-            <doc:item>
-              <doc:term>2</doc:term><doc:definition>Discharging</doc:definition>
-            </doc:item>
-            <doc:item>
-              <doc:term>3</doc:term><doc:definition>Empty</doc:definition>
-            </doc:item>
-            <doc:item>
-              <doc:term>4</doc:term><doc:definition>Fully charged</doc:definition>
-            </doc:item>
-            <doc:item>
-              <doc:term>5</doc:term><doc:definition>Pending charge</doc:definition>
-            </doc:item>
-            <doc:item>
-              <doc:term>6</doc:term><doc:definition>Pending discharge</doc:definition>
-            </doc:item>
-          </doc:list>
-          <doc:para>
-            This property is only valid if the property
-            <doc:ref type="property" to="Source:Type">type</doc:ref>
-            has the value "battery".
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="IsRechargeable" type="b" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            If the power source is rechargeable.
-          </doc:para><doc:para>
-            This property is only valid if the property
-            <doc:ref type="property" to="Source:Type">type</doc:ref>
-            has the value "battery".
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="Capacity" type="d" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            The capacity of the power source expressed as a percentage between 0 and 100.
-            The capacity of the battery will reduce with age.
-            A capacity value less than 75% is usually a sign that you should renew your battery.
-            Typically this value is the same as
-            (<doc:ref type="property" to="Source:FullDesign">full-design</doc:ref> /
-            <doc:ref type="property" to="Source:Full">full</doc:ref>) * 100.
-            However, some primitive power sources are not capable reporting capacity
-            and in this case the capacity property will be unset.
-          </doc:para><doc:para>
-            This property is only valid if the property
-            <doc:ref type="property" to="Source:Type">type</doc:ref>
-            has the value "battery".
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="Technology" type="u" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Technology used in the battery:
-          </doc:para>
-          <doc:list>
-            <doc:item>
-              <doc:term>0</doc:term><doc:definition>Unknown</doc:definition>
-            </doc:item>
-            <doc:item>
-              <doc:term>1</doc:term><doc:definition>Lithium ion</doc:definition>
-            </doc:item>
-            <doc:item>
-              <doc:term>2</doc:term><doc:definition>Lithium polymer</doc:definition>
-            </doc:item>
-            <doc:item>
-              <doc:term>3</doc:term><doc:definition>Lithium iron phosphate</doc:definition>
-            </doc:item>
-            <doc:item>
-              <doc:term>4</doc:term><doc:definition>Lead acid</doc:definition>
-            </doc:item>
-            <doc:item>
-              <doc:term>5</doc:term><doc:definition>Nickel cadmium</doc:definition>
-            </doc:item>
-            <doc:item>
-              <doc:term>6</doc:term><doc:definition>Nickel metal hydride</doc:definition>
-            </doc:item>
-          </doc:list>
-          <doc:para>
-            This property is only valid if the property
-            <doc:ref type="property" to="Source:Type">type</doc:ref>
-            has the value "battery".
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="RecallNotice" type="b" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            If the device may have been recalled by the vendor due to a suspected
-            fault.
-            This key does not imply the device is faulty, only that it approximatly
-            matches the description from the vendor of units that were recalled.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="RecallVendor" type="s" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            The vendor that is handling the hardware recall.
-          </doc:para>
-          <doc:para>
-            This property is only valid if the property recall-notice is true.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="RecallUrl" type="s" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            The URL to visit about the hardware recall.
-          </doc:para>
-          <doc:para>
-            This property is only valid if the property recall-notice is true.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-  </interface>
-
-</node>
diff --git a/src/org.freedesktop.UPower.KbdBacklight.xml b/src/org.freedesktop.UPower.KbdBacklight.xml
deleted file mode 100644
index 994380f..0000000
--- a/src/org.freedesktop.UPower.KbdBacklight.xml
+++ /dev/null
@@ -1,101 +0,0 @@
-<!DOCTYPE node PUBLIC
-"-//freedesktop//DTD D-BUS Object Introspection 1.0//EN"
-"http://www.freedesktop.org/standards/dbus/1.0/introspect.dtd" [
-  <!ENTITY ERROR_GENERAL "org.freedesktop.UPower.GeneralError">
-]>
-<node name="/" xmlns:doc="http://www.freedesktop.org/dbus/1.0/doc.dtd">
-  <interface name="org.freedesktop.UPower.KbdBacklight">
-    <doc:doc>
-      <doc:description>
-        <doc:para>
-          org.freedesktop.UPower.KbdBacklight is a DBus interface implemented
-          by UPower.
-	  It allows the keyboard backlight (if present) to be controlled.
-        </doc:para>
-      </doc:description>
-    </doc:doc>
-
-    <!-- ************************************************************ -->
-    <method name="GetMaxBrightness">
-      <arg name="value" direction="out" type="i">
-        <doc:doc>
-          <doc:summary>
-            The maximum value of the keyboard backlight brightness.
-          </doc:summary>
-        </doc:doc>
-      </arg>
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Get the maximum brightness level for the keyboard backlight.
-          </doc:para>
-        </doc:description>
-        <doc:errors>
-          <doc:error name="&ERROR_GENERAL;">if an error occured while getting the maximum brightness</doc:error>
-        </doc:errors>
-      </doc:doc>
-    </method>
-
-    <!-- ************************************************************ -->
-    <method name="GetBrightness">
-      <arg name="value" direction="out" type="i">
-        <doc:doc>
-          <doc:summary>
-            The current value of the keyboard backlight brightness.
-          </doc:summary>
-        </doc:doc>
-      </arg>
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Get the brightness level of the keyboard backlight.
-          </doc:para>
-        </doc:description>
-        <doc:errors>
-          <doc:error name="&ERROR_GENERAL;">if an error occured while getting the brightness</doc:error>
-        </doc:errors>
-      </doc:doc>
-    </method>
-
-    <!-- ************************************************************ -->
-    <method name="SetBrightness">
-      <arg name="value" direction="in" type="i">
-        <doc:doc>
-          <doc:summary>
-            The value to set the KbdBacklight brightness.
-          </doc:summary>
-        </doc:doc>
-      </arg>
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Set the brightness level of the keyboard backlight.
-          </doc:para>
-        </doc:description>
-        <doc:errors>
-          <doc:error name="&ERROR_GENERAL;">if an error occured while setting the brightness</doc:error>
-        </doc:errors>
-      </doc:doc>
-    </method>
-
-    <!-- ************************************************************ -->
-    <signal name="BrightnessChanged">
-      <arg name="value" direction="out" type="i">
-        <doc:doc>
-          <doc:summary>
-            The new brightness value of the keyboard backlight.
-          </doc:summary>
-        </doc:doc>
-      </arg>
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-	    The keyboard backlight brightness level has changed.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </signal>
-
-  </interface>
-
-</node>
diff --git a/src/org.freedesktop.UPower.QoS.xml b/src/org.freedesktop.UPower.QoS.xml
deleted file mode 100644
index d3113f1..0000000
--- a/src/org.freedesktop.UPower.QoS.xml
+++ /dev/null
@@ -1,331 +0,0 @@
-<!DOCTYPE node PUBLIC
-"-//freedesktop//DTD D-BUS Object Introspection 1.0//EN"
-"http://www.freedesktop.org/standards/dbus/1.0/introspect.dtd" [
-  <!ENTITY ERROR_GENERAL "org.freedesktop.UPower.GeneralError">
-]>
-<node name="/" xmlns:doc="http://www.freedesktop.org/dbus/1.0/doc.dtd">
-  <interface name="org.freedesktop.UPower.QoS">
-    <doc:doc>
-      <doc:description>
-        <doc:para>
-          org.freedesktop.UPower.QoS is a DBus interface implemented
-          by UPower.
-          It allows applications to request latencies, for example a couple of seconds
-          for an IM application, or a few hundred microseconds for a multiplayer game.
-        </doc:para>
-        <doc:para>
-          Use cases:
-        </doc:para>
-        <doc:itemizedlist>
-          <doc:listitem>
-            <doc:para>
-              I want my IM application to request 0.5s latency for messages.
-            </doc:para>
-            <doc:para>
-              I'm running an OpenGL simulation and want maximum performance,
-              even when on battery power.
-            </doc:para>
-            <doc:para>
-              I'm running an SQL server for a credit card company, and want the
-              server to request low latency CPU and network as any delay costs money.
-            </doc:para>
-            <doc:para>
-              I'm an admin, and want to change the power consumption vs. latency
-              from cron scripts so it uses high latency during the night for
-              maximum power saving, and low latency during business hours.
-            </doc:para>
-            <doc:para>
-              I want high throughput when copying files, but want low throughput
-              for downloading updates in the background.
-            </doc:para>
-            <doc:para>
-              I want my power manager to set all latencies to lowest when on
-              AC power.
-            </doc:para>
-            <doc:para>
-              I don't want my users messing with latency settings.
-            </doc:para>
-            <doc:para>
-              I'm and admin and I want to be able to override all latency
-              settings on my machines.
-            </doc:para>
-          </doc:listitem>
-        </doc:itemizedlist>
-        <doc:para>
-          Why don't applications use the PMQoS interface directly?
-          By providing a framework we can override requests by policy, and also
-          control requests from random services.
-          You also can't set latencies unless you're the root user, which is not
-          suitable for the desktop use case.
-        </doc:para>
-        <doc:para>
-          Of course, you can do if you really want, but then you loose the
-          benefits of the query interface and the policy override,
-          and have to run your application as root.
-        </doc:para>
-      </doc:description>
-    </doc:doc>
-
-    <!-- ************************************************************ -->
-    <method name="SetMinimumLatency">
-      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
-      <arg name="type" direction="in" type="s">
-        <doc:doc>
-          <doc:summary>
-            The type of latency to control, <doc:tt>cpu_dma</doc:tt> or
-            <doc:tt>network</doc:tt>.
-          </doc:summary>
-        </doc:doc>
-      </arg>
-      <arg name="value" direction="in" type="i">
-        <doc:doc>
-          <doc:summary>
-            The value, in microseconds or kilobits per second.
-            The value <doc:tt>-1</doc:tt> means unset and the default is used.
-          </doc:summary>
-        </doc:doc>
-      </arg>
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Set the minimum acceptable latency of the system.
-            Setting this value tells the system to not attempt latencies below this setting.
-            This may be useful in a data center or server room, when you want to override the
-            latency requests from applications.
-            This may be required if the server room is operating outside a standard thermal
-            or power envelope, and an override is required.
-            You do not have to use this method during normal operation.
-          </doc:para>
-        </doc:description>
-        <doc:permission>Callers need the <doc:tt>org.freedesktop.upower.qos.set-minimum-latency</doc:tt> authorization</doc:permission>
-        <doc:errors>
-          <doc:error name="&ERROR_GENERAL;">if an error occured while setting the latency</doc:error>
-        </doc:errors>
-      </doc:doc>
-    </method>
-
-    <!-- ************************************************************ -->
-    <method name="RequestLatency">
-      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
-      <arg name="type" direction="in" type="s">
-        <doc:doc>
-          <doc:summary>
-            The type of latency to control, <doc:tt>cpu_dma</doc:tt> or
-            <doc:tt>network</doc:tt>.
-          </doc:summary>
-        </doc:doc>
-      </arg>
-      <arg name="value" direction="in" type="i">
-        <doc:doc>
-          <doc:summary>
-            The value, in microseconds or kilobits per second.
-            The value <doc:tt>-1</doc:tt> means remove all latency requirements.
-          </doc:summary>
-        </doc:doc>
-      </arg>
-      <arg name="persistent" direction="in" type="b">
-        <doc:doc>
-          <doc:summary>
-            If the latency request outlives the connection.
-            When the application issuing the request disconnects from the system
-            bus, the latency request is automatically cleaned up.
-            By setting this flag to TRUE, the request is not cleaned up when
-            the client disconnects, and the cookie is preserved acress reboots.
-          </doc:summary>
-        </doc:doc>
-      </arg>
-      <arg name="cookie" direction="out" type="u">
-        <doc:doc>
-          <doc:summary>
-            A cookie that identifies the request. This allows an application or
-            service to request multiple latency settings from one process, and for
-            other processes to cancel requests.
-          </doc:summary>
-        </doc:doc>
-      </arg>
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Set the required latency of an application or service.
-          </doc:para>
-        </doc:description>
-        <doc:permission>
-          Callers need the
-          <doc:tt>org.freedesktop.upower.qos.request-latency-persistent</doc:tt>
-          authorization if <doc:tt>persistent</doc:tt> is TRUE, or
-          <doc:tt>org.freedesktop.upower.qos.request-latency</doc:tt> otherwise.
-        </doc:permission>
-        <doc:errors>
-          <doc:error name="&ERROR_GENERAL;">if an error occured while setting the latency</doc:error>
-        </doc:errors>
-      </doc:doc>
-    </method>
-
-    <!-- ************************************************************ -->
-    <method name="CancelRequest">
-      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
-      <arg name="cookie" direction="in" type="u">
-        <doc:doc>
-          <doc:summary>
-            A cookie that identifies the request. This allows an application or
-            serivice to request multiple latency settings from one process.
-          </doc:summary>
-        </doc:doc>
-      </arg>
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Cancel the latency request from the application or service.
-          </doc:para>
-        </doc:description>
-        <doc:permission>
-          Callers need the
-          <doc:tt>org.freedesktop.upower.qos.cancel-request</doc:tt>
-          authorization if they were not the one issuing the request.
-        </doc:permission>
-        <doc:errors>
-          <doc:error name="&ERROR_GENERAL;">if an error occured while clearing the latency</doc:error>
-        </doc:errors>
-      </doc:doc>
-    </method>
-
-    <!-- ************************************************************ -->
-    <method name="GetLatency">
-      <arg name="type" direction="in" type="s">
-        <doc:doc>
-          <doc:summary>
-            The type of latency to return, <doc:tt>cpu_dma</doc:tt> or
-            <doc:tt>network</doc:tt>.
-          </doc:summary>
-        </doc:doc>
-      </arg>
-      <arg name="value" direction="out" type="i">
-        <doc:doc>
-          <doc:summary>
-            The value, in microseconds or kilobits per second.
-            The value <doc:tt>-1</doc:tt> means not set or unavailable.
-          </doc:summary>
-        </doc:doc>
-      </arg>
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Get the lowest latency state on the system at the current time.
-          </doc:para>
-        </doc:description>
-        <doc:errors>
-          <doc:error name="&ERROR_GENERAL;">if an error occured while getting the latency</doc:error>
-        </doc:errors>
-      </doc:doc>
-    </method>
-
-    <!-- ************************************************************ -->
-    <signal name="LatencyChanged">
-      <arg name="type" direction="out" type="s">
-        <doc:doc>
-          <doc:summary>
-            The type of latency that changed, <doc:tt>cpu_dma</doc:tt> or
-            <doc:tt>network</doc:tt>.
-          </doc:summary>
-        </doc:doc>
-      </arg>
-      <arg name="value" direction="out" type="i">
-        <doc:doc>
-          <doc:summary>
-            The value, in microseconds or kilobits per second.
-            The value <doc:tt>-1</doc:tt> means not set or unavailable.
-          </doc:summary>
-        </doc:doc>
-      </arg>
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Some latency value has changed.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </signal>
-
-    <!-- ************************************************************ -->
-    <method name="GetLatencyRequests">
-      <arg name="requests" direction="out" type="a(uuusxbssi)">
-        <doc:doc>
-          <doc:summary>
-            The request lists, where each application can request different
-            latency types.
-            <doc:list>
-              <doc:item>
-                <doc:term>cookie</doc:term>
-                <doc:definition>
-                  The random cookie that identifies the request.
-                </doc:definition>
-              </doc:item>
-              <doc:item>
-                <doc:term>uid</doc:term>
-                <doc:definition>
-                  The user ID that issued the request.
-                </doc:definition>
-              </doc:item>
-              <doc:item>
-                <doc:term>pid</doc:term>
-                <doc:definition>
-                  The process ID of the application.
-                </doc:definition>
-              </doc:item>
-              <doc:item>
-                <doc:term>exec</doc:term>
-                <doc:definition>
-                  The executable that issued the request.
-                </doc:definition>
-              </doc:item>
-              <doc:item>
-                <doc:term>timespec</doc:term>
-                <doc:definition>
-                  The number of seconds since the epoch.
-                </doc:definition>
-              </doc:item>
-              <doc:item>
-                <doc:term>persistent</doc:term>
-                <doc:definition>
-                  If the request is persistent and outlives the connection lifetime.
-                </doc:definition>
-              </doc:item>
-              <doc:item>
-                <doc:term>type</doc:term>
-                <doc:definition>
-                  The type of the request, <doc:tt>cpu_dma</doc:tt> or
-                  <doc:tt>network</doc:tt>.
-                </doc:definition>
-              </doc:item>
-              <doc:item>
-                <doc:term>value</doc:term>
-                <doc:definition>
-                  The value, in microseconds or kilobits per second.
-                </doc:definition>
-              </doc:item>
-            </doc:list>
-        </doc:summary></doc:doc>
-      </arg>
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Gets all the system requests from all services and applications.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </method>
-
-    <!-- ************************************************************ -->
-    <signal name="RequestsChanged">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            The latency requests on the system have changed.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </signal>
-
-  </interface>
-
-</node>
diff --git a/src/org.freedesktop.UPower.Wakeups.xml b/src/org.freedesktop.UPower.Wakeups.xml
deleted file mode 100644
index 7faa126..0000000
--- a/src/org.freedesktop.UPower.Wakeups.xml
+++ /dev/null
@@ -1,131 +0,0 @@
-<!DOCTYPE node PUBLIC
-"-//freedesktop//DTD D-BUS Object Introspection 1.0//EN"
-"http://www.freedesktop.org/standards/dbus/1.0/introspect.dtd" [
-  <!ENTITY ERROR_GENERAL "org.freedesktop.UPower.GeneralError">
-]>
-<node name="/" xmlns:doc="http://www.freedesktop.org/dbus/1.0/doc.dtd">
-  <interface name="org.freedesktop.UPower.Wakeups">
-    <doc:doc>
-      <doc:description>
-        <doc:para>
-          org.freedesktop.UPower.Wakeups is a DBus interface implemented
-          by UPower.
-          It allows applications to watch what applications and drivers are
-          causing the wakeups on the system.
-        </doc:para>
-      </doc:description>
-    </doc:doc>
-
-    <property name="HasCapability" type="b" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            If the system has the ability to profile wakeups.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <!-- ************************************************************ -->
-    <method name="GetTotal">
-      <arg name="value" direction="out" type="u">
-        <doc:doc>
-          <doc:summary>
-            The number of wakeups per second.
-          </doc:summary>
-        </doc:doc>
-      </arg>
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Get the number of wakeups per second.
-          </doc:para>
-        </doc:description>
-        <doc:errors>
-          <doc:error name="&ERROR_GENERAL;">if an error occured while getting the latency</doc:error>
-        </doc:errors>
-      </doc:doc>
-    </method>
-
-    <!-- ************************************************************ -->
-    <signal name="TotalChanged">
-      <arg name="value" direction="out" type="u">
-        <doc:doc>
-          <doc:summary>
-            The number of wakeups per second.
-          </doc:summary>
-        </doc:doc>
-      </arg>
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            The number of wakeups per second has changed.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </signal>
-
-    <!-- ************************************************************ -->
-    <method name="GetData">
-      <arg name="data" direction="out" type="a(budss)">
-        <doc:doc>
-          <doc:summary>
-            The data of all the processes and drivers which contribute to the
-            wakeups on the system.
-            <doc:list>
-              <doc:item>
-                <doc:term>is_userspace</doc:term>
-                <doc:definition>
-                  If the wakeup is from userspace.
-                </doc:definition>
-              </doc:item>
-              <doc:item>
-                <doc:term>id</doc:term>
-                <doc:definition>
-                  The process ID of the application, or the IRQ for kernel drivers.
-                </doc:definition>
-              </doc:item>
-              <doc:item>
-                <doc:term>value</doc:term>
-                <doc:definition>
-                  The number of wakeups per second.
-                </doc:definition>
-              </doc:item>
-              <doc:item>
-                <doc:term>cmdline</doc:term>
-                <doc:definition>
-                  The command line for the application, or NULL for kernel drivers.
-                </doc:definition>
-              </doc:item>
-              <doc:item>
-                <doc:term>details</doc:term>
-                <doc:definition>
-                  The details about the wakeup.
-                </doc:definition>
-              </doc:item>
-            </doc:list>
-        </doc:summary></doc:doc>
-      </arg>
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Gets all the wakeups from drivers and applications.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </method>
-
-    <!-- ************************************************************ -->
-    <signal name="DataChanged">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            The wakeup data has changed.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </signal>
-
-  </interface>
-
-</node>
diff --git a/src/org.freedesktop.UPower.conf.in b/src/org.freedesktop.UPower.conf.in
deleted file mode 100644
index fc2b604..0000000
--- a/src/org.freedesktop.UPower.conf.in
+++ /dev/null
@@ -1,40 +0,0 @@
-<?xml version="1.0" encoding="UTF-8"?> <!-- -*- XML -*- -->
-
-<!DOCTYPE busconfig PUBLIC
- "-//freedesktop//DTD D-BUS Bus Configuration 1.0//EN"
- "http://www.freedesktop.org/standards/dbus/1.0/busconfig.dtd">
-<busconfig>
-  <!-- Only root can own the service -->
-  <policy user="root">
-    <allow own="org.freedesktop.UPower"/>
-  </policy>
-  <policy context="default">
-
-    <allow send_destination="org.freedesktop.UPower"
-           send_interface="org.freedesktop.DBus.Introspectable"/>
-
-    <allow send_destination="org.freedesktop.UPower"
-           send_interface="org.freedesktop.DBus.Peer"/>
-    <allow send_destination="org.freedesktop.UPower"
-           send_interface="org.freedesktop.DBus.Properties"/>
-    <allow send_destination="org.freedesktop.UPower.Device"
-           send_interface="org.freedesktop.DBus.Properties"/>
-    <allow send_destination="org.freedesktop.UPower.QoS"
-           send_interface="org.freedesktop.DBus.Properties"/>
-    <allow send_destination="org.freedesktop.UPower.KbdBacklight"
-           send_interface="org.freedesktop.DBus.Properties"/>
-    <allow send_destination="org.freedesktop.UPower.Wakeups"
-           send_interface="org.freedesktop.DBus.Properties"/>
-
-    <allow send_destination="org.freedesktop.UPower"
-           send_interface="org.freedesktop.UPower"/>
-    <allow send_destination="org.freedesktop.UPower"
-           send_interface="org.freedesktop.UPower.Device"/>
-    <allow send_destination="org.freedesktop.UPower"
-           send_interface="org.freedesktop.UPower.QoS"/>
-    <allow send_destination="org.freedesktop.UPower"
-           send_interface="org.freedesktop.UPower.KbdBacklight"/>
-    <allow send_destination="org.freedesktop.UPower"
-	   send_interface="org.freedesktop.UPower.Wakeups"/>
-  </policy>
-</busconfig>
diff --git a/src/org.freedesktop.UPower.service.in b/src/org.freedesktop.UPower.service.in
deleted file mode 100644
index 199d7d3..0000000
--- a/src/org.freedesktop.UPower.service.in
+++ /dev/null
@@ -1,6 +0,0 @@
-[D-BUS Service]
-Name=org.freedesktop.UPower
-Exec=@libexecdir@/upowerd
-User=root
-SystemdService=upower.service
-
diff --git a/src/org.freedesktop.UPower.xml b/src/org.freedesktop.UPower.xml
deleted file mode 100644
index 9582ab5..0000000
--- a/src/org.freedesktop.UPower.xml
+++ /dev/null
@@ -1,395 +0,0 @@
-<!DOCTYPE node PUBLIC
-"-//freedesktop//DTD D-BUS Object Introspection 1.0//EN"
-"http://www.freedesktop.org/standards/dbus/1.0/introspect.dtd">
-<node name="/" xmlns:doc="http://www.freedesktop.org/dbus/1.0/doc.dtd">
-
-  <interface name="org.freedesktop.UPower">
-    <doc:doc>
-      <doc:description>
-        <doc:para>
-          The UPower service is available via the system message
-          bus. To access the service, use
-          the <doc:tt>org.freedesktop.UPower</doc:tt> interface on
-          the <doc:tt>/org/freedesktop/UPower</doc:tt> object on
-          the D-Bus system bus service with the well-known
-          name <doc:tt>org.freedesktop.UPower</doc:tt>.
-        </doc:para>
-        <doc:para>
-          <doc:example language="shell" title="simple example">
-            <doc:code>
-$ dbus-send --print-reply \
-            --system \
-            --dest=org.freedesktop.UPower \
-            /org/freedesktop/UPower \
-            org.freedesktop.UPower.EnumerateDevices
-
-method return sender=:1.386 -> dest=:1.451 reply_serial=2
-   array [
-      object path "/org/freedesktop/UPower/devices/line_power_AC"
-      object path "/org/freedesktop/UPower/devices/battery_BAT0"
-   ]
-            </doc:code>
-          </doc:example>
-        </doc:para>
-      </doc:description>
-    </doc:doc>
-
-    <!-- ************************************************************ -->
-
-    <method name="EnumerateDevices">
-      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
-      <arg name="devices" direction="out" type="ao">
-        <doc:doc><doc:summary>An array of object paths for devices.</doc:summary></doc:doc>
-      </arg>
-
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Enumerate all power objects on the system.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </method>
-
-    <!-- ************************************************************ -->
-
-    <signal name="DeviceAdded">
-      <arg name="device" type="o">
-        <doc:doc><doc:summary>Object path of device that was added.</doc:summary></doc:doc>
-      </arg>
-
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Emitted when a device is added.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </signal>
-
-    <!-- ************************************************************ -->
-
-    <signal name="DeviceRemoved">
-      <arg name="device" type="o">
-        <doc:doc><doc:summary>Object path of device that was removed.</doc:summary></doc:doc>
-      </arg>
-
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Emitted when a device is removed.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </signal>
-
-    <!-- ************************************************************ -->
-
-    <signal name="DeviceChanged">
-      <arg name="device" type="o">
-        <doc:doc><doc:summary>Object path of device that was changed.</doc:summary></doc:doc>
-      </arg>
-
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Emitted when a device changed.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </signal>
-
-    <!-- ************************************************************ -->
-
-    <signal name="Changed">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Emitted when one or more properties on the object changes.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </signal>
-
-    <!-- ************************************************************ -->
-
-    <signal name="Sleeping">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            This signal is sent when the session is about to be suspended or
-            hibernated.
-          </doc:para>
-          <doc:para>
-            This signal is DEPRECATED. Use NotifySleep() instead.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </signal>
-
-    <!-- ************************************************************ -->
-
-    <signal name="NotifySleep">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            This signal is sent when the session is about to be suspended or
-            hibernated.
-            Session and system programs have one second to do anything required
-            before the sleep action is taken (such as sending out Avahi or
-            Jabber messages).
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-      <arg name="action" direction="out" type="s">
-        <doc:doc>
-          <doc:summary>
-            The sleep action type, e.g. <doc:tt>suspend</doc:tt>,
-            <doc:tt>hibernate</doc:tt> or <doc:tt>hybrid</doc:tt>.
-          </doc:summary>
-        </doc:doc>
-      </arg>
-    </signal>
-
-    <!-- ************************************************************ -->
-
-    <signal name="Resuming">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            This signal is sent when the session has just returned from
-            Suspend() or Hibernate().
-          </doc:para>
-          <doc:para>
-            This signal is DEPRECATED. Use NotifyResume() instead.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </signal>
-
-    <!-- ************************************************************ -->
-
-    <signal name="NotifyResume">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            This signal is sent when the session has just returned from
-            Suspend() or Hibernate().
-            Session and system programs can then do anything required (such as
-            sending out Avahi or Jabber messages).
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-      <arg name="action" direction="out" type="s">
-        <doc:doc>
-          <doc:summary>
-            The sleep action type, e.g. <doc:tt>suspend</doc:tt>,
-            <doc:tt>hibernate</doc:tt> or <doc:tt>hybrid</doc:tt>.
-          </doc:summary>
-        </doc:doc>
-      </arg>
-    </signal>
-
-    <!-- ************************************************************ -->
-
-    <method name="AboutToSleep">
-      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            This method tells UPower that the Suspend() or Hibernate() method
-            is about to be called.
-            This allows UPower to emit the Suspending signal whilst
-            session activities are happening that have to be done before the
-            suspend process is started.
-          </doc:para>
-          <doc:para>
-            This method would typically be called by the session power
-            management daemon, before it locks the screen and waits for the
-            screen to fade to black.
-            The session power management component would then call Suspend() or
-            Hibernate() when these syncronous tasks have completed.
-          </doc:para>
-          <doc:para>
-            If this method is not called than nothing bad will happen and
-            Suspend() or Hibernate() will block for the required second.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-      <arg name="action" direction="in" type="s">
-        <doc:doc>
-          <doc:summary>
-            The sleep action type, e.g. <doc:tt>suspend</doc:tt> or
-            <doc:tt>hibernate</doc:tt>.
-          </doc:summary>
-        </doc:doc>
-      </arg>
-    </method>
-
-    <!-- ************************************************************ -->
-
-    <method name="Suspend">
-      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Suspends the computer into a low power state.
-            System state is not preserved if the power is lost.
-          </doc:para>
-          <doc:para>
-            If AboutToSleep() has not been called then UPower will send
-            the Sleeping() signal and block for one second.
-          </doc:para>
-          <doc:para>
-            If AboutToSleep() has been called less than one second
-            before this method is called then UPower will block for the
-            remaining time to complete one second of delay.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </method>
-
-    <!-- ************************************************************ -->
-
-    <method name="SuspendAllowed">
-      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
-      <arg name="allowed" direction="out" type="b">
-        <doc:doc><doc:summary>TRUE if allowed, otherwise FALSE</doc:summary></doc:doc>
-      </arg>
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Check if the caller has (or can get) the PolicyKit privilege to call
-            <doc:ref type="method" to="Power.Suspend">Suspend</doc:ref>.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </method>
-
-    <!-- ************************************************************ -->
-
-    <method name="Hibernate">
-      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Hibernates the computer into a low power state.
-            System state is preserved if the power is lost.
-          </doc:para>
-          <doc:para>
-            If AboutToSleep() has not been called then UPower will send
-            the Sleeping() signal and block for one second.
-          </doc:para>
-          <doc:para>
-            If AboutToSleep() has been called less than one second
-            before this method is called then UPower will block for the
-            remaining time to complete one second of delay.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </method>
-
-    <!-- ************************************************************ -->
-
-    <method name="HibernateAllowed">
-      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
-      <arg name="allowed" direction="out" type="b">
-        <doc:doc><doc:summary>TRUE if allowed, otherwise FALSE</doc:summary></doc:doc>
-      </arg>
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Check if the caller has (or can get) the PolicyKit privilege to call
-            <doc:ref type="method" to="Power.Hibernate">Hibernate</doc:ref>.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </method>
-
-    <!-- ************************************************************ -->
-
-    <property name="DaemonVersion" type="s" access="read">
-      <doc:doc><doc:description><doc:para>
-            Version of the running daemon, e.g. <doc:tt>002</doc:tt>.
-      </doc:para></doc:description></doc:doc>
-    </property>
-
-    <property name="CanSuspend" type="b" access="read">
-      <doc:doc><doc:description><doc:para>
-            Whether the system is able to suspend.
-      </doc:para></doc:description></doc:doc>
-    </property>
-
-    <property name="CanHibernate" type="b" access="read">
-      <doc:doc><doc:description><doc:para>
-            Whether the system is able to hibernate.
-      </doc:para></doc:description></doc:doc>
-    </property>
-
-    <property name="OnBattery" type="b" access="read">
-      <doc:doc><doc:description><doc:para>
-            Indicates whether the system is running on battery power.
-            This property is provided for convenience.
-      </doc:para></doc:description></doc:doc>
-    </property>
-
-    <property name="OnLowBattery" type="b" access="read">
-      <doc:doc><doc:description><doc:para>
-            Indicates whether the system is running on battery power and if the battery is critically low.
-            This property is provided for convenience.
-      </doc:para></doc:description></doc:doc>
-    </property>
-
-    <property name="LidIsClosed" type="b" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            Indicates if the laptop lid is closed where the display cannot be seen.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="LidIsPresent" type="b" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            If the system has a lid device.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="LidForceSleep" type="b" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            If the system really has to sleep when the lid is closed.
-            Some laptops actually melt (!) if the lid is closed and the
-            computer keeps running. We blacklist those, and do something
-            sane for the other machines.
-          </doc:para>
-          <doc:para>
-            This allows us to set the default session policy to not
-            suspend on lid close if the laptop is docked, and be sure
-            the machine is not going to melt.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-    <property name="IsDocked" type="b" access="read">
-      <doc:doc>
-        <doc:description>
-          <doc:para>
-            If the system is currently docked.
-            Note: the "is-docked" value is the result of a heuristic,
-            which may involve testing the display output.
-          </doc:para>
-        </doc:description>
-      </doc:doc>
-    </property>
-
-  </interface>
-
-</node>
diff --git a/src/org.freedesktop.UPowerCompat.Device.xml b/src/org.freedesktop.UPowerCompat.Device.xml
new file mode 100644
index 0000000..7f32837
--- /dev/null
+++ b/src/org.freedesktop.UPowerCompat.Device.xml
@@ -0,0 +1,728 @@
+<!DOCTYPE node PUBLIC
+"-//freedesktop//DTD D-BUS Object Introspection 1.0//EN"
+"http://www.freedesktop.org/standards/dbus/1.0/introspect.dtd" [
+  <!ENTITY ERROR_GENERAL "org.freedesktop.UPowerCompat.Device.GeneralError">
+]>
+<node name="/" xmlns:doc="http://www.freedesktop.org/dbus/1.0/doc.dtd">
+  <interface name="org.freedesktop.UPowerCompat.Device">
+    <doc:doc>
+      <doc:description>
+        <doc:para>
+          Objects implementing this interface are usually discovered through
+          the <doc:tt>org.freedesktop.UPowerCompat</doc:tt> interface on
+          the <doc:tt>/org/freedesktop/UPowerCompat</doc:tt> object on
+          the D-Bus system bus service with the well-known
+          name <doc:tt>org.freedesktop.UPowerCompat</doc:tt> using
+          the
+          <doc:ref type="method" to="Power.EnumerateDevices">EnumerateDevices</doc:ref>
+          method.
+        </doc:para>
+        <doc:para>
+          <doc:example language="shell" title="simple example">
+            <doc:code>
+$ dbus-send --print-reply \
+            --system \
+            --dest=org.freedesktop.UPowerCompat \
+            /org/freedesktop/UPowerCompat/devices/battery_BAT0 \
+            org.freedesktop.DBus.Properties.GetAll \
+            string:org.freedesktop.UPowerCompat.Device
+
+method return sender=:1.386 -> dest=:1.477 reply_serial=2
+   array [
+      dict entry(
+         string "native-path"
+         variant             string "/sys/devices/LNXSYSTM:00/device:00/PNP0A08:00/device:01/PNP0C09:00/PNP0C0A:00/power_supply/BAT0"
+      )
+      dict entry(
+         string "vendor"
+         variant             string "SONY"
+      )
+      dict entry(
+         string "model"
+         variant             string "42T4568"
+      )
+      dict entry(
+         string "serial"
+         variant             string "4179"
+      )
+      dict entry(
+         string "update-time"
+         variant             uint64 1226417875
+      )
+      dict entry(
+         string "type"
+         variant             uint 2
+      )
+      dict entry(
+         string "power-supply"
+         variant             boolean true
+      )
+      dict entry(
+         string "has-history"
+         variant             boolean true
+      )
+      dict entry(
+         string "has-statistics"
+         variant             boolean true
+      )
+      dict entry(
+         string "online"
+         variant             boolean false
+      )
+      dict entry(
+         string "energy"
+         variant             double 72.85
+      )
+      dict entry(
+         string "energy-empty"
+         variant             double 0
+      )
+      dict entry(
+         string "energy-full"
+         variant             double 74.55
+      )
+      dict entry(
+         string "energy-full-design"
+         variant             double 74.88
+      )
+      dict entry(
+         string "energy-rate"
+         variant             double 0
+      )
+      dict entry(
+         string "voltage"
+         variant             double 16.415
+      )
+      dict entry(
+         string "time-to-empty"
+         variant             int64 0
+      )
+      dict entry(
+         string "time-to-full"
+         variant             int64 0
+      )
+      dict entry(
+         string "percentage"
+         variant             double 97.7197
+      )
+      dict entry(
+         string "is-present"
+         variant             boolean true
+      )
+      dict entry(
+         string "state"
+         variant             uint 3
+      )
+      dict entry(
+         string "is-rechargeable"
+         variant             boolean true
+      )
+      dict entry(
+         string "capacity"
+         variant             double 100
+      )
+      dict entry(
+         string "technology"
+         variant             uint 1
+      )
+   ]
+            </doc:code>
+          </doc:example>
+        </doc:para>
+        <doc:para>
+          Unless otherwise noted, an empty string or the value 0 in a
+          property on this interface means not set.
+        </doc:para>
+      </doc:description>
+    </doc:doc>
+
+
+    <!-- ************************************************************ -->
+    <method name="Refresh">
+      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Refreshes the data collected from the power source.
+          </doc:para>
+        </doc:description>
+        <doc:permission>Callers need the org.freedesktop.upower_compat.refresh-power-source authorization</doc:permission>
+        <doc:errors>
+          <doc:error name="&ERROR_GENERAL;">if an error occured while refreshing</doc:error>
+        </doc:errors>
+      </doc:doc>
+    </method>
+
+    <!-- ************************************************************ -->
+    <signal name="Changed">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Some value on the power source changed.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </signal>
+
+    <!-- ************************************************************ -->
+    <method name="GetHistory">
+      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
+      <arg name="type" direction="in" type="s">
+        <doc:doc><doc:summary>The type of history.
+        Valid types are <doc:tt>rate</doc:tt> or <doc:tt>charge</doc:tt>.</doc:summary></doc:doc>
+      </arg>
+      <arg name="timespan" direction="in" type="u">
+        <doc:doc><doc:summary>The amount of data to return in seconds, or 0 for all.</doc:summary></doc:doc>
+      </arg>
+      <arg name="resolution" direction="in" type="u">
+        <doc:doc>
+          <doc:summary>
+            The approximate number of points to return.
+            A higher resolution is more accurate, at the expense of plotting speed.
+          </doc:summary>
+        </doc:doc>
+      </arg>
+      <arg name="data" direction="out" type="a(udu)">
+        <doc:doc><doc:summary>
+            The history data for the power device, if the device supports history.
+            Data is ordered from the earliest in time, to the newest data point.
+            Each element contains the following members:
+            <doc:list>
+              <doc:item>
+                <doc:term>time</doc:term>
+                <doc:definition>
+                  The time value in seconds from the <doc:tt>gettimeofday()</doc:tt> method.
+                </doc:definition>
+              </doc:item>
+              <doc:item>
+                <doc:term>value</doc:term>
+                <doc:definition>
+                  The data value, for instance the rate in W or the charge in %.
+                </doc:definition>
+              </doc:item>
+              <doc:item>
+                <doc:term>state</doc:term>
+                <doc:definition>
+                  The state of the device, for instance <doc:tt>charging</doc:tt> or
+                  <doc:tt>discharging</doc:tt>.
+                </doc:definition>
+              </doc:item>
+            </doc:list>
+        </doc:summary></doc:doc>
+      </arg>
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Gets history for the power device that is persistent across reboots.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </method>
+
+    <!-- ************************************************************ -->
+    <method name="GetStatistics">
+      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
+      <arg name="type" direction="in" type="s">
+        <doc:doc><doc:summary>The mode for the statistics.
+        Valid types are <doc:tt>charging</doc:tt> or <doc:tt>discharging</doc:tt>.</doc:summary></doc:doc>
+      </arg>
+      <arg name="data" direction="out" type="a(dd)">
+        <doc:doc><doc:summary>
+            The statistics data for the power device.
+            Each element contains the following members:
+            <doc:list>
+              <doc:item>
+                <doc:term>value</doc:term>
+                <doc:definition>
+                  The value of the percentage point, usually in seconds
+                </doc:definition>
+              </doc:item>
+              <doc:item>
+                <doc:term>accuracy</doc:term>
+                <doc:definition>
+                  The accuracy of the prediction in percent.
+                </doc:definition>
+              </doc:item>
+            </doc:list>
+        </doc:summary></doc:doc>
+      </arg>
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Gets statistics for the power device that may be interesting
+            to show on a graph in the session.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </method>
+
+    <!-- ************************************************************ -->
+    <property name="NativePath" type="s" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            OS specific native path of the power source. On Linux this
+            is the sysfs path, for
+            example <doc:tt>/sys/devices/LNXSYSTM:00/device:00/PNP0C0A:00/power_supply/BAT0</doc:tt>. Is
+            blank if the device is being driven by a user space
+            driver.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="Vendor" type="s" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Name of the vendor of the battery.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="Model" type="s" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Name of the model of this battery.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="Serial" type="s" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Unique serial number of the battery.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="UpdateTime" type="t" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            The point in time (seconds since the Epoch Jan 1, 1970
+            0:00 UTC) that data was read from the power source.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="Type" type="u" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Type of power source.
+          </doc:para>
+          <doc:list>
+            <doc:item>
+              <doc:term>0</doc:term><doc:definition>Unknown</doc:definition>
+            </doc:item>
+            <doc:item>
+              <doc:term>1</doc:term><doc:definition>Line Power</doc:definition>
+            </doc:item>
+            <doc:item>
+              <doc:term>2</doc:term><doc:definition>Battery</doc:definition>
+            </doc:item>
+            <doc:item>
+              <doc:term>3</doc:term><doc:definition>Ups</doc:definition>
+            </doc:item>
+            <doc:item>
+              <doc:term>4</doc:term><doc:definition>Monitor</doc:definition>
+            </doc:item>
+            <doc:item>
+              <doc:term>5</doc:term><doc:definition>Mouse</doc:definition>
+            </doc:item>
+            <doc:item>
+              <doc:term>6</doc:term><doc:definition>Keyboard</doc:definition>
+            </doc:item>
+            <doc:item>
+              <doc:term>7</doc:term><doc:definition>Pda</doc:definition>
+            </doc:item>
+            <doc:item>
+              <doc:term>8</doc:term><doc:definition>Phone</doc:definition>
+            </doc:item>
+          </doc:list>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="PowerSupply" type="b" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            If the power device is used to supply the system.
+            This would be set TRUE for laptop batteries and UPS devices,
+            but set FALSE for wireless mice or PDAs.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="HasHistory" type="b" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            If the power device has history.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="HasStatistics" type="b" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            If the power device has statistics.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="Online" type="b" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Whether power is currently being provided through line power.
+            This property is only valid if the property
+            <doc:ref type="property" to="Source:Type">type</doc:ref>
+            has the value "line-power".
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="Energy" type="d" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Amount of energy (measured in Wh) currently available in
+            the power source.
+          </doc:para><doc:para>
+            This property is only valid if the property
+            <doc:ref type="property" to="Source:Type">type</doc:ref>
+            has the value "battery".
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="EnergyEmpty" type="d" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Amount of energy (measured in Wh) in the power source when
+            it's considered to be empty.
+          </doc:para><doc:para>
+            This property is only valid if the property
+            <doc:ref type="property" to="Source:Type">type</doc:ref>
+            has the value "battery".
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="EnergyFull" type="d" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Amount of energy (measured in Wh) in the power source when
+            it's considered full.
+          </doc:para><doc:para>
+            This property is only valid if the property
+            <doc:ref type="property" to="Source:Type">type</doc:ref>
+            has the value "battery".
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="EnergyFullDesign" type="d" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Amount of energy (measured in Wh) the power source is
+            designed to hold when it's considered full.
+          </doc:para><doc:para>
+            This property is only valid if the property
+            <doc:ref type="property" to="Source:Type">type</doc:ref>
+            has the value "battery".
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="EnergyRate" type="d" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Amount of energy being drained from the source, measured
+            in W. If positive, the source is being discharged, if
+            negative it's being charged.
+          </doc:para><doc:para>
+            This property is only valid if the property
+            <doc:ref type="property" to="Source:Type">type</doc:ref>
+            has the value "battery".
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="Voltage" type="d" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Voltage in the Cell or being recorded by the meter.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="Luminosity" type="d" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Luminosity being recorded by the meter.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="TimeToEmpty" type="x" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Number of seconds until the power source is considered empty.
+            Is set to 0 if unknown.
+          </doc:para><doc:para>
+            This property is only valid if the property
+            <doc:ref type="property" to="Source:Type">type</doc:ref>
+            has the value "battery".
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="TimeToFull" type="x" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Number of seconds until the power source is considered full.
+            Is set to 0 if unknown.
+          </doc:para><doc:para>
+            This property is only valid if the property
+            <doc:ref type="property" to="Source:Type">type</doc:ref>
+            has the value "battery".
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="Percentage" type="d" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            The amount of energy left in the power source expressed as
+            a percentage between 0 and 100. Typically this is the same as
+            (<doc:ref type="property" to="Source:Energy">energy</doc:ref> -
+            <doc:ref type="property" to="Source:EnergyEmpty">energy-empty</doc:ref>) /
+            (<doc:ref type="property" to="Source:EnergyFull">energy-full</doc:ref> -
+            <doc:ref type="property" to="Source:EnergyEmpty">energy-empty</doc:ref>).
+            However, some primitive power sources are capable of only
+            reporting percentages and in this case the energy-*
+            properties will be unset while this property is set.
+          </doc:para><doc:para>
+            This property is only valid if the property
+            <doc:ref type="property" to="Source:Type">type</doc:ref>
+            has the value "battery".
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="Temperature" type="d" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            The temperature of the device in degrees Celsius. This property is
+            only valid if the property
+            <doc:ref type="property" to="Source:Type">type</doc:ref>
+            has the value "battery".
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="IsPresent" type="b" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            If the power source is present in the bay.
+            This field is required as some batteries are hot-removable, for example
+            expensive UPS and most laptop batteries.
+          </doc:para><doc:para>
+            This property is only valid if the property
+            <doc:ref type="property" to="Source:Type">type</doc:ref>
+            has the value "battery".
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="State" type="u" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            The battery power state.
+          </doc:para>
+          <doc:list>
+            <doc:item>
+              <doc:term>0</doc:term><doc:definition>Unknown</doc:definition>
+            </doc:item>
+            <doc:item>
+              <doc:term>1</doc:term><doc:definition>Charging</doc:definition>
+            </doc:item>
+            <doc:item>
+              <doc:term>2</doc:term><doc:definition>Discharging</doc:definition>
+            </doc:item>
+            <doc:item>
+              <doc:term>3</doc:term><doc:definition>Empty</doc:definition>
+            </doc:item>
+            <doc:item>
+              <doc:term>4</doc:term><doc:definition>Fully charged</doc:definition>
+            </doc:item>
+            <doc:item>
+              <doc:term>5</doc:term><doc:definition>Pending charge</doc:definition>
+            </doc:item>
+            <doc:item>
+              <doc:term>6</doc:term><doc:definition>Pending discharge</doc:definition>
+            </doc:item>
+          </doc:list>
+          <doc:para>
+            This property is only valid if the property
+            <doc:ref type="property" to="Source:Type">type</doc:ref>
+            has the value "battery".
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="IsRechargeable" type="b" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            If the power source is rechargeable.
+          </doc:para><doc:para>
+            This property is only valid if the property
+            <doc:ref type="property" to="Source:Type">type</doc:ref>
+            has the value "battery".
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="Capacity" type="d" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            The capacity of the power source expressed as a percentage between 0 and 100.
+            The capacity of the battery will reduce with age.
+            A capacity value less than 75% is usually a sign that you should renew your battery.
+            Typically this value is the same as
+            (<doc:ref type="property" to="Source:FullDesign">full-design</doc:ref> /
+            <doc:ref type="property" to="Source:Full">full</doc:ref>) * 100.
+            However, some primitive power sources are not capable reporting capacity
+            and in this case the capacity property will be unset.
+          </doc:para><doc:para>
+            This property is only valid if the property
+            <doc:ref type="property" to="Source:Type">type</doc:ref>
+            has the value "battery".
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="Technology" type="u" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Technology used in the battery:
+          </doc:para>
+          <doc:list>
+            <doc:item>
+              <doc:term>0</doc:term><doc:definition>Unknown</doc:definition>
+            </doc:item>
+            <doc:item>
+              <doc:term>1</doc:term><doc:definition>Lithium ion</doc:definition>
+            </doc:item>
+            <doc:item>
+              <doc:term>2</doc:term><doc:definition>Lithium polymer</doc:definition>
+            </doc:item>
+            <doc:item>
+              <doc:term>3</doc:term><doc:definition>Lithium iron phosphate</doc:definition>
+            </doc:item>
+            <doc:item>
+              <doc:term>4</doc:term><doc:definition>Lead acid</doc:definition>
+            </doc:item>
+            <doc:item>
+              <doc:term>5</doc:term><doc:definition>Nickel cadmium</doc:definition>
+            </doc:item>
+            <doc:item>
+              <doc:term>6</doc:term><doc:definition>Nickel metal hydride</doc:definition>
+            </doc:item>
+          </doc:list>
+          <doc:para>
+            This property is only valid if the property
+            <doc:ref type="property" to="Source:Type">type</doc:ref>
+            has the value "battery".
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="RecallNotice" type="b" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            If the device may have been recalled by the vendor due to a suspected
+            fault.
+            This key does not imply the device is faulty, only that it approximatly
+            matches the description from the vendor of units that were recalled.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="RecallVendor" type="s" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            The vendor that is handling the hardware recall.
+          </doc:para>
+          <doc:para>
+            This property is only valid if the property recall-notice is true.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="RecallUrl" type="s" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            The URL to visit about the hardware recall.
+          </doc:para>
+          <doc:para>
+            This property is only valid if the property recall-notice is true.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+  </interface>
+
+</node>
diff --git a/src/org.freedesktop.UPowerCompat.KbdBacklight.xml b/src/org.freedesktop.UPowerCompat.KbdBacklight.xml
new file mode 100644
index 0000000..4984b51
--- /dev/null
+++ b/src/org.freedesktop.UPowerCompat.KbdBacklight.xml
@@ -0,0 +1,101 @@
+<!DOCTYPE node PUBLIC
+"-//freedesktop//DTD D-BUS Object Introspection 1.0//EN"
+"http://www.freedesktop.org/standards/dbus/1.0/introspect.dtd" [
+  <!ENTITY ERROR_GENERAL "org.freedesktop.UPowerCompat.GeneralError">
+]>
+<node name="/" xmlns:doc="http://www.freedesktop.org/dbus/1.0/doc.dtd">
+  <interface name="org.freedesktop.UPowerCompat.KbdBacklight">
+    <doc:doc>
+      <doc:description>
+        <doc:para>
+          org.freedesktop.UPowerCompat.KbdBacklight is a DBus interface implemented
+          by UPower.
+	  It allows the keyboard backlight (if present) to be controlled.
+        </doc:para>
+      </doc:description>
+    </doc:doc>
+
+    <!-- ************************************************************ -->
+    <method name="GetMaxBrightness">
+      <arg name="value" direction="out" type="i">
+        <doc:doc>
+          <doc:summary>
+            The maximum value of the keyboard backlight brightness.
+          </doc:summary>
+        </doc:doc>
+      </arg>
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Get the maximum brightness level for the keyboard backlight.
+          </doc:para>
+        </doc:description>
+        <doc:errors>
+          <doc:error name="&ERROR_GENERAL;">if an error occured while getting the maximum brightness</doc:error>
+        </doc:errors>
+      </doc:doc>
+    </method>
+
+    <!-- ************************************************************ -->
+    <method name="GetBrightness">
+      <arg name="value" direction="out" type="i">
+        <doc:doc>
+          <doc:summary>
+            The current value of the keyboard backlight brightness.
+          </doc:summary>
+        </doc:doc>
+      </arg>
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Get the brightness level of the keyboard backlight.
+          </doc:para>
+        </doc:description>
+        <doc:errors>
+          <doc:error name="&ERROR_GENERAL;">if an error occured while getting the brightness</doc:error>
+        </doc:errors>
+      </doc:doc>
+    </method>
+
+    <!-- ************************************************************ -->
+    <method name="SetBrightness">
+      <arg name="value" direction="in" type="i">
+        <doc:doc>
+          <doc:summary>
+            The value to set the KbdBacklight brightness.
+          </doc:summary>
+        </doc:doc>
+      </arg>
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Set the brightness level of the keyboard backlight.
+          </doc:para>
+        </doc:description>
+        <doc:errors>
+          <doc:error name="&ERROR_GENERAL;">if an error occured while setting the brightness</doc:error>
+        </doc:errors>
+      </doc:doc>
+    </method>
+
+    <!-- ************************************************************ -->
+    <signal name="BrightnessChanged">
+      <arg name="value" direction="out" type="i">
+        <doc:doc>
+          <doc:summary>
+            The new brightness value of the keyboard backlight.
+          </doc:summary>
+        </doc:doc>
+      </arg>
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+	    The keyboard backlight brightness level has changed.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </signal>
+
+  </interface>
+
+</node>
diff --git a/src/org.freedesktop.UPowerCompat.QoS.xml b/src/org.freedesktop.UPowerCompat.QoS.xml
new file mode 100644
index 0000000..22960a7
--- /dev/null
+++ b/src/org.freedesktop.UPowerCompat.QoS.xml
@@ -0,0 +1,331 @@
+<!DOCTYPE node PUBLIC
+"-//freedesktop//DTD D-BUS Object Introspection 1.0//EN"
+"http://www.freedesktop.org/standards/dbus/1.0/introspect.dtd" [
+  <!ENTITY ERROR_GENERAL "org.freedesktop.UPowerCompat.GeneralError">
+]>
+<node name="/" xmlns:doc="http://www.freedesktop.org/dbus/1.0/doc.dtd">
+  <interface name="org.freedesktop.UPowerCompat.QoS">
+    <doc:doc>
+      <doc:description>
+        <doc:para>
+          org.freedesktop.UPowerCompat.QoS is a DBus interface implemented
+          by UPower.
+          It allows applications to request latencies, for example a couple of seconds
+          for an IM application, or a few hundred microseconds for a multiplayer game.
+        </doc:para>
+        <doc:para>
+          Use cases:
+        </doc:para>
+        <doc:itemizedlist>
+          <doc:listitem>
+            <doc:para>
+              I want my IM application to request 0.5s latency for messages.
+            </doc:para>
+            <doc:para>
+              I'm running an OpenGL simulation and want maximum performance,
+              even when on battery power.
+            </doc:para>
+            <doc:para>
+              I'm running an SQL server for a credit card company, and want the
+              server to request low latency CPU and network as any delay costs money.
+            </doc:para>
+            <doc:para>
+              I'm an admin, and want to change the power consumption vs. latency
+              from cron scripts so it uses high latency during the night for
+              maximum power saving, and low latency during business hours.
+            </doc:para>
+            <doc:para>
+              I want high throughput when copying files, but want low throughput
+              for downloading updates in the background.
+            </doc:para>
+            <doc:para>
+              I want my power manager to set all latencies to lowest when on
+              AC power.
+            </doc:para>
+            <doc:para>
+              I don't want my users messing with latency settings.
+            </doc:para>
+            <doc:para>
+              I'm and admin and I want to be able to override all latency
+              settings on my machines.
+            </doc:para>
+          </doc:listitem>
+        </doc:itemizedlist>
+        <doc:para>
+          Why don't applications use the PMQoS interface directly?
+          By providing a framework we can override requests by policy, and also
+          control requests from random services.
+          You also can't set latencies unless you're the root user, which is not
+          suitable for the desktop use case.
+        </doc:para>
+        <doc:para>
+          Of course, you can do if you really want, but then you loose the
+          benefits of the query interface and the policy override,
+          and have to run your application as root.
+        </doc:para>
+      </doc:description>
+    </doc:doc>
+
+    <!-- ************************************************************ -->
+    <method name="SetMinimumLatency">
+      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
+      <arg name="type" direction="in" type="s">
+        <doc:doc>
+          <doc:summary>
+            The type of latency to control, <doc:tt>cpu_dma</doc:tt> or
+            <doc:tt>network</doc:tt>.
+          </doc:summary>
+        </doc:doc>
+      </arg>
+      <arg name="value" direction="in" type="i">
+        <doc:doc>
+          <doc:summary>
+            The value, in microseconds or kilobits per second.
+            The value <doc:tt>-1</doc:tt> means unset and the default is used.
+          </doc:summary>
+        </doc:doc>
+      </arg>
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Set the minimum acceptable latency of the system.
+            Setting this value tells the system to not attempt latencies below this setting.
+            This may be useful in a data center or server room, when you want to override the
+            latency requests from applications.
+            This may be required if the server room is operating outside a standard thermal
+            or power envelope, and an override is required.
+            You do not have to use this method during normal operation.
+          </doc:para>
+        </doc:description>
+        <doc:permission>Callers need the <doc:tt>org.freedesktop.upower_compat.qos.set-minimum-latency</doc:tt> authorization</doc:permission>
+        <doc:errors>
+          <doc:error name="&ERROR_GENERAL;">if an error occured while setting the latency</doc:error>
+        </doc:errors>
+      </doc:doc>
+    </method>
+
+    <!-- ************************************************************ -->
+    <method name="RequestLatency">
+      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
+      <arg name="type" direction="in" type="s">
+        <doc:doc>
+          <doc:summary>
+            The type of latency to control, <doc:tt>cpu_dma</doc:tt> or
+            <doc:tt>network</doc:tt>.
+          </doc:summary>
+        </doc:doc>
+      </arg>
+      <arg name="value" direction="in" type="i">
+        <doc:doc>
+          <doc:summary>
+            The value, in microseconds or kilobits per second.
+            The value <doc:tt>-1</doc:tt> means remove all latency requirements.
+          </doc:summary>
+        </doc:doc>
+      </arg>
+      <arg name="persistent" direction="in" type="b">
+        <doc:doc>
+          <doc:summary>
+            If the latency request outlives the connection.
+            When the application issuing the request disconnects from the system
+            bus, the latency request is automatically cleaned up.
+            By setting this flag to TRUE, the request is not cleaned up when
+            the client disconnects, and the cookie is preserved acress reboots.
+          </doc:summary>
+        </doc:doc>
+      </arg>
+      <arg name="cookie" direction="out" type="u">
+        <doc:doc>
+          <doc:summary>
+            A cookie that identifies the request. This allows an application or
+            service to request multiple latency settings from one process, and for
+            other processes to cancel requests.
+          </doc:summary>
+        </doc:doc>
+      </arg>
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Set the required latency of an application or service.
+          </doc:para>
+        </doc:description>
+        <doc:permission>
+          Callers need the
+          <doc:tt>org.freedesktop.upower_compat.qos.request-latency-persistent</doc:tt>
+          authorization if <doc:tt>persistent</doc:tt> is TRUE, or
+          <doc:tt>org.freedesktop.upower_compat.qos.request-latency</doc:tt> otherwise.
+        </doc:permission>
+        <doc:errors>
+          <doc:error name="&ERROR_GENERAL;">if an error occured while setting the latency</doc:error>
+        </doc:errors>
+      </doc:doc>
+    </method>
+
+    <!-- ************************************************************ -->
+    <method name="CancelRequest">
+      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
+      <arg name="cookie" direction="in" type="u">
+        <doc:doc>
+          <doc:summary>
+            A cookie that identifies the request. This allows an application or
+            serivice to request multiple latency settings from one process.
+          </doc:summary>
+        </doc:doc>
+      </arg>
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Cancel the latency request from the application or service.
+          </doc:para>
+        </doc:description>
+        <doc:permission>
+          Callers need the
+          <doc:tt>org.freedesktop.upower_compat.qos.cancel-request</doc:tt>
+          authorization if they were not the one issuing the request.
+        </doc:permission>
+        <doc:errors>
+          <doc:error name="&ERROR_GENERAL;">if an error occured while clearing the latency</doc:error>
+        </doc:errors>
+      </doc:doc>
+    </method>
+
+    <!-- ************************************************************ -->
+    <method name="GetLatency">
+      <arg name="type" direction="in" type="s">
+        <doc:doc>
+          <doc:summary>
+            The type of latency to return, <doc:tt>cpu_dma</doc:tt> or
+            <doc:tt>network</doc:tt>.
+          </doc:summary>
+        </doc:doc>
+      </arg>
+      <arg name="value" direction="out" type="i">
+        <doc:doc>
+          <doc:summary>
+            The value, in microseconds or kilobits per second.
+            The value <doc:tt>-1</doc:tt> means not set or unavailable.
+          </doc:summary>
+        </doc:doc>
+      </arg>
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Get the lowest latency state on the system at the current time.
+          </doc:para>
+        </doc:description>
+        <doc:errors>
+          <doc:error name="&ERROR_GENERAL;">if an error occured while getting the latency</doc:error>
+        </doc:errors>
+      </doc:doc>
+    </method>
+
+    <!-- ************************************************************ -->
+    <signal name="LatencyChanged">
+      <arg name="type" direction="out" type="s">
+        <doc:doc>
+          <doc:summary>
+            The type of latency that changed, <doc:tt>cpu_dma</doc:tt> or
+            <doc:tt>network</doc:tt>.
+          </doc:summary>
+        </doc:doc>
+      </arg>
+      <arg name="value" direction="out" type="i">
+        <doc:doc>
+          <doc:summary>
+            The value, in microseconds or kilobits per second.
+            The value <doc:tt>-1</doc:tt> means not set or unavailable.
+          </doc:summary>
+        </doc:doc>
+      </arg>
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Some latency value has changed.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </signal>
+
+    <!-- ************************************************************ -->
+    <method name="GetLatencyRequests">
+      <arg name="requests" direction="out" type="a(uuusxbssi)">
+        <doc:doc>
+          <doc:summary>
+            The request lists, where each application can request different
+            latency types.
+            <doc:list>
+              <doc:item>
+                <doc:term>cookie</doc:term>
+                <doc:definition>
+                  The random cookie that identifies the request.
+                </doc:definition>
+              </doc:item>
+              <doc:item>
+                <doc:term>uid</doc:term>
+                <doc:definition>
+                  The user ID that issued the request.
+                </doc:definition>
+              </doc:item>
+              <doc:item>
+                <doc:term>pid</doc:term>
+                <doc:definition>
+                  The process ID of the application.
+                </doc:definition>
+              </doc:item>
+              <doc:item>
+                <doc:term>exec</doc:term>
+                <doc:definition>
+                  The executable that issued the request.
+                </doc:definition>
+              </doc:item>
+              <doc:item>
+                <doc:term>timespec</doc:term>
+                <doc:definition>
+                  The number of seconds since the epoch.
+                </doc:definition>
+              </doc:item>
+              <doc:item>
+                <doc:term>persistent</doc:term>
+                <doc:definition>
+                  If the request is persistent and outlives the connection lifetime.
+                </doc:definition>
+              </doc:item>
+              <doc:item>
+                <doc:term>type</doc:term>
+                <doc:definition>
+                  The type of the request, <doc:tt>cpu_dma</doc:tt> or
+                  <doc:tt>network</doc:tt>.
+                </doc:definition>
+              </doc:item>
+              <doc:item>
+                <doc:term>value</doc:term>
+                <doc:definition>
+                  The value, in microseconds or kilobits per second.
+                </doc:definition>
+              </doc:item>
+            </doc:list>
+        </doc:summary></doc:doc>
+      </arg>
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Gets all the system requests from all services and applications.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </method>
+
+    <!-- ************************************************************ -->
+    <signal name="RequestsChanged">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            The latency requests on the system have changed.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </signal>
+
+  </interface>
+
+</node>
diff --git a/src/org.freedesktop.UPowerCompat.Wakeups.xml b/src/org.freedesktop.UPowerCompat.Wakeups.xml
new file mode 100644
index 0000000..6abe44d
--- /dev/null
+++ b/src/org.freedesktop.UPowerCompat.Wakeups.xml
@@ -0,0 +1,131 @@
+<!DOCTYPE node PUBLIC
+"-//freedesktop//DTD D-BUS Object Introspection 1.0//EN"
+"http://www.freedesktop.org/standards/dbus/1.0/introspect.dtd" [
+  <!ENTITY ERROR_GENERAL "org.freedesktop.UPowerCompat.GeneralError">
+]>
+<node name="/" xmlns:doc="http://www.freedesktop.org/dbus/1.0/doc.dtd">
+  <interface name="org.freedesktop.UPowerCompat.Wakeups">
+    <doc:doc>
+      <doc:description>
+        <doc:para>
+          org.freedesktop.UPowerCompat.Wakeups is a DBus interface implemented
+          by UPower.
+          It allows applications to watch what applications and drivers are
+          causing the wakeups on the system.
+        </doc:para>
+      </doc:description>
+    </doc:doc>
+
+    <property name="HasCapability" type="b" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            If the system has the ability to profile wakeups.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <!-- ************************************************************ -->
+    <method name="GetTotal">
+      <arg name="value" direction="out" type="u">
+        <doc:doc>
+          <doc:summary>
+            The number of wakeups per second.
+          </doc:summary>
+        </doc:doc>
+      </arg>
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Get the number of wakeups per second.
+          </doc:para>
+        </doc:description>
+        <doc:errors>
+          <doc:error name="&ERROR_GENERAL;">if an error occured while getting the latency</doc:error>
+        </doc:errors>
+      </doc:doc>
+    </method>
+
+    <!-- ************************************************************ -->
+    <signal name="TotalChanged">
+      <arg name="value" direction="out" type="u">
+        <doc:doc>
+          <doc:summary>
+            The number of wakeups per second.
+          </doc:summary>
+        </doc:doc>
+      </arg>
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            The number of wakeups per second has changed.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </signal>
+
+    <!-- ************************************************************ -->
+    <method name="GetData">
+      <arg name="data" direction="out" type="a(budss)">
+        <doc:doc>
+          <doc:summary>
+            The data of all the processes and drivers which contribute to the
+            wakeups on the system.
+            <doc:list>
+              <doc:item>
+                <doc:term>is_userspace</doc:term>
+                <doc:definition>
+                  If the wakeup is from userspace.
+                </doc:definition>
+              </doc:item>
+              <doc:item>
+                <doc:term>id</doc:term>
+                <doc:definition>
+                  The process ID of the application, or the IRQ for kernel drivers.
+                </doc:definition>
+              </doc:item>
+              <doc:item>
+                <doc:term>value</doc:term>
+                <doc:definition>
+                  The number of wakeups per second.
+                </doc:definition>
+              </doc:item>
+              <doc:item>
+                <doc:term>cmdline</doc:term>
+                <doc:definition>
+                  The command line for the application, or NULL for kernel drivers.
+                </doc:definition>
+              </doc:item>
+              <doc:item>
+                <doc:term>details</doc:term>
+                <doc:definition>
+                  The details about the wakeup.
+                </doc:definition>
+              </doc:item>
+            </doc:list>
+        </doc:summary></doc:doc>
+      </arg>
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Gets all the wakeups from drivers and applications.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </method>
+
+    <!-- ************************************************************ -->
+    <signal name="DataChanged">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            The wakeup data has changed.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </signal>
+
+  </interface>
+
+</node>
diff --git a/src/org.freedesktop.UPowerCompat.conf.in b/src/org.freedesktop.UPowerCompat.conf.in
new file mode 100644
index 0000000..b1189fb
--- /dev/null
+++ b/src/org.freedesktop.UPowerCompat.conf.in
@@ -0,0 +1,40 @@
+<?xml version="1.0" encoding="UTF-8"?> <!-- -*- XML -*- -->
+
+<!DOCTYPE busconfig PUBLIC
+ "-//freedesktop//DTD D-BUS Bus Configuration 1.0//EN"
+ "http://www.freedesktop.org/standards/dbus/1.0/busconfig.dtd">
+<busconfig>
+  <!-- Only root can own the service -->
+  <policy user="root">
+    <allow own="org.freedesktop.UPowerCompat"/>
+  </policy>
+  <policy context="default">
+
+    <allow send_destination="org.freedesktop.UPowerCompat"
+           send_interface="org.freedesktop.DBus.Introspectable"/>
+
+    <allow send_destination="org.freedesktop.UPowerCompat"
+           send_interface="org.freedesktop.DBus.Peer"/>
+    <allow send_destination="org.freedesktop.UPowerCompat"
+           send_interface="org.freedesktop.DBus.Properties"/>
+    <allow send_destination="org.freedesktop.UPowerCompat.Device"
+           send_interface="org.freedesktop.DBus.Properties"/>
+    <allow send_destination="org.freedesktop.UPowerCompat.QoS"
+           send_interface="org.freedesktop.DBus.Properties"/>
+    <allow send_destination="org.freedesktop.UPowerCompat.KbdBacklight"
+           send_interface="org.freedesktop.DBus.Properties"/>
+    <allow send_destination="org.freedesktop.UPowerCompat.Wakeups"
+           send_interface="org.freedesktop.DBus.Properties"/>
+
+    <allow send_destination="org.freedesktop.UPowerCompat"
+           send_interface="org.freedesktop.UPowerCompat"/>
+    <allow send_destination="org.freedesktop.UPowerCompat"
+           send_interface="org.freedesktop.UPowerCompat.Device"/>
+    <allow send_destination="org.freedesktop.UPowerCompat"
+           send_interface="org.freedesktop.UPowerCompat.QoS"/>
+    <allow send_destination="org.freedesktop.UPowerCompat"
+           send_interface="org.freedesktop.UPowerCompat.KbdBacklight"/>
+    <allow send_destination="org.freedesktop.UPowerCompat"
+	   send_interface="org.freedesktop.UPowerCompat.Wakeups"/>
+  </policy>
+</busconfig>
diff --git a/src/org.freedesktop.UPowerCompat.service.in b/src/org.freedesktop.UPowerCompat.service.in
new file mode 100644
index 0000000..28cb89f
--- /dev/null
+++ b/src/org.freedesktop.UPowerCompat.service.in
@@ -0,0 +1,6 @@
+[D-BUS Service]
+Name=org.freedesktop.UPowerCompat
+Exec=@libexecdir@/upowerd-compat
+User=root
+SystemdService=upower-compat.service
+
diff --git a/src/org.freedesktop.UPowerCompat.xml b/src/org.freedesktop.UPowerCompat.xml
new file mode 100644
index 0000000..e55f9d5
--- /dev/null
+++ b/src/org.freedesktop.UPowerCompat.xml
@@ -0,0 +1,395 @@
+<!DOCTYPE node PUBLIC
+"-//freedesktop//DTD D-BUS Object Introspection 1.0//EN"
+"http://www.freedesktop.org/standards/dbus/1.0/introspect.dtd">
+<node name="/" xmlns:doc="http://www.freedesktop.org/dbus/1.0/doc.dtd">
+
+  <interface name="org.freedesktop.UPowerCompat">
+    <doc:doc>
+      <doc:description>
+        <doc:para>
+          The UPower service is available via the system message
+          bus. To access the service, use
+          the <doc:tt>org.freedesktop.UPowerCompat</doc:tt> interface on
+          the <doc:tt>/org/freedesktop/UPowerCompat</doc:tt> object on
+          the D-Bus system bus service with the well-known
+          name <doc:tt>org.freedesktop.UPowerCompat</doc:tt>.
+        </doc:para>
+        <doc:para>
+          <doc:example language="shell" title="simple example">
+            <doc:code>
+$ dbus-send --print-reply \
+            --system \
+            --dest=org.freedesktop.UPowerCompat \
+            /org/freedesktop/UPowerCompat \
+            org.freedesktop.UPowerCompat.EnumerateDevices
+
+method return sender=:1.386 -> dest=:1.451 reply_serial=2
+   array [
+      object path "/org/freedesktop/UPowerCompat/devices/line_power_AC"
+      object path "/org/freedesktop/UPowerCompat/devices/battery_BAT0"
+   ]
+            </doc:code>
+          </doc:example>
+        </doc:para>
+      </doc:description>
+    </doc:doc>
+
+    <!-- ************************************************************ -->
+
+    <method name="EnumerateDevices">
+      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
+      <arg name="devices" direction="out" type="ao">
+        <doc:doc><doc:summary>An array of object paths for devices.</doc:summary></doc:doc>
+      </arg>
+
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Enumerate all power objects on the system.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </method>
+
+    <!-- ************************************************************ -->
+
+    <signal name="DeviceAdded">
+      <arg name="device" type="o">
+        <doc:doc><doc:summary>Object path of device that was added.</doc:summary></doc:doc>
+      </arg>
+
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Emitted when a device is added.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </signal>
+
+    <!-- ************************************************************ -->
+
+    <signal name="DeviceRemoved">
+      <arg name="device" type="o">
+        <doc:doc><doc:summary>Object path of device that was removed.</doc:summary></doc:doc>
+      </arg>
+
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Emitted when a device is removed.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </signal>
+
+    <!-- ************************************************************ -->
+
+    <signal name="DeviceChanged">
+      <arg name="device" type="o">
+        <doc:doc><doc:summary>Object path of device that was changed.</doc:summary></doc:doc>
+      </arg>
+
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Emitted when a device changed.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </signal>
+
+    <!-- ************************************************************ -->
+
+    <signal name="Changed">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Emitted when one or more properties on the object changes.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </signal>
+
+    <!-- ************************************************************ -->
+
+    <signal name="Sleeping">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            This signal is sent when the session is about to be suspended or
+            hibernated.
+          </doc:para>
+          <doc:para>
+            This signal is DEPRECATED. Use NotifySleep() instead.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </signal>
+
+    <!-- ************************************************************ -->
+
+    <signal name="NotifySleep">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            This signal is sent when the session is about to be suspended or
+            hibernated.
+            Session and system programs have one second to do anything required
+            before the sleep action is taken (such as sending out Avahi or
+            Jabber messages).
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+      <arg name="action" direction="out" type="s">
+        <doc:doc>
+          <doc:summary>
+            The sleep action type, e.g. <doc:tt>suspend</doc:tt>,
+            <doc:tt>hibernate</doc:tt> or <doc:tt>hybrid</doc:tt>.
+          </doc:summary>
+        </doc:doc>
+      </arg>
+    </signal>
+
+    <!-- ************************************************************ -->
+
+    <signal name="Resuming">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            This signal is sent when the session has just returned from
+            Suspend() or Hibernate().
+          </doc:para>
+          <doc:para>
+            This signal is DEPRECATED. Use NotifyResume() instead.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </signal>
+
+    <!-- ************************************************************ -->
+
+    <signal name="NotifyResume">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            This signal is sent when the session has just returned from
+            Suspend() or Hibernate().
+            Session and system programs can then do anything required (such as
+            sending out Avahi or Jabber messages).
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+      <arg name="action" direction="out" type="s">
+        <doc:doc>
+          <doc:summary>
+            The sleep action type, e.g. <doc:tt>suspend</doc:tt>,
+            <doc:tt>hibernate</doc:tt> or <doc:tt>hybrid</doc:tt>.
+          </doc:summary>
+        </doc:doc>
+      </arg>
+    </signal>
+
+    <!-- ************************************************************ -->
+
+    <method name="AboutToSleep">
+      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            This method tells UPower that the Suspend() or Hibernate() method
+            is about to be called.
+            This allows UPower to emit the Suspending signal whilst
+            session activities are happening that have to be done before the
+            suspend process is started.
+          </doc:para>
+          <doc:para>
+            This method would typically be called by the session power
+            management daemon, before it locks the screen and waits for the
+            screen to fade to black.
+            The session power management component would then call Suspend() or
+            Hibernate() when these syncronous tasks have completed.
+          </doc:para>
+          <doc:para>
+            If this method is not called than nothing bad will happen and
+            Suspend() or Hibernate() will block for the required second.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+      <arg name="action" direction="in" type="s">
+        <doc:doc>
+          <doc:summary>
+            The sleep action type, e.g. <doc:tt>suspend</doc:tt> or
+            <doc:tt>hibernate</doc:tt>.
+          </doc:summary>
+        </doc:doc>
+      </arg>
+    </method>
+
+    <!-- ************************************************************ -->
+
+    <method name="Suspend">
+      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Suspends the computer into a low power state.
+            System state is not preserved if the power is lost.
+          </doc:para>
+          <doc:para>
+            If AboutToSleep() has not been called then UPower will send
+            the Sleeping() signal and block for one second.
+          </doc:para>
+          <doc:para>
+            If AboutToSleep() has been called less than one second
+            before this method is called then UPower will block for the
+            remaining time to complete one second of delay.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </method>
+
+    <!-- ************************************************************ -->
+
+    <method name="SuspendAllowed">
+      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
+      <arg name="allowed" direction="out" type="b">
+        <doc:doc><doc:summary>TRUE if allowed, otherwise FALSE</doc:summary></doc:doc>
+      </arg>
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Check if the caller has (or can get) the PolicyKit privilege to call
+            <doc:ref type="method" to="Power.Suspend">Suspend</doc:ref>.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </method>
+
+    <!-- ************************************************************ -->
+
+    <method name="Hibernate">
+      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Hibernates the computer into a low power state.
+            System state is preserved if the power is lost.
+          </doc:para>
+          <doc:para>
+            If AboutToSleep() has not been called then UPower will send
+            the Sleeping() signal and block for one second.
+          </doc:para>
+          <doc:para>
+            If AboutToSleep() has been called less than one second
+            before this method is called then UPower will block for the
+            remaining time to complete one second of delay.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </method>
+
+    <!-- ************************************************************ -->
+
+    <method name="HibernateAllowed">
+      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
+      <arg name="allowed" direction="out" type="b">
+        <doc:doc><doc:summary>TRUE if allowed, otherwise FALSE</doc:summary></doc:doc>
+      </arg>
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Check if the caller has (or can get) the PolicyKit privilege to call
+            <doc:ref type="method" to="Power.Hibernate">Hibernate</doc:ref>.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </method>
+
+    <!-- ************************************************************ -->
+
+    <property name="DaemonVersion" type="s" access="read">
+      <doc:doc><doc:description><doc:para>
+            Version of the running daemon, e.g. <doc:tt>002</doc:tt>.
+      </doc:para></doc:description></doc:doc>
+    </property>
+
+    <property name="CanSuspend" type="b" access="read">
+      <doc:doc><doc:description><doc:para>
+            Whether the system is able to suspend.
+      </doc:para></doc:description></doc:doc>
+    </property>
+
+    <property name="CanHibernate" type="b" access="read">
+      <doc:doc><doc:description><doc:para>
+            Whether the system is able to hibernate.
+      </doc:para></doc:description></doc:doc>
+    </property>
+
+    <property name="OnBattery" type="b" access="read">
+      <doc:doc><doc:description><doc:para>
+            Indicates whether the system is running on battery power.
+            This property is provided for convenience.
+      </doc:para></doc:description></doc:doc>
+    </property>
+
+    <property name="OnLowBattery" type="b" access="read">
+      <doc:doc><doc:description><doc:para>
+            Indicates whether the system is running on battery power and if the battery is critically low.
+            This property is provided for convenience.
+      </doc:para></doc:description></doc:doc>
+    </property>
+
+    <property name="LidIsClosed" type="b" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            Indicates if the laptop lid is closed where the display cannot be seen.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="LidIsPresent" type="b" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            If the system has a lid device.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="LidForceSleep" type="b" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            If the system really has to sleep when the lid is closed.
+            Some laptops actually melt (!) if the lid is closed and the
+            computer keeps running. We blacklist those, and do something
+            sane for the other machines.
+          </doc:para>
+          <doc:para>
+            This allows us to set the default session policy to not
+            suspend on lid close if the laptop is docked, and be sure
+            the machine is not going to melt.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+    <property name="IsDocked" type="b" access="read">
+      <doc:doc>
+        <doc:description>
+          <doc:para>
+            If the system is currently docked.
+            Note: the "is-docked" value is the result of a heuristic,
+            which may involve testing the display output.
+          </doc:para>
+        </doc:description>
+      </doc:doc>
+    </property>
+
+  </interface>
+
+</node>
diff --git a/src/up-config.c b/src/up-config.c
index 31f4be5..98d43d3 100644
--- a/src/up-config.c
+++ b/src/up-config.c
@@ -80,7 +80,7 @@ up_config_init (UpConfig *config)
 
 	filename = g_strdup (g_getenv ("UPOWER_CONF_FILE_NAME"));
 	if (filename == NULL)
-		filename = g_build_filename (PACKAGE_SYSCONF_DIR,"UPower", "UPower.conf", NULL);
+		filename = g_build_filename (PACKAGE_SYSCONF_DIR,"UPower", "UPower-compat.conf", NULL);
 
 	/* load */
 	ret = g_key_file_load_from_file (config->priv->keyfile,
diff --git a/src/up-daemon.c b/src/up-daemon.c
index bbfb806..93faa07 100644
--- a/src/up-daemon.c
+++ b/src/up-daemon.c
@@ -351,7 +351,7 @@ up_daemon_about_to_sleep (UpDaemon *daemon,
 		goto out;
 
 	/* TODO: use another PolicyKit context? */
-	if (!up_polkit_check_auth (priv->polkit, subject, "org.freedesktop.upower.suspend", context))
+	if (!up_polkit_check_auth (priv->polkit, subject, "org.freedesktop.upower_compat.suspend", context))
 		goto out;
 
 	/* we've told the clients we're going down */
@@ -536,7 +536,7 @@ up_daemon_suspend (UpDaemon *daemon, DBusGMethodInvocation *context)
 	if (subject == NULL)
 		goto out;
 
-	if (!up_polkit_check_auth (priv->polkit, subject, "org.freedesktop.upower.suspend", context))
+	if (!up_polkit_check_auth (priv->polkit, subject, "org.freedesktop.upower_compat.suspend", context))
 		goto out;
 
 	/* already requested */
@@ -585,7 +585,7 @@ up_daemon_suspend_allowed (UpDaemon *daemon, DBusGMethodInvocation *context)
 		goto out;
 
 	error = NULL;
-	ret = up_polkit_is_allowed (priv->polkit, subject, "org.freedesktop.upower.suspend", &error);
+	ret = up_polkit_is_allowed (priv->polkit, subject, "org.freedesktop.upower_compat.suspend", &error);
 	if (error) {
 		dbus_g_method_return_error (context, error);
 		g_error_free (error);
@@ -683,7 +683,7 @@ up_daemon_hibernate (UpDaemon *daemon, DBusGMethodInvocation *context)
 	if (subject == NULL)
 		goto out;
 
-	if (!up_polkit_check_auth (priv->polkit, subject, "org.freedesktop.upower.hibernate", context))
+	if (!up_polkit_check_auth (priv->polkit, subject, "org.freedesktop.upower_compat.hibernate", context))
 		goto out;
 
 	/* already requested */
@@ -732,7 +732,7 @@ up_daemon_hibernate_allowed (UpDaemon *daemon, DBusGMethodInvocation *context)
 		goto out;
 
 	error = NULL;
-	ret = up_polkit_is_allowed (priv->polkit, subject, "org.freedesktop.upower.hibernate", &error);
+	ret = up_polkit_is_allowed (priv->polkit, subject, "org.freedesktop.upower_compat.hibernate", &error);
 	if (error) {
 		dbus_g_method_return_error (context, error);
 		g_error_free (error);
@@ -783,7 +783,7 @@ up_daemon_register_power_daemon (UpDaemon *daemon)
 
 	/* register GObject */
 	dbus_g_connection_register_g_object (priv->connection,
-					     "/org/freedesktop/UPower",
+					     "/org/freedesktop/UPowerCompat",
 					     G_OBJECT (daemon));
 
 	/* success */
@@ -1167,7 +1167,7 @@ up_daemon_init (UpDaemon *daemon)
 		g_debug ("using %s as the self test conf file", filename_self_test);
 		filename = g_strdup (filename_self_test);
 	} else {
-		filename = g_build_filename (PACKAGE_SYSCONF_DIR,"UPower", "UPower.conf", NULL);
+		filename = g_build_filename (PACKAGE_SYSCONF_DIR,"UPower", "UPower-compat.conf", NULL);
 	}
 	ret = g_key_file_load_from_file (file, filename, G_KEY_FILE_NONE, &error);
 	if (ret) {
diff --git a/src/up-device.c b/src/up-device.c
index 28ac3a9..1847844 100644
--- a/src/up-device.c
+++ b/src/up-device.c
@@ -825,7 +825,7 @@ up_device_compute_object_path (UpDevice *device)
 		if (id[i] == ':')
 			id[i] = 'o';
 	}
-	object_path = g_build_filename ("/org/freedesktop/UPower/devices", id, NULL);
+	object_path = g_build_filename ("/org/freedesktop/UPowerCompat/devices", id, NULL);
 
 	g_free (basename);
 	g_free (id);
diff --git a/src/up-kbd-backlight.c b/src/up-kbd-backlight.c
index d727961..7afbb43 100644
--- a/src/up-kbd-backlight.c
+++ b/src/up-kbd-backlight.c
@@ -281,7 +281,7 @@ up_kbd_backlight_init (UpKbdBacklight *kbd_backlight)
 	}
 
 	/* register on the bus */
-	dbus_g_connection_register_g_object (kbd_backlight->priv->connection, "/org/freedesktop/UPower/KbdBacklight", G_OBJECT (kbd_backlight));
+	dbus_g_connection_register_g_object (kbd_backlight->priv->connection, "/org/freedesktop/UPowerCompat/KbdBacklight", G_OBJECT (kbd_backlight));
 
 }
 
diff --git a/src/up-main.c b/src/up-main.c
index f1d81a2..7ea2eef 100644
--- a/src/up-main.c
+++ b/src/up-main.c
@@ -46,7 +46,7 @@
  #include <glib-unix.h>
 #endif
 
-#define DEVKIT_POWER_SERVICE_NAME "org.freedesktop.UPower"
+#define DEVKIT_POWER_SERVICE_NAME "org.freedesktop.UPowerCompat"
 static GMainLoop *loop = NULL;
 
 /**
diff --git a/src/up-qos.c b/src/up-qos.c
index fc72643..6c336ff 100644
--- a/src/up-qos.c
+++ b/src/up-qos.c
@@ -280,9 +280,9 @@ up_qos_request_latency (UpQos *qos, const gchar *type_text, gint value, gboolean
 
 	/* check auth */
 	if (persistent)
-		auth = "org.freedesktop.upower.qos.request-latency-persistent";
+		auth = "org.freedesktop.upower_compat.qos.request-latency-persistent";
 	else
-		auth = "org.freedesktop.upower.qos.request-latency";
+		auth = "org.freedesktop.upower_compat.qos.request-latency";
 	if (!up_polkit_check_auth (qos->priv->polkit, subject, auth, context))
 		goto out;
 
@@ -381,7 +381,7 @@ up_qos_cancel_request (UpQos *qos, guint cookie, DBusGMethodInvocation *context)
 		subject = up_polkit_get_subject (qos->priv->polkit, context);
 		if (subject == NULL)
 			goto out;
-		if (!up_polkit_check_auth (qos->priv->polkit, subject, "org.freedesktop.upower.qos.cancel-request", context))
+		if (!up_polkit_check_auth (qos->priv->polkit, subject, "org.freedesktop.upower_compat.qos.cancel-request", context))
 			goto out;
 	}
 
@@ -589,7 +589,7 @@ up_qos_init (UpQos *qos)
 	}
 
 	/* register on the bus */
-	dbus_g_connection_register_g_object (qos->priv->connection, "/org/freedesktop/UPower/Policy", G_OBJECT (qos));
+	dbus_g_connection_register_g_object (qos->priv->connection, "/org/freedesktop/UPowerCompat/Policy", G_OBJECT (qos));
 
 	/* watch NOC */
 	qos->priv->proxy = dbus_g_proxy_new_for_name_owner (qos->priv->connection, DBUS_SERVICE_DBUS,
diff --git a/src/up-self-test.c b/src/up-self-test.c
index 1a0595d..ae4d8ce 100644
--- a/src/up-self-test.c
+++ b/src/up-self-test.c
@@ -339,10 +339,10 @@ main (int argc, char **argv)
 	g_test_init (&argc, &argv, NULL);
 
 	/* make check, vs. make distcheck */
-	if (g_file_test ("../etc/UPower.conf", G_FILE_TEST_EXISTS))
-		g_setenv ("UPOWER_CONF_FILE_NAME", "../etc/UPower.conf", TRUE);
+	if (g_file_test ("../etc/UPower-compat.conf", G_FILE_TEST_EXISTS))
+		g_setenv ("UPOWER_CONF_FILE_NAME", "../etc/UPower-compat.conf", TRUE);
 	else
-		g_setenv ("UPOWER_CONF_FILE_NAME", "../../etc/UPower.conf", TRUE);
+		g_setenv ("UPOWER_CONF_FILE_NAME", "../../etc/UPower-compat.conf", TRUE);
 
 	/* tests go here */
 	g_test_add_func ("/power/backend", up_test_backend_func);
diff --git a/src/up-wakeups.c b/src/up-wakeups.c
index a9037e1..cebac75 100644
--- a/src/up-wakeups.c
+++ b/src/up-wakeups.c
@@ -757,7 +757,7 @@ up_wakeups_init (UpWakeups *wakeups)
 	}
 
 	/* register on the bus */
-	dbus_g_connection_register_g_object (wakeups->priv->connection, "/org/freedesktop/UPower/Wakeups", G_OBJECT (wakeups));
+	dbus_g_connection_register_g_object (wakeups->priv->connection, "/org/freedesktop/UPowerCompat/Wakeups", G_OBJECT (wakeups));
 }
 
 /**
diff --git a/src/upower-compat.service.in b/src/upower-compat.service.in
new file mode 100644
index 0000000..319a32a
--- /dev/null
+++ b/src/upower-compat.service.in
@@ -0,0 +1,15 @@
+[Unit]
+Description=Daemon for power management
+Documentation=man:upowerd-compat(8)
+
+[Service]
+Type=dbus
+BusName=org.freedesktop.UPowerCompat
+ExecStart=@libexecdir@/upowerd-compat
+
+[Install]
+# We pull this in by graphical.target instead of waiting for the bus
+# activation, to speed things up a little: gdm uses this anyway so it is nice
+# if it is already around when gdm wants to use it and doesn't have to wait for
+# it.
+WantedBy=graphical.target
diff --git a/src/upower.service.in b/src/upower.service.in
deleted file mode 100644
index e74be67..0000000
--- a/src/upower.service.in
+++ /dev/null
@@ -1,15 +0,0 @@
-[Unit]
-Description=Daemon for power management
-Documentation=man:upowerd(8)
-
-[Service]
-Type=dbus
-BusName=org.freedesktop.UPower
-ExecStart=@libexecdir@/upowerd
-
-[Install]
-# We pull this in by graphical.target instead of waiting for the bus
-# activation, to speed things up a little: gdm uses this anyway so it is nice
-# if it is already around when gdm wants to use it and doesn't have to wait for
-# it.
-WantedBy=graphical.target
diff --git a/tools/Makefile.am b/tools/Makefile.am
index dbe6724..dbd9573 100644
--- a/tools/Makefile.am
+++ b/tools/Makefile.am
@@ -3,29 +3,29 @@
 AM_CPPFLAGS = \
 	$(PIE_CFLAGS)						\
 	-DUP_COMPILATION					\
-	-DG_LOG_DOMAIN=\"UPower\"				\
+	-DG_LOG_DOMAIN=\"UPower-compat\"			\
 	-I$(top_srcdir)						\
 	-I$(top_srcdir)/libupower-glib				\
 	$(DBUS_GLIB_CFLAGS)					\
 	$(POLKIT_DBUS_CFLAGS)					\
 	$(GLIB_CFLAGS)
 
-UPOWER_LIBS = $(top_builddir)/libupower-glib/libupower-glib.la
+UPOWER_LIBS = $(top_builddir)/libupower-glib/libupower-glib-compat.la
 
-bin_PROGRAMS = upower
+bin_PROGRAMS = upower-compat
 
-upower_SOURCES = 					\
+upower_compat_SOURCES = 					\
 	up-tool.c					\
 	$(BUILT_SOURCES)
 
-upower_CPPFLAGS = 					\
+upower_compat_CPPFLAGS = 					\
 	$(AM_CPPFLAGS)
 
-upower_LDFLAGS =
+upower_compat_LDFLAGS =
 	-pthread					\
 	$(PIE_LDFLAGS)
 
-upower_LDADD = 						\
+upower_compat_LDADD = 						\
 	$(DBUS_GLIB_LIBS)				\
 	$(UPOWER_LIBS)					\
 	$(POLKIT_DBUS_LIBS)
diff --git a/upower-glib-compat.pc.in b/upower-glib-compat.pc.in
new file mode 100644
index 0000000..0fd07f5
--- /dev/null
+++ b/upower-glib-compat.pc.in
@@ -0,0 +1,13 @@
+prefix=@prefix@
+exec_prefix=@exec_prefix@
+libdir=@libdir@
+includedir=@includedir@
+
+Name: upower-glib-compat
+Description: UPower is a system daemon for managing power devices
+Version: @VERSION@
+Requires.private: dbus-1, dbus-glib-1, gthread-2.0
+Requires: glib-2.0, gobject-2.0
+Libs: -L${libdir} -lupower-glib-compat
+Cflags: -I${includedir}/libupower-glib-compat
+
diff --git a/upower-glib.pc.in b/upower-glib.pc.in
deleted file mode 100644
index 9a297ef..0000000
--- a/upower-glib.pc.in
+++ /dev/null
@@ -1,13 +0,0 @@
-prefix=@prefix@
-exec_prefix=@exec_prefix@
-libdir=@libdir@
-includedir=@includedir@
-
-Name: upower-glib
-Description: UPower is a system daemon for managing power devices
-Version: @VERSION@
-Requires.private: dbus-1, dbus-glib-1, gthread-2.0
-Requires: glib-2.0, gobject-2.0
-Libs: -L${libdir} -lupower-glib
-Cflags: -I${includedir}/libupower-glib
-
-- 
2.0.0

